<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>滕王阁序</title>
    <url>/2023/01/28/tengwanggexu/</url>
    <content><![CDATA[<h3 id="&#x6ED5;&#x738B;&#x9601;&#x5E8F;"><a href="#&#x6ED5;&#x738B;&#x9601;&#x5E8F;" class="headerlink" title="&#x6ED5;&#x738B;&#x9601;&#x5E8F;"></a><center>&#x6ED5;&#x738B;&#x9601;&#x5E8F;</center></h3><h5 id="&#x738B;&#x52C3;-&#x3014;&#x5510;&#x4EE3;"><a href="#&#x738B;&#x52C3;-&#x3014;&#x5510;&#x4EE3;" class="headerlink" title="&#x738B;&#x52C3; &#x3014;&#x5510;&#x4EE3;)"></a><center>&#x738B;&#x52C3; &#x3014;&#x5510;&#x4EE3;)</center></h5><h4 id="&#x8C6B;&#x7AE0;&#x6545;&#x90E1;&#xFF0C;&#x6D2A;&#x90FD;&#x65B0;&#x5E9C;&#x3002;&#x661F;&#x5206;&#x7FFC;&#x8F78;&#xFF0C;&#x5730;&#x63A5;&#x8861;&#x5E90;&#x3002;&#x895F;&#x4E09;&#x6C5F;&#x800C;&#x5E26;&#x4E94;&#x6E56;&#xFF0C;&#x63A7;&#x86EE;&#x8346;&#x800C;&#x5F15;&#x74EF;&#x8D8A;&#x3002;&#x7269;&#x534E;&#x5929;&#x5B9D;&#xFF0C;&#x9F99;&#x5149;&#x5C04;&#x725B;&#x6597;&#x4E4B;&#x589F;&#xFF1B;&#x4EBA;&#x6770;&#x5730;&#x7075;&#xFF0C;&#x5F90;&#x5B7A;&#x4E0B;&#x9648;&#x8543;&#x4E4B;&#x69BB;&#x3002;&#x96C4;&#x5DDE;&#x96FE;&#x5217;&#xFF0C;&#x4FCA;&#x91C7;&#x661F;&#x9A70;&#x3002;&#x53F0;&#x968D;&#x6795;&#x5937;&#x590F;&#x4E4B;&#x4EA4;&#xFF0C;&#x5BBE;&#x4E3B;&#x5C3D;&#x4E1C;&#x5357;&#x4E4B;&#x7F8E;&#x3002;&#x90FD;&#x7763;&#x960E;&#x516C;&#x4E4B;&#x96C5;&#x671B;&#xFF0C;&#x68E8;&#x621F;&#x9065;&#x4E34;&#xFF1B;&#x5B87;&#x6587;&#x65B0;&#x5DDE;&#x4E4B;&#x61FF;&#x8303;&#xFF0C;&#x895C;&#x5E37;&#x6682;&#x9A7B;&#x3002;&#x5341;&#x65EC;&#x4F11;&#x5047;&#xFF0C;&#x80DC;&#x53CB;&#x5982;&#x4E91;&#xFF1B;&#x5343;&#x91CC;&#x9022;&#x8FCE;&#xFF0C;&#x9AD8;&#x670B;&#x6EE1;&#x5EA7;&#x3002;&#x817E;&#x86DF;&#x8D77;&#x51E4;&#xFF0C;&#x5B5F;&#x5B66;&#x58EB;&#x4E4B;&#x8BCD;&#x5B97;&#xFF1B;&#x7D2B;&#x7535;&#x9752;&#x971C;&#xFF0C;&#x738B;&#x5C06;&#x519B;&#x4E4B;&#x6B66;&#x5E93;&#x3002;&#x5BB6;&#x541B;&#x4F5C;&#x5BB0;&#xFF0C;&#x8DEF;&#x51FA;&#x540D;&#x533A;&#xFF1B;&#x7AE5;&#x5B50;&#x4F55;&#x77E5;&#xFF0C;&#x8EAC;&#x9022;&#x80DC;&#x996F;&#x3002;"><a href="#&#x8C6B;&#x7AE0;&#x6545;&#x90E1;&#xFF0C;&#x6D2A;&#x90FD;&#x65B0;&#x5E9C;&#x3002;&#x661F;&#x5206;&#x7FFC;&#x8F78;&#xFF0C;&#x5730;&#x63A5;&#x8861;&#x5E90;&#x3002;&#x895F;&#x4E09;&#x6C5F;&#x800C;&#x5E26;&#x4E94;&#x6E56;&#xFF0C;&#x63A7;&#x86EE;&#x8346;&#x800C;&#x5F15;&#x74EF;&#x8D8A;&#x3002;&#x7269;&#x534E;&#x5929;&#x5B9D;&#xFF0C;&#x9F99;&#x5149;&#x5C04;&#x725B;&#x6597;&#x4E4B;&#x589F;&#xFF1B;&#x4EBA;&#x6770;&#x5730;&#x7075;&#xFF0C;&#x5F90;&#x5B7A;&#x4E0B;&#x9648;&#x8543;&#x4E4B;&#x69BB;&#x3002;&#x96C4;&#x5DDE;&#x96FE;&#x5217;&#xFF0C;&#x4FCA;&#x91C7;&#x661F;&#x9A70;&#x3002;&#x53F0;&#x968D;&#x6795;&#x5937;&#x590F;&#x4E4B;&#x4EA4;&#xFF0C;&#x5BBE;&#x4E3B;&#x5C3D;&#x4E1C;&#x5357;&#x4E4B;&#x7F8E;&#x3002;&#x90FD;&#x7763;&#x960E;&#x516C;&#x4E4B;&#x96C5;&#x671B;&#xFF0C;&#x68E8;&#x621F;&#x9065;&#x4E34;&#xFF1B;&#x5B87;&#x6587;&#x65B0;&#x5DDE;&#x4E4B;&#x61FF;&#x8303;&#xFF0C;&#x895C;&#x5E37;&#x6682;&#x9A7B;&#x3002;&#x5341;&#x65EC;&#x4F11;&#x5047;&#xFF0C;&#x80DC;&#x53CB;&#x5982;&#x4E91;&#xFF1B;&#x5343;&#x91CC;&#x9022;&#x8FCE;&#xFF0C;&#x9AD8;&#x670B;&#x6EE1;&#x5EA7;&#x3002;&#x817E;&#x86DF;&#x8D77;&#x51E4;&#xFF0C;&#x5B5F;&#x5B66;&#x58EB;&#x4E4B;&#x8BCD;&#x5B97;&#xFF1B;&#x7D2B;&#x7535;&#x9752;&#x971C;&#xFF0C;&#x738B;&#x5C06;&#x519B;&#x4E4B;&#x6B66;&#x5E93;&#x3002;&#x5BB6;&#x541B;&#x4F5C;&#x5BB0;&#xFF0C;&#x8DEF;&#x51FA;&#x540D;&#x533A;&#xFF1B;&#x7AE5;&#x5B50;&#x4F55;&#x77E5;&#xFF0C;&#x8EAC;&#x9022;&#x80DC;&#x996F;&#x3002;" class="headerlink" title="&#x8C6B;&#x7AE0;&#x6545;&#x90E1;&#xFF0C;&#x6D2A;&#x90FD;&#x65B0;&#x5E9C;&#x3002;&#x661F;&#x5206;&#x7FFC;&#x8F78;&#xFF0C;&#x5730;&#x63A5;&#x8861;&#x5E90;&#x3002;&#x895F;&#x4E09;&#x6C5F;&#x800C;&#x5E26;&#x4E94;&#x6E56;&#xFF0C;&#x63A7;&#x86EE;&#x8346;&#x800C;&#x5F15;&#x74EF;&#x8D8A;&#x3002;&#x7269;&#x534E;&#x5929;&#x5B9D;&#xFF0C;&#x9F99;&#x5149;&#x5C04;&#x725B;&#x6597;&#x4E4B;&#x589F;&#xFF1B;&#x4EBA;&#x6770;&#x5730;&#x7075;&#xFF0C;&#x5F90;&#x5B7A;&#x4E0B;&#x9648;&#x8543;&#x4E4B;&#x69BB;&#x3002;&#x96C4;&#x5DDE;&#x96FE;&#x5217;&#xFF0C;&#x4FCA;&#x91C7;&#x661F;&#x9A70;&#x3002;&#x53F0;&#x968D;&#x6795;&#x5937;&#x590F;&#x4E4B;&#x4EA4;&#xFF0C;&#x5BBE;&#x4E3B;&#x5C3D;&#x4E1C;&#x5357;&#x4E4B;&#x7F8E;&#x3002;&#x90FD;&#x7763;&#x960E;&#x516C;&#x4E4B;&#x96C5;&#x671B;&#xFF0C;&#x68E8;&#x621F;&#x9065;&#x4E34;&#xFF1B;&#x5B87;&#x6587;&#x65B0;&#x5DDE;&#x4E4B;&#x61FF;&#x8303;&#xFF0C;&#x895C;&#x5E37;&#x6682;&#x9A7B;&#x3002;&#x5341;&#x65EC;&#x4F11;&#x5047;&#xFF0C;&#x80DC;&#x53CB;&#x5982;&#x4E91;&#xFF1B;&#x5343;&#x91CC;&#x9022;&#x8FCE;&#xFF0C;&#x9AD8;&#x670B;&#x6EE1;&#x5EA7;&#x3002;&#x817E;&#x86DF;&#x8D77;&#x51E4;&#xFF0C;&#x5B5F;&#x5B66;&#x58EB;&#x4E4B;&#x8BCD;&#x5B97;&#xFF1B;&#x7D2B;&#x7535;&#x9752;&#x971C;&#xFF0C;&#x738B;&#x5C06;&#x519B;&#x4E4B;&#x6B66;&#x5E93;&#x3002;&#x5BB6;&#x541B;&#x4F5C;&#x5BB0;&#xFF0C;&#x8DEF;&#x51FA;&#x540D;&#x533A;&#xFF1B;&#x7AE5;&#x5B50;&#x4F55;&#x77E5;&#xFF0C;&#x8EAC;&#x9022;&#x80DC;&#x996F;&#x3002;"></a>&#x8C6B;&#x7AE0;&#x6545;&#x90E1;&#xFF0C;&#x6D2A;&#x90FD;&#x65B0;&#x5E9C;&#x3002;&#x661F;&#x5206;&#x7FFC;&#x8F78;&#xFF0C;&#x5730;&#x63A5;&#x8861;&#x5E90;&#x3002;&#x895F;&#x4E09;&#x6C5F;&#x800C;&#x5E26;&#x4E94;&#x6E56;&#xFF0C;&#x63A7;&#x86EE;&#x8346;&#x800C;&#x5F15;&#x74EF;&#x8D8A;&#x3002;&#x7269;&#x534E;&#x5929;&#x5B9D;&#xFF0C;&#x9F99;&#x5149;&#x5C04;&#x725B;&#x6597;&#x4E4B;&#x589F;&#xFF1B;&#x4EBA;&#x6770;&#x5730;&#x7075;&#xFF0C;&#x5F90;&#x5B7A;&#x4E0B;&#x9648;&#x8543;&#x4E4B;&#x69BB;&#x3002;&#x96C4;&#x5DDE;&#x96FE;&#x5217;&#xFF0C;&#x4FCA;&#x91C7;&#x661F;&#x9A70;&#x3002;&#x53F0;&#x968D;&#x6795;&#x5937;&#x590F;&#x4E4B;&#x4EA4;&#xFF0C;&#x5BBE;&#x4E3B;&#x5C3D;&#x4E1C;&#x5357;&#x4E4B;&#x7F8E;&#x3002;&#x90FD;&#x7763;&#x960E;&#x516C;&#x4E4B;&#x96C5;&#x671B;&#xFF0C;&#x68E8;&#x621F;&#x9065;&#x4E34;&#xFF1B;&#x5B87;&#x6587;&#x65B0;&#x5DDE;&#x4E4B;&#x61FF;&#x8303;&#xFF0C;&#x895C;&#x5E37;&#x6682;&#x9A7B;&#x3002;&#x5341;&#x65EC;&#x4F11;&#x5047;&#xFF0C;&#x80DC;&#x53CB;&#x5982;&#x4E91;&#xFF1B;&#x5343;&#x91CC;&#x9022;&#x8FCE;&#xFF0C;&#x9AD8;&#x670B;&#x6EE1;&#x5EA7;&#x3002;&#x817E;&#x86DF;&#x8D77;&#x51E4;&#xFF0C;&#x5B5F;&#x5B66;&#x58EB;&#x4E4B;&#x8BCD;&#x5B97;&#xFF1B;&#x7D2B;&#x7535;&#x9752;&#x971C;&#xFF0C;&#x738B;&#x5C06;&#x519B;&#x4E4B;&#x6B66;&#x5E93;&#x3002;&#x5BB6;&#x541B;&#x4F5C;&#x5BB0;&#xFF0C;&#x8DEF;&#x51FA;&#x540D;&#x533A;&#xFF1B;&#x7AE5;&#x5B50;&#x4F55;&#x77E5;&#xFF0C;&#x8EAC;&#x9022;&#x80DC;&#x996F;&#x3002;</h4><h4 id="&#x65F6;&#x7EF4;&#x4E5D;&#x6708;&#xFF0C;&#x5E8F;&#x5C5E;&#x4E09;&#x79CB;&#x3002;&#x6F66;&#x6C34;&#x5C3D;&#x800C;&#x5BD2;&#x6F6D;&#x6E05;&#xFF0C;&#x70DF;&#x5149;&#x51DD;&#x800C;&#x66AE;&#x5C71;&#x7D2B;&#x3002;&#x4FE8;&#x9A96;&#x9A11;&#x4E8E;&#x4E0A;&#x8DEF;&#xFF0C;&#x8BBF;&#x98CE;&#x666F;&#x4E8E;&#x5D07;&#x963F;&#x3002;&#x4E34;&#x5E1D;&#x5B50;&#x4E4B;&#x957F;&#x6D32;&#xFF0C;&#x5F97;&#x5929;&#x4EBA;&#x4E4B;&#x65E7;&#x9986;&#x3002;&#x5C42;&#x5CE6;&#x8038;&#x7FE0;&#xFF0C;&#x4E0A;&#x51FA;&#x91CD;&#x9704;&#xFF1B;&#x98DE;&#x9601;&#x6D41;&#x4E39;&#xFF0C;&#x4E0B;&#x4E34;&#x65E0;&#x5730;&#x3002;&#x9E64;&#x6C40;&#x51EB;&#x6E1A;&#xFF0C;&#x7A77;&#x5C9B;&#x5C7F;&#x4E4B;&#x8426;&#x56DE;&#xFF1B;&#x6842;&#x6BBF;&#x5170;&#x5BAB;&#xFF0C;&#x5373;&#x5188;&#x5CE6;&#x4E4B;&#x4F53;&#x52BF;&#x3002;"><a href="#&#x65F6;&#x7EF4;&#x4E5D;&#x6708;&#xFF0C;&#x5E8F;&#x5C5E;&#x4E09;&#x79CB;&#x3002;&#x6F66;&#x6C34;&#x5C3D;&#x800C;&#x5BD2;&#x6F6D;&#x6E05;&#xFF0C;&#x70DF;&#x5149;&#x51DD;&#x800C;&#x66AE;&#x5C71;&#x7D2B;&#x3002;&#x4FE8;&#x9A96;&#x9A11;&#x4E8E;&#x4E0A;&#x8DEF;&#xFF0C;&#x8BBF;&#x98CE;&#x666F;&#x4E8E;&#x5D07;&#x963F;&#x3002;&#x4E34;&#x5E1D;&#x5B50;&#x4E4B;&#x957F;&#x6D32;&#xFF0C;&#x5F97;&#x5929;&#x4EBA;&#x4E4B;&#x65E7;&#x9986;&#x3002;&#x5C42;&#x5CE6;&#x8038;&#x7FE0;&#xFF0C;&#x4E0A;&#x51FA;&#x91CD;&#x9704;&#xFF1B;&#x98DE;&#x9601;&#x6D41;&#x4E39;&#xFF0C;&#x4E0B;&#x4E34;&#x65E0;&#x5730;&#x3002;&#x9E64;&#x6C40;&#x51EB;&#x6E1A;&#xFF0C;&#x7A77;&#x5C9B;&#x5C7F;&#x4E4B;&#x8426;&#x56DE;&#xFF1B;&#x6842;&#x6BBF;&#x5170;&#x5BAB;&#xFF0C;&#x5373;&#x5188;&#x5CE6;&#x4E4B;&#x4F53;&#x52BF;&#x3002;" class="headerlink" title="&#x65F6;&#x7EF4;&#x4E5D;&#x6708;&#xFF0C;&#x5E8F;&#x5C5E;&#x4E09;&#x79CB;&#x3002;&#x6F66;&#x6C34;&#x5C3D;&#x800C;&#x5BD2;&#x6F6D;&#x6E05;&#xFF0C;&#x70DF;&#x5149;&#x51DD;&#x800C;&#x66AE;&#x5C71;&#x7D2B;&#x3002;&#x4FE8;&#x9A96;&#x9A11;&#x4E8E;&#x4E0A;&#x8DEF;&#xFF0C;&#x8BBF;&#x98CE;&#x666F;&#x4E8E;&#x5D07;&#x963F;&#x3002;&#x4E34;&#x5E1D;&#x5B50;&#x4E4B;&#x957F;&#x6D32;&#xFF0C;&#x5F97;&#x5929;&#x4EBA;&#x4E4B;&#x65E7;&#x9986;&#x3002;&#x5C42;&#x5CE6;&#x8038;&#x7FE0;&#xFF0C;&#x4E0A;&#x51FA;&#x91CD;&#x9704;&#xFF1B;&#x98DE;&#x9601;&#x6D41;&#x4E39;&#xFF0C;&#x4E0B;&#x4E34;&#x65E0;&#x5730;&#x3002;&#x9E64;&#x6C40;&#x51EB;&#x6E1A;&#xFF0C;&#x7A77;&#x5C9B;&#x5C7F;&#x4E4B;&#x8426;&#x56DE;&#xFF1B;&#x6842;&#x6BBF;&#x5170;&#x5BAB;&#xFF0C;&#x5373;&#x5188;&#x5CE6;&#x4E4B;&#x4F53;&#x52BF;&#x3002;"></a>&#x65F6;&#x7EF4;&#x4E5D;&#x6708;&#xFF0C;&#x5E8F;&#x5C5E;&#x4E09;&#x79CB;&#x3002;&#x6F66;&#x6C34;&#x5C3D;&#x800C;&#x5BD2;&#x6F6D;&#x6E05;&#xFF0C;&#x70DF;&#x5149;&#x51DD;&#x800C;&#x66AE;&#x5C71;&#x7D2B;&#x3002;&#x4FE8;&#x9A96;&#x9A11;&#x4E8E;&#x4E0A;&#x8DEF;&#xFF0C;&#x8BBF;&#x98CE;&#x666F;&#x4E8E;&#x5D07;&#x963F;&#x3002;&#x4E34;&#x5E1D;&#x5B50;&#x4E4B;&#x957F;&#x6D32;&#xFF0C;&#x5F97;&#x5929;&#x4EBA;&#x4E4B;&#x65E7;&#x9986;&#x3002;&#x5C42;&#x5CE6;&#x8038;&#x7FE0;&#xFF0C;&#x4E0A;&#x51FA;&#x91CD;&#x9704;&#xFF1B;&#x98DE;&#x9601;&#x6D41;&#x4E39;&#xFF0C;&#x4E0B;&#x4E34;&#x65E0;&#x5730;&#x3002;&#x9E64;&#x6C40;&#x51EB;&#x6E1A;&#xFF0C;&#x7A77;&#x5C9B;&#x5C7F;&#x4E4B;&#x8426;&#x56DE;&#xFF1B;&#x6842;&#x6BBF;&#x5170;&#x5BAB;&#xFF0C;&#x5373;&#x5188;&#x5CE6;&#x4E4B;&#x4F53;&#x52BF;&#x3002;</h4><h4 id="&#x62AB;&#x7EE3;&#x95FC;&#xFF0C;&#x4FEF;&#x96D5;&#x750D;&#xFF0C;&#x5C71;&#x539F;&#x65F7;&#x5176;&#x76C8;&#x89C6;&#xFF0C;&#x5DDD;&#x6CFD;&#x7EA1;&#x5176;&#x9A87;&#x77A9;&#x3002;&#x95FE;&#x960E;&#x6251;&#x5730;&#xFF0C;&#x949F;&#x9E23;&#x9F0E;&#x98DF;&#x4E4B;&#x5BB6;&#xFF1B;&#x8238;&#x8230;&#x5F25;&#x6D25;&#xFF0C;&#x9752;&#x96C0;&#x9EC4;&#x9F99;&#x4E4B;&#x8233;&#x3002;&#x4E91;&#x9500;&#x96E8;&#x9701;&#xFF0C;&#x5F69;&#x5F7B;&#x533A;&#x660E;&#x3002;&#x843D;&#x971E;&#x4E0E;&#x5B64;&#x9E5C;&#x9F50;&#x98DE;&#xFF0C;&#x79CB;&#x6C34;&#x5171;&#x957F;&#x5929;&#x4E00;&#x8272;&#x3002;&#x6E14;&#x821F;&#x5531;&#x665A;&#xFF0C;&#x54CD;&#x7A77;&#x5F6D;&#x8821;&#x4E4B;&#x6EE8;&#xFF0C;&#x96C1;&#x9635;&#x60CA;&#x5BD2;&#xFF0C;&#x58F0;&#x65AD;&#x8861;&#x9633;&#x4E4B;&#x6D66;&#x3002;"><a href="#&#x62AB;&#x7EE3;&#x95FC;&#xFF0C;&#x4FEF;&#x96D5;&#x750D;&#xFF0C;&#x5C71;&#x539F;&#x65F7;&#x5176;&#x76C8;&#x89C6;&#xFF0C;&#x5DDD;&#x6CFD;&#x7EA1;&#x5176;&#x9A87;&#x77A9;&#x3002;&#x95FE;&#x960E;&#x6251;&#x5730;&#xFF0C;&#x949F;&#x9E23;&#x9F0E;&#x98DF;&#x4E4B;&#x5BB6;&#xFF1B;&#x8238;&#x8230;&#x5F25;&#x6D25;&#xFF0C;&#x9752;&#x96C0;&#x9EC4;&#x9F99;&#x4E4B;&#x8233;&#x3002;&#x4E91;&#x9500;&#x96E8;&#x9701;&#xFF0C;&#x5F69;&#x5F7B;&#x533A;&#x660E;&#x3002;&#x843D;&#x971E;&#x4E0E;&#x5B64;&#x9E5C;&#x9F50;&#x98DE;&#xFF0C;&#x79CB;&#x6C34;&#x5171;&#x957F;&#x5929;&#x4E00;&#x8272;&#x3002;&#x6E14;&#x821F;&#x5531;&#x665A;&#xFF0C;&#x54CD;&#x7A77;&#x5F6D;&#x8821;&#x4E4B;&#x6EE8;&#xFF0C;&#x96C1;&#x9635;&#x60CA;&#x5BD2;&#xFF0C;&#x58F0;&#x65AD;&#x8861;&#x9633;&#x4E4B;&#x6D66;&#x3002;" class="headerlink" title="&#x62AB;&#x7EE3;&#x95FC;&#xFF0C;&#x4FEF;&#x96D5;&#x750D;&#xFF0C;&#x5C71;&#x539F;&#x65F7;&#x5176;&#x76C8;&#x89C6;&#xFF0C;&#x5DDD;&#x6CFD;&#x7EA1;&#x5176;&#x9A87;&#x77A9;&#x3002;&#x95FE;&#x960E;&#x6251;&#x5730;&#xFF0C;&#x949F;&#x9E23;&#x9F0E;&#x98DF;&#x4E4B;&#x5BB6;&#xFF1B;&#x8238;&#x8230;&#x5F25;&#x6D25;&#xFF0C;&#x9752;&#x96C0;&#x9EC4;&#x9F99;&#x4E4B;&#x8233;&#x3002;&#x4E91;&#x9500;&#x96E8;&#x9701;&#xFF0C;&#x5F69;&#x5F7B;&#x533A;&#x660E;&#x3002;&#x843D;&#x971E;&#x4E0E;&#x5B64;&#x9E5C;&#x9F50;&#x98DE;&#xFF0C;&#x79CB;&#x6C34;&#x5171;&#x957F;&#x5929;&#x4E00;&#x8272;&#x3002;&#x6E14;&#x821F;&#x5531;&#x665A;&#xFF0C;&#x54CD;&#x7A77;&#x5F6D;&#x8821;&#x4E4B;&#x6EE8;&#xFF0C;&#x96C1;&#x9635;&#x60CA;&#x5BD2;&#xFF0C;&#x58F0;&#x65AD;&#x8861;&#x9633;&#x4E4B;&#x6D66;&#x3002;"></a>&#x62AB;&#x7EE3;&#x95FC;&#xFF0C;&#x4FEF;&#x96D5;&#x750D;&#xFF0C;&#x5C71;&#x539F;&#x65F7;&#x5176;&#x76C8;&#x89C6;&#xFF0C;&#x5DDD;&#x6CFD;&#x7EA1;&#x5176;&#x9A87;&#x77A9;&#x3002;&#x95FE;&#x960E;&#x6251;&#x5730;&#xFF0C;&#x949F;&#x9E23;&#x9F0E;&#x98DF;&#x4E4B;&#x5BB6;&#xFF1B;&#x8238;&#x8230;&#x5F25;&#x6D25;&#xFF0C;&#x9752;&#x96C0;&#x9EC4;&#x9F99;&#x4E4B;&#x8233;&#x3002;&#x4E91;&#x9500;&#x96E8;&#x9701;&#xFF0C;&#x5F69;&#x5F7B;&#x533A;&#x660E;&#x3002;&#x843D;&#x971E;&#x4E0E;&#x5B64;&#x9E5C;&#x9F50;&#x98DE;&#xFF0C;&#x79CB;&#x6C34;&#x5171;&#x957F;&#x5929;&#x4E00;&#x8272;&#x3002;&#x6E14;&#x821F;&#x5531;&#x665A;&#xFF0C;&#x54CD;&#x7A77;&#x5F6D;&#x8821;&#x4E4B;&#x6EE8;&#xFF0C;&#x96C1;&#x9635;&#x60CA;&#x5BD2;&#xFF0C;&#x58F0;&#x65AD;&#x8861;&#x9633;&#x4E4B;&#x6D66;&#x3002;</h4><h4 id="&#x9065;&#x895F;&#x752B;&#x7545;&#xFF0C;&#x9038;&#x5174;&#x9044;&#x98DE;&#x3002;&#x723D;&#x7C41;&#x53D1;&#x800C;&#x6E05;&#x98CE;&#x751F;&#xFF0C;&#x7EA4;&#x6B4C;&#x51DD;&#x800C;&#x767D;&#x4E91;&#x904F;&#x3002;&#x7762;&#x56ED;&#x7EFF;&#x7AF9;&#xFF0C;&#x6C14;&#x51CC;&#x5F6D;&#x6CFD;&#x4E4B;&#x6A3D;&#xFF1B;&#x90BA;&#x6C34;&#x6731;&#x534E;&#xFF0C;&#x5149;&#x7167;&#x4E34;&#x5DDD;&#x4E4B;&#x7B14;&#x3002;&#x56DB;&#x7F8E;&#x5177;&#xFF0C;&#x4E8C;&#x96BE;&#x5E76;&#x3002;&#x7A77;&#x7747;&#x7704;&#x4E8E;&#x4E2D;&#x5929;&#xFF0C;&#x6781;&#x5A31;&#x6E38;&#x4E8E;&#x6687;&#x65E5;&#x3002;&#x5929;&#x9AD8;&#x5730;&#x8FE5;&#xFF0C;&#x89C9;&#x5B87;&#x5B99;&#x4E4B;&#x65E0;&#x7A77;&#xFF1B;&#x5174;&#x5C3D;&#x60B2;&#x6765;&#xFF0C;&#x8BC6;&#x76C8;&#x865A;&#x4E4B;&#x6709;&#x6570;&#x3002;&#x671B;&#x957F;&#x5B89;&#x4E8E;&#x65E5;&#x4E0B;&#xFF0C;&#x76EE;&#x5434;&#x4F1A;&#x4E8E;&#x4E91;&#x95F4;&#x3002;&#x5730;&#x52BF;&#x6781;&#x800C;&#x5357;&#x6E9F;&#x6DF1;&#xFF0C;&#x5929;&#x67F1;&#x9AD8;&#x800C;&#x5317;&#x8FB0;&#x8FDC;&#x3002;&#x5173;&#x5C71;&#x96BE;&#x8D8A;&#xFF0C;&#x8C01;&#x60B2;&#x5931;&#x8DEF;&#x4E4B;&#x4EBA;&#xFF1B;&#x840D;&#x6C34;&#x76F8;&#x9022;&#xFF0C;&#x5C3D;&#x662F;&#x4ED6;&#x4E61;&#x4E4B;&#x5BA2;&#x3002;&#x6000;&#x5E1D;&#x960D;&#x800C;&#x4E0D;&#x89C1;&#xFF0C;&#x5949;&#x5BA3;&#x5BA4;&#x4EE5;&#x4F55;&#x5E74;&#xFF1F;"><a href="#&#x9065;&#x895F;&#x752B;&#x7545;&#xFF0C;&#x9038;&#x5174;&#x9044;&#x98DE;&#x3002;&#x723D;&#x7C41;&#x53D1;&#x800C;&#x6E05;&#x98CE;&#x751F;&#xFF0C;&#x7EA4;&#x6B4C;&#x51DD;&#x800C;&#x767D;&#x4E91;&#x904F;&#x3002;&#x7762;&#x56ED;&#x7EFF;&#x7AF9;&#xFF0C;&#x6C14;&#x51CC;&#x5F6D;&#x6CFD;&#x4E4B;&#x6A3D;&#xFF1B;&#x90BA;&#x6C34;&#x6731;&#x534E;&#xFF0C;&#x5149;&#x7167;&#x4E34;&#x5DDD;&#x4E4B;&#x7B14;&#x3002;&#x56DB;&#x7F8E;&#x5177;&#xFF0C;&#x4E8C;&#x96BE;&#x5E76;&#x3002;&#x7A77;&#x7747;&#x7704;&#x4E8E;&#x4E2D;&#x5929;&#xFF0C;&#x6781;&#x5A31;&#x6E38;&#x4E8E;&#x6687;&#x65E5;&#x3002;&#x5929;&#x9AD8;&#x5730;&#x8FE5;&#xFF0C;&#x89C9;&#x5B87;&#x5B99;&#x4E4B;&#x65E0;&#x7A77;&#xFF1B;&#x5174;&#x5C3D;&#x60B2;&#x6765;&#xFF0C;&#x8BC6;&#x76C8;&#x865A;&#x4E4B;&#x6709;&#x6570;&#x3002;&#x671B;&#x957F;&#x5B89;&#x4E8E;&#x65E5;&#x4E0B;&#xFF0C;&#x76EE;&#x5434;&#x4F1A;&#x4E8E;&#x4E91;&#x95F4;&#x3002;&#x5730;&#x52BF;&#x6781;&#x800C;&#x5357;&#x6E9F;&#x6DF1;&#xFF0C;&#x5929;&#x67F1;&#x9AD8;&#x800C;&#x5317;&#x8FB0;&#x8FDC;&#x3002;&#x5173;&#x5C71;&#x96BE;&#x8D8A;&#xFF0C;&#x8C01;&#x60B2;&#x5931;&#x8DEF;&#x4E4B;&#x4EBA;&#xFF1B;&#x840D;&#x6C34;&#x76F8;&#x9022;&#xFF0C;&#x5C3D;&#x662F;&#x4ED6;&#x4E61;&#x4E4B;&#x5BA2;&#x3002;&#x6000;&#x5E1D;&#x960D;&#x800C;&#x4E0D;&#x89C1;&#xFF0C;&#x5949;&#x5BA3;&#x5BA4;&#x4EE5;&#x4F55;&#x5E74;&#xFF1F;" class="headerlink" title="&#x9065;&#x895F;&#x752B;&#x7545;&#xFF0C;&#x9038;&#x5174;&#x9044;&#x98DE;&#x3002;&#x723D;&#x7C41;&#x53D1;&#x800C;&#x6E05;&#x98CE;&#x751F;&#xFF0C;&#x7EA4;&#x6B4C;&#x51DD;&#x800C;&#x767D;&#x4E91;&#x904F;&#x3002;&#x7762;&#x56ED;&#x7EFF;&#x7AF9;&#xFF0C;&#x6C14;&#x51CC;&#x5F6D;&#x6CFD;&#x4E4B;&#x6A3D;&#xFF1B;&#x90BA;&#x6C34;&#x6731;&#x534E;&#xFF0C;&#x5149;&#x7167;&#x4E34;&#x5DDD;&#x4E4B;&#x7B14;&#x3002;&#x56DB;&#x7F8E;&#x5177;&#xFF0C;&#x4E8C;&#x96BE;&#x5E76;&#x3002;&#x7A77;&#x7747;&#x7704;&#x4E8E;&#x4E2D;&#x5929;&#xFF0C;&#x6781;&#x5A31;&#x6E38;&#x4E8E;&#x6687;&#x65E5;&#x3002;&#x5929;&#x9AD8;&#x5730;&#x8FE5;&#xFF0C;&#x89C9;&#x5B87;&#x5B99;&#x4E4B;&#x65E0;&#x7A77;&#xFF1B;&#x5174;&#x5C3D;&#x60B2;&#x6765;&#xFF0C;&#x8BC6;&#x76C8;&#x865A;&#x4E4B;&#x6709;&#x6570;&#x3002;&#x671B;&#x957F;&#x5B89;&#x4E8E;&#x65E5;&#x4E0B;&#xFF0C;&#x76EE;&#x5434;&#x4F1A;&#x4E8E;&#x4E91;&#x95F4;&#x3002;&#x5730;&#x52BF;&#x6781;&#x800C;&#x5357;&#x6E9F;&#x6DF1;&#xFF0C;&#x5929;&#x67F1;&#x9AD8;&#x800C;&#x5317;&#x8FB0;&#x8FDC;&#x3002;&#x5173;&#x5C71;&#x96BE;&#x8D8A;&#xFF0C;&#x8C01;&#x60B2;&#x5931;&#x8DEF;&#x4E4B;&#x4EBA;&#xFF1B;&#x840D;&#x6C34;&#x76F8;&#x9022;&#xFF0C;&#x5C3D;&#x662F;&#x4ED6;&#x4E61;&#x4E4B;&#x5BA2;&#x3002;&#x6000;&#x5E1D;&#x960D;&#x800C;&#x4E0D;&#x89C1;&#xFF0C;&#x5949;&#x5BA3;&#x5BA4;&#x4EE5;&#x4F55;&#x5E74;&#xFF1F;"></a>&#x9065;&#x895F;&#x752B;&#x7545;&#xFF0C;&#x9038;&#x5174;&#x9044;&#x98DE;&#x3002;&#x723D;&#x7C41;&#x53D1;&#x800C;&#x6E05;&#x98CE;&#x751F;&#xFF0C;&#x7EA4;&#x6B4C;&#x51DD;&#x800C;&#x767D;&#x4E91;&#x904F;&#x3002;&#x7762;&#x56ED;&#x7EFF;&#x7AF9;&#xFF0C;&#x6C14;&#x51CC;&#x5F6D;&#x6CFD;&#x4E4B;&#x6A3D;&#xFF1B;&#x90BA;&#x6C34;&#x6731;&#x534E;&#xFF0C;&#x5149;&#x7167;&#x4E34;&#x5DDD;&#x4E4B;&#x7B14;&#x3002;&#x56DB;&#x7F8E;&#x5177;&#xFF0C;&#x4E8C;&#x96BE;&#x5E76;&#x3002;&#x7A77;&#x7747;&#x7704;&#x4E8E;&#x4E2D;&#x5929;&#xFF0C;&#x6781;&#x5A31;&#x6E38;&#x4E8E;&#x6687;&#x65E5;&#x3002;&#x5929;&#x9AD8;&#x5730;&#x8FE5;&#xFF0C;&#x89C9;&#x5B87;&#x5B99;&#x4E4B;&#x65E0;&#x7A77;&#xFF1B;&#x5174;&#x5C3D;&#x60B2;&#x6765;&#xFF0C;&#x8BC6;&#x76C8;&#x865A;&#x4E4B;&#x6709;&#x6570;&#x3002;&#x671B;&#x957F;&#x5B89;&#x4E8E;&#x65E5;&#x4E0B;&#xFF0C;&#x76EE;&#x5434;&#x4F1A;&#x4E8E;&#x4E91;&#x95F4;&#x3002;&#x5730;&#x52BF;&#x6781;&#x800C;&#x5357;&#x6E9F;&#x6DF1;&#xFF0C;&#x5929;&#x67F1;&#x9AD8;&#x800C;&#x5317;&#x8FB0;&#x8FDC;&#x3002;&#x5173;&#x5C71;&#x96BE;&#x8D8A;&#xFF0C;&#x8C01;&#x60B2;&#x5931;&#x8DEF;&#x4E4B;&#x4EBA;&#xFF1B;&#x840D;&#x6C34;&#x76F8;&#x9022;&#xFF0C;&#x5C3D;&#x662F;&#x4ED6;&#x4E61;&#x4E4B;&#x5BA2;&#x3002;&#x6000;&#x5E1D;&#x960D;&#x800C;&#x4E0D;&#x89C1;&#xFF0C;&#x5949;&#x5BA3;&#x5BA4;&#x4EE5;&#x4F55;&#x5E74;&#xFF1F;</h4><h4 id="&#x55DF;&#x4E4E;&#xFF01;&#x65F6;&#x8FD0;&#x4E0D;&#x9F50;&#xFF0C;&#x547D;&#x9014;&#x591A;&#x821B;&#x3002;&#x51AF;&#x5510;&#x6613;&#x8001;&#xFF0C;&#x674E;&#x5E7F;&#x96BE;&#x5C01;&#x3002;&#x5C48;&#x8D3E;&#x8C0A;&#x4E8E;&#x957F;&#x6C99;&#xFF0C;&#x975E;&#x65E0;&#x5723;&#x4E3B;&#xFF1B;&#x7A9C;&#x6881;&#x9E3F;&#x4E8E;&#x6D77;&#x66F2;&#xFF0C;&#x5C82;&#x4E4F;&#x660E;&#x65F6;&#xFF1F;&#x6240;&#x8D56;&#x541B;&#x5B50;&#x89C1;&#x673A;&#xFF0C;&#x8FBE;&#x4EBA;&#x77E5;&#x547D;&#x3002;&#x8001;&#x5F53;&#x76CA;&#x58EE;&#xFF0C;&#x5B81;&#x79FB;&#x767D;&#x9996;&#x4E4B;&#x5FC3;&#xFF1F;&#x7A77;&#x4E14;&#x76CA;&#x575A;&#xFF0C;&#x4E0D;&#x5760;&#x9752;&#x4E91;&#x4E4B;&#x5FD7;&#x3002;&#x914C;&#x8D2A;&#x6CC9;&#x800C;&#x89C9;&#x723D;&#xFF0C;&#x5904;&#x6DB8;&#x8F99;&#x4EE5;&#x72B9;&#x6B22;&#x3002;&#x5317;&#x6D77;&#x867D;&#x8D4A;&#xFF0C;&#x6276;&#x6447;&#x53EF;&#x63A5;&#xFF1B;&#x4E1C;&#x9685;&#x5DF2;&#x901D;&#xFF0C;&#x6851;&#x6986;&#x975E;&#x665A;&#x3002;&#x5B5F;&#x5C1D;&#x9AD8;&#x6D01;&#xFF0C;&#x7A7A;&#x4F59;&#x62A5;&#x56FD;&#x4E4B;&#x60C5;&#xFF1B;&#x962E;&#x7C4D;&#x7316;&#x72C2;&#xFF0C;&#x5C82;&#x6548;&#x7A77;&#x9014;&#x4E4B;&#x54ED;&#xFF01;"><a href="#&#x55DF;&#x4E4E;&#xFF01;&#x65F6;&#x8FD0;&#x4E0D;&#x9F50;&#xFF0C;&#x547D;&#x9014;&#x591A;&#x821B;&#x3002;&#x51AF;&#x5510;&#x6613;&#x8001;&#xFF0C;&#x674E;&#x5E7F;&#x96BE;&#x5C01;&#x3002;&#x5C48;&#x8D3E;&#x8C0A;&#x4E8E;&#x957F;&#x6C99;&#xFF0C;&#x975E;&#x65E0;&#x5723;&#x4E3B;&#xFF1B;&#x7A9C;&#x6881;&#x9E3F;&#x4E8E;&#x6D77;&#x66F2;&#xFF0C;&#x5C82;&#x4E4F;&#x660E;&#x65F6;&#xFF1F;&#x6240;&#x8D56;&#x541B;&#x5B50;&#x89C1;&#x673A;&#xFF0C;&#x8FBE;&#x4EBA;&#x77E5;&#x547D;&#x3002;&#x8001;&#x5F53;&#x76CA;&#x58EE;&#xFF0C;&#x5B81;&#x79FB;&#x767D;&#x9996;&#x4E4B;&#x5FC3;&#xFF1F;&#x7A77;&#x4E14;&#x76CA;&#x575A;&#xFF0C;&#x4E0D;&#x5760;&#x9752;&#x4E91;&#x4E4B;&#x5FD7;&#x3002;&#x914C;&#x8D2A;&#x6CC9;&#x800C;&#x89C9;&#x723D;&#xFF0C;&#x5904;&#x6DB8;&#x8F99;&#x4EE5;&#x72B9;&#x6B22;&#x3002;&#x5317;&#x6D77;&#x867D;&#x8D4A;&#xFF0C;&#x6276;&#x6447;&#x53EF;&#x63A5;&#xFF1B;&#x4E1C;&#x9685;&#x5DF2;&#x901D;&#xFF0C;&#x6851;&#x6986;&#x975E;&#x665A;&#x3002;&#x5B5F;&#x5C1D;&#x9AD8;&#x6D01;&#xFF0C;&#x7A7A;&#x4F59;&#x62A5;&#x56FD;&#x4E4B;&#x60C5;&#xFF1B;&#x962E;&#x7C4D;&#x7316;&#x72C2;&#xFF0C;&#x5C82;&#x6548;&#x7A77;&#x9014;&#x4E4B;&#x54ED;&#xFF01;" class="headerlink" title="&#x55DF;&#x4E4E;&#xFF01;&#x65F6;&#x8FD0;&#x4E0D;&#x9F50;&#xFF0C;&#x547D;&#x9014;&#x591A;&#x821B;&#x3002;&#x51AF;&#x5510;&#x6613;&#x8001;&#xFF0C;&#x674E;&#x5E7F;&#x96BE;&#x5C01;&#x3002;&#x5C48;&#x8D3E;&#x8C0A;&#x4E8E;&#x957F;&#x6C99;&#xFF0C;&#x975E;&#x65E0;&#x5723;&#x4E3B;&#xFF1B;&#x7A9C;&#x6881;&#x9E3F;&#x4E8E;&#x6D77;&#x66F2;&#xFF0C;&#x5C82;&#x4E4F;&#x660E;&#x65F6;&#xFF1F;&#x6240;&#x8D56;&#x541B;&#x5B50;&#x89C1;&#x673A;&#xFF0C;&#x8FBE;&#x4EBA;&#x77E5;&#x547D;&#x3002;&#x8001;&#x5F53;&#x76CA;&#x58EE;&#xFF0C;&#x5B81;&#x79FB;&#x767D;&#x9996;&#x4E4B;&#x5FC3;&#xFF1F;&#x7A77;&#x4E14;&#x76CA;&#x575A;&#xFF0C;&#x4E0D;&#x5760;&#x9752;&#x4E91;&#x4E4B;&#x5FD7;&#x3002;&#x914C;&#x8D2A;&#x6CC9;&#x800C;&#x89C9;&#x723D;&#xFF0C;&#x5904;&#x6DB8;&#x8F99;&#x4EE5;&#x72B9;&#x6B22;&#x3002;&#x5317;&#x6D77;&#x867D;&#x8D4A;&#xFF0C;&#x6276;&#x6447;&#x53EF;&#x63A5;&#xFF1B;&#x4E1C;&#x9685;&#x5DF2;&#x901D;&#xFF0C;&#x6851;&#x6986;&#x975E;&#x665A;&#x3002;&#x5B5F;&#x5C1D;&#x9AD8;&#x6D01;&#xFF0C;&#x7A7A;&#x4F59;&#x62A5;&#x56FD;&#x4E4B;&#x60C5;&#xFF1B;&#x962E;&#x7C4D;&#x7316;&#x72C2;&#xFF0C;&#x5C82;&#x6548;&#x7A77;&#x9014;&#x4E4B;&#x54ED;&#xFF01;"></a>&#x55DF;&#x4E4E;&#xFF01;&#x65F6;&#x8FD0;&#x4E0D;&#x9F50;&#xFF0C;&#x547D;&#x9014;&#x591A;&#x821B;&#x3002;&#x51AF;&#x5510;&#x6613;&#x8001;&#xFF0C;&#x674E;&#x5E7F;&#x96BE;&#x5C01;&#x3002;&#x5C48;&#x8D3E;&#x8C0A;&#x4E8E;&#x957F;&#x6C99;&#xFF0C;&#x975E;&#x65E0;&#x5723;&#x4E3B;&#xFF1B;&#x7A9C;&#x6881;&#x9E3F;&#x4E8E;&#x6D77;&#x66F2;&#xFF0C;&#x5C82;&#x4E4F;&#x660E;&#x65F6;&#xFF1F;&#x6240;&#x8D56;&#x541B;&#x5B50;&#x89C1;&#x673A;&#xFF0C;&#x8FBE;&#x4EBA;&#x77E5;&#x547D;&#x3002;&#x8001;&#x5F53;&#x76CA;&#x58EE;&#xFF0C;&#x5B81;&#x79FB;&#x767D;&#x9996;&#x4E4B;&#x5FC3;&#xFF1F;&#x7A77;&#x4E14;&#x76CA;&#x575A;&#xFF0C;&#x4E0D;&#x5760;&#x9752;&#x4E91;&#x4E4B;&#x5FD7;&#x3002;&#x914C;&#x8D2A;&#x6CC9;&#x800C;&#x89C9;&#x723D;&#xFF0C;&#x5904;&#x6DB8;&#x8F99;&#x4EE5;&#x72B9;&#x6B22;&#x3002;&#x5317;&#x6D77;&#x867D;&#x8D4A;&#xFF0C;&#x6276;&#x6447;&#x53EF;&#x63A5;&#xFF1B;&#x4E1C;&#x9685;&#x5DF2;&#x901D;&#xFF0C;&#x6851;&#x6986;&#x975E;&#x665A;&#x3002;&#x5B5F;&#x5C1D;&#x9AD8;&#x6D01;&#xFF0C;&#x7A7A;&#x4F59;&#x62A5;&#x56FD;&#x4E4B;&#x60C5;&#xFF1B;&#x962E;&#x7C4D;&#x7316;&#x72C2;&#xFF0C;&#x5C82;&#x6548;&#x7A77;&#x9014;&#x4E4B;&#x54ED;&#xFF01;</h4><h4 id="&#x52C3;&#xFF0C;&#x4E09;&#x5C3A;&#x5FAE;&#x547D;&#xFF0C;&#x4E00;&#x4ECB;&#x4E66;&#x751F;&#x3002;&#x65E0;&#x8DEF;&#x8BF7;&#x7F28;&#xFF0C;&#x7B49;&#x7EC8;&#x519B;&#x4E4B;&#x5F31;&#x51A0;&#xFF1B;&#x6709;&#x6000;&#x6295;&#x7B14;&#xFF0C;&#x6155;&#x5B97;&#x60AB;&#x4E4B;&#x957F;&#x98CE;&#x3002;&#x820D;&#x7C2A;&#x7B0F;&#x4E8E;&#x767E;&#x9F84;&#xFF0C;&#x5949;&#x6668;&#x660F;&#x4E8E;&#x4E07;&#x91CC;&#x3002;&#x975E;&#x8C22;&#x5BB6;&#x4E4B;&#x5B9D;&#x6811;&#xFF0C;&#x63A5;&#x5B5F;&#x6C0F;&#x4E4B;&#x82B3;&#x90BB;&#x3002;&#x4ED6;&#x65E5;&#x8D8B;&#x5EAD;&#xFF0C;&#x53E8;&#x966A;&#x9CA4;&#x5BF9;&#xFF1B;&#x4ECA;&#x5179;&#x6367;&#x8882;&#xFF0C;&#x559C;&#x6258;&#x9F99;&#x95E8;&#x3002;&#x6768;&#x610F;&#x4E0D;&#x9022;&#xFF0C;&#x629A;&#x51CC;&#x4E91;&#x800C;&#x81EA;&#x60DC;&#xFF1B;&#x949F;&#x671F;&#x65E2;&#x9047;&#xFF0C;&#x594F;&#x6D41;&#x6C34;&#x4EE5;&#x4F55;&#x60ED;&#xFF1F;"><a href="#&#x52C3;&#xFF0C;&#x4E09;&#x5C3A;&#x5FAE;&#x547D;&#xFF0C;&#x4E00;&#x4ECB;&#x4E66;&#x751F;&#x3002;&#x65E0;&#x8DEF;&#x8BF7;&#x7F28;&#xFF0C;&#x7B49;&#x7EC8;&#x519B;&#x4E4B;&#x5F31;&#x51A0;&#xFF1B;&#x6709;&#x6000;&#x6295;&#x7B14;&#xFF0C;&#x6155;&#x5B97;&#x60AB;&#x4E4B;&#x957F;&#x98CE;&#x3002;&#x820D;&#x7C2A;&#x7B0F;&#x4E8E;&#x767E;&#x9F84;&#xFF0C;&#x5949;&#x6668;&#x660F;&#x4E8E;&#x4E07;&#x91CC;&#x3002;&#x975E;&#x8C22;&#x5BB6;&#x4E4B;&#x5B9D;&#x6811;&#xFF0C;&#x63A5;&#x5B5F;&#x6C0F;&#x4E4B;&#x82B3;&#x90BB;&#x3002;&#x4ED6;&#x65E5;&#x8D8B;&#x5EAD;&#xFF0C;&#x53E8;&#x966A;&#x9CA4;&#x5BF9;&#xFF1B;&#x4ECA;&#x5179;&#x6367;&#x8882;&#xFF0C;&#x559C;&#x6258;&#x9F99;&#x95E8;&#x3002;&#x6768;&#x610F;&#x4E0D;&#x9022;&#xFF0C;&#x629A;&#x51CC;&#x4E91;&#x800C;&#x81EA;&#x60DC;&#xFF1B;&#x949F;&#x671F;&#x65E2;&#x9047;&#xFF0C;&#x594F;&#x6D41;&#x6C34;&#x4EE5;&#x4F55;&#x60ED;&#xFF1F;" class="headerlink" title="&#x52C3;&#xFF0C;&#x4E09;&#x5C3A;&#x5FAE;&#x547D;&#xFF0C;&#x4E00;&#x4ECB;&#x4E66;&#x751F;&#x3002;&#x65E0;&#x8DEF;&#x8BF7;&#x7F28;&#xFF0C;&#x7B49;&#x7EC8;&#x519B;&#x4E4B;&#x5F31;&#x51A0;&#xFF1B;&#x6709;&#x6000;&#x6295;&#x7B14;&#xFF0C;&#x6155;&#x5B97;&#x60AB;&#x4E4B;&#x957F;&#x98CE;&#x3002;&#x820D;&#x7C2A;&#x7B0F;&#x4E8E;&#x767E;&#x9F84;&#xFF0C;&#x5949;&#x6668;&#x660F;&#x4E8E;&#x4E07;&#x91CC;&#x3002;&#x975E;&#x8C22;&#x5BB6;&#x4E4B;&#x5B9D;&#x6811;&#xFF0C;&#x63A5;&#x5B5F;&#x6C0F;&#x4E4B;&#x82B3;&#x90BB;&#x3002;&#x4ED6;&#x65E5;&#x8D8B;&#x5EAD;&#xFF0C;&#x53E8;&#x966A;&#x9CA4;&#x5BF9;&#xFF1B;&#x4ECA;&#x5179;&#x6367;&#x8882;&#xFF0C;&#x559C;&#x6258;&#x9F99;&#x95E8;&#x3002;&#x6768;&#x610F;&#x4E0D;&#x9022;&#xFF0C;&#x629A;&#x51CC;&#x4E91;&#x800C;&#x81EA;&#x60DC;&#xFF1B;&#x949F;&#x671F;&#x65E2;&#x9047;&#xFF0C;&#x594F;&#x6D41;&#x6C34;&#x4EE5;&#x4F55;&#x60ED;&#xFF1F;"></a>&#x52C3;&#xFF0C;&#x4E09;&#x5C3A;&#x5FAE;&#x547D;&#xFF0C;&#x4E00;&#x4ECB;&#x4E66;&#x751F;&#x3002;&#x65E0;&#x8DEF;&#x8BF7;&#x7F28;&#xFF0C;&#x7B49;&#x7EC8;&#x519B;&#x4E4B;&#x5F31;&#x51A0;&#xFF1B;&#x6709;&#x6000;&#x6295;&#x7B14;&#xFF0C;&#x6155;&#x5B97;&#x60AB;&#x4E4B;&#x957F;&#x98CE;&#x3002;&#x820D;&#x7C2A;&#x7B0F;&#x4E8E;&#x767E;&#x9F84;&#xFF0C;&#x5949;&#x6668;&#x660F;&#x4E8E;&#x4E07;&#x91CC;&#x3002;&#x975E;&#x8C22;&#x5BB6;&#x4E4B;&#x5B9D;&#x6811;&#xFF0C;&#x63A5;&#x5B5F;&#x6C0F;&#x4E4B;&#x82B3;&#x90BB;&#x3002;&#x4ED6;&#x65E5;&#x8D8B;&#x5EAD;&#xFF0C;&#x53E8;&#x966A;&#x9CA4;&#x5BF9;&#xFF1B;&#x4ECA;&#x5179;&#x6367;&#x8882;&#xFF0C;&#x559C;&#x6258;&#x9F99;&#x95E8;&#x3002;&#x6768;&#x610F;&#x4E0D;&#x9022;&#xFF0C;&#x629A;&#x51CC;&#x4E91;&#x800C;&#x81EA;&#x60DC;&#xFF1B;&#x949F;&#x671F;&#x65E2;&#x9047;&#xFF0C;&#x594F;&#x6D41;&#x6C34;&#x4EE5;&#x4F55;&#x60ED;&#xFF1F;</h4><h4 id="&#x545C;&#x547C;&#xFF01;&#x80DC;&#x5730;&#x4E0D;&#x5E38;&#xFF0C;&#x76DB;&#x7B75;&#x96BE;&#x518D;&#xFF1B;&#x5170;&#x4EAD;&#x5DF2;&#x77E3;&#xFF0C;&#x6893;&#x6CFD;&#x4E18;&#x589F;&#x3002;"><a href="#&#x545C;&#x547C;&#xFF01;&#x80DC;&#x5730;&#x4E0D;&#x5E38;&#xFF0C;&#x76DB;&#x7B75;&#x96BE;&#x518D;&#xFF1B;&#x5170;&#x4EAD;&#x5DF2;&#x77E3;&#xFF0C;&#x6893;&#x6CFD;&#x4E18;&#x589F;&#x3002;" class="headerlink" title="&#x545C;&#x547C;&#xFF01;&#x80DC;&#x5730;&#x4E0D;&#x5E38;&#xFF0C;&#x76DB;&#x7B75;&#x96BE;&#x518D;&#xFF1B;&#x5170;&#x4EAD;&#x5DF2;&#x77E3;&#xFF0C;&#x6893;&#x6CFD;&#x4E18;&#x589F;&#x3002;"></a>&#x545C;&#x547C;&#xFF01;&#x80DC;&#x5730;&#x4E0D;&#x5E38;&#xFF0C;&#x76DB;&#x7B75;&#x96BE;&#x518D;&#xFF1B;&#x5170;&#x4EAD;&#x5DF2;&#x77E3;&#xFF0C;&#x6893;&#x6CFD;&#x4E18;&#x589F;&#x3002;</h4>]]></content>
      <categories>
        <category>诗句</category>
      </categories>
      <tags>
        <tag>poem</tag>
      </tags>
  </entry>
  <entry>
    <title>apfs-fuse mount apfsdisk</title>
    <url>/2025/02/21/apfs-fuse-mount-apfsdisk/</url>
    <content><![CDATA[<h1 id="&#x5728;Ubuntu&#x6302;&#x8F7D;apfs&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x786C;&#x76D8;"><a href="#&#x5728;Ubuntu&#x6302;&#x8F7D;apfs&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x786C;&#x76D8;" class="headerlink" title="&#x5728;Ubuntu&#x6302;&#x8F7D;apfs&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x786C;&#x76D8;"></a>&#x5728;Ubuntu&#x6302;&#x8F7D;apfs&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x786C;&#x76D8;</h1><p>&#x5728;&#x6211;&#x5C06;mac&#x7684;&#x4EE3;&#x7801;&#x786C;&#x76D8;&#x8FC1;&#x79FB;&#x5230;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x53D1;&#x73B0;ubuntu&#x4E0D;&#x652F;&#x6301;apfs&#x683C;&#x5F0F;&#x7684;&#x786C;&#x76D8;&#xFF0C;&#x4E8E;&#x662F;&#x5728;&#x641C;&#x7D22;&#x4E2D;&#x5F97;&#x77E5;apfs-fuse&#x7684;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#xFF0C;&#x4F46;&#x8FC7;&#x7A0B;&#x8E29;&#x5751;&#x8F83;&#x591A;&#xFF0C;&#x76F8;&#x5173;&#x6587;&#x7AE0;&#x4E5F;&#x5C11;&#xFF0C;&#x5728;&#x6B64;&#x8BB0;&#x5F55;&#x4EE5;&#x5907;&#x540E;&#x7528;</p>
<h2 id="1-&#x9996;&#x5148;&#x5B89;&#x88C5;&#x9700;&#x8981;&#x7684;&#x6587;&#x4EF6;"><a href="#1-&#x9996;&#x5148;&#x5B89;&#x88C5;&#x9700;&#x8981;&#x7684;&#x6587;&#x4EF6;" class="headerlink" title="1 &#x9996;&#x5148;&#x5B89;&#x88C5;&#x9700;&#x8981;&#x7684;&#x6587;&#x4EF6;"></a>1 &#x9996;&#x5148;&#x5B89;&#x88C5;&#x9700;&#x8981;&#x7684;&#x6587;&#x4EF6;</h2><p>&#x8BF7;&#x786E;&#x4FDD;&#x6307;&#x4EE4;&#x5E93;&#x4E2D;&#x5305;&#x542B;main&#x6216;universe&#x4ED3;&#x5E93;&#xFF0C;&#x9632;&#x6B62;&#x6587;&#x4EF6;&#x7F3A;&#x5931;</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt upgrade</span><br><span class="line"></span><br><span class="line">sudo apt install build-essential git cmake libfuse-dev libattr1-dev</span><br></pre></td></tr></table></figure>
<h2 id="2-&#x4E0B;&#x8F7D;apfs-fuse-&#x5E76;&#x521D;&#x59CB;&#x5316;"><a href="#2-&#x4E0B;&#x8F7D;apfs-fuse-&#x5E76;&#x521D;&#x59CB;&#x5316;" class="headerlink" title="2 &#x4E0B;&#x8F7D;apfs-fuse, &#x5E76;&#x521D;&#x59CB;&#x5316;"></a>2 &#x4E0B;&#x8F7D;apfs-fuse, &#x5E76;&#x521D;&#x59CB;&#x5316;</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:sgan81/apfs-fuse.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x8FDB;&#x5165;&#x514B;&#x9686;&#x7684;&#x76EE;&#x5F55;</span></span><br><span class="line"><span class="built_in">cd</span> apfs-fuse</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x7F16;&#x8BD1;&#x548C;&#x5B89;&#x88C5;</span></span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>

<p>cmake&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x7684;&#x9519;&#x8BEF;</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &#x7F3A;&#x5931; 3rdparty/lzfse/src/lzfse.h</span></span><br><span class="line">CMake Error: Cannot determine <span class="built_in">link</span> language <span class="keyword">for</span> target <span class="string">&quot;lzfse&quot;</span>.</span><br><span class="line">CMake Error: CMake can not determine linker language <span class="keyword">for</span> target: lzfse</span><br></pre></td></tr></table></figure>
<p>&#x89E3;&#x51B3;</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &#x8FD4;&#x56DE;apfs-fuse&#x6839;&#x76EE;&#x5F55;</span></span><br><span class="line"><span class="built_in">cd</span>  /apfs-fuse</span><br><span class="line">git submodule init</span><br><span class="line">git submodule update</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x91CD;&#x65B0;&#x7F16;&#x8BD1;cmake</span></span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake ..</span><br><span class="line"><span class="comment"># &#x5982;&#x679C;&#x7F16;&#x8BD1;&#x6210;&#x529F; &#x7EE7;&#x7EED;&#x5B8C;&#x6210;&#x7F16;&#x8BD1;&#x4E0E;&#x5B89;&#x88C5;</span></span><br><span class="line">make</span><br><span class="line">sudo make install</span><br><span class="line"><span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>make&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x7684;&#x95EE;&#x9898; 1</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &#x7F3A;&#x5C11; bzlib.h &#x5934;&#x6587;&#x4EF6;&#xFF0C;bzlib.h &#x662F; bzip2 &#x538B;&#x7F29;&#x5E93;&#x7684;&#x5934;&#x6587;&#x4EF6;&#xFF0C;apfs-fuse &#x9879;&#x76EE;&#x4F9D;&#x8D56;&#x8FD9;&#x4E2A;&#x5E93;&#x6765;&#x5B8C;&#x6210;&#x67D0;&#x4E9B;&#x529F;&#x80FD;&#x3002;</span></span><br><span class="line">CMakeFiles/apfs.dir/build.make:566: recipe <span class="keyword">for</span> target <span class="string">&apos;CMakeFiles/apfs.dir/ApfsLib/Util.cpp.o&apos;</span> failed</span><br><span class="line">make[2]: *** [CMakeFiles/apfs.dir/ApfsLib/Util.cpp.o] Error 1</span><br><span class="line">CMakeFiles/Makefile2:181: recipe <span class="keyword">for</span> target <span class="string">&apos;CMakeFiles/apfs.dir/all&apos;</span> failed</span><br><span class="line">make[1]: *** [CMakeFiles/apfs.dir/all] Error 2</span><br><span class="line">Makefile:129: recipe <span class="keyword">for</span> target <span class="string">&apos;all&apos;</span> failed</span><br><span class="line">make: *** [all] Error 2</span><br></pre></td></tr></table></figure>
<p>&#x89E3;&#x51B3;</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &#x5B89;&#x88C5;&#x6B64;&#x5F00;&#x53D1;&#x5305;</span></span><br><span class="line">sudo apt install libbz2-dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x91CD;&#x65B0;&#x7F16;&#x8BD1;</span></span><br><span class="line"><span class="built_in">cd</span> /apfs-fuse/build</span><br><span class="line">make</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5982;&#x679C;&#x6210;&#x529F;</span></span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>

<p>make&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x7684;&#x95EE;&#x9898; 2</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &#x7F3A;&#x5C11; fuse3 &#x7684;&#x5F00;&#x53D1;&#x5305;&#x3002;apfs-fuse &#x9700;&#x8981; fuse3 &#x5E93;&#x6765;&#x652F;&#x6301;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6302;&#x8F7D;</span></span><br><span class="line">CMakeFiles/apfs-fuse.dir/build.make:62: recipe <span class="keyword">for</span> target <span class="string">&apos;CMakeFiles/apfs-fuse.dir/apfsfuse/ApfsFuse.cpp.o&apos;</span> failed</span><br><span class="line">make[2]: *** [CMakeFiles/apfs-fuse.dir/apfsfuse/ApfsFuse.cpp.o] Error 1</span><br><span class="line">CMakeFiles/Makefile2:259: recipe <span class="keyword">for</span> target <span class="string">&apos;CMakeFiles/apfs-fuse.dir/all&apos;</span> failed</span><br><span class="line">make[1]: *** [CMakeFiles/apfs-fuse.dir/all] Error 2</span><br><span class="line">Makefile:129: recipe <span class="keyword">for</span> target <span class="string">&apos;all&apos;</span> failed</span><br><span class="line">make: *** [all] Error 2</span><br></pre></td></tr></table></figure>
<p>&#x89E3;&#x51B3;</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &#x5B89;&#x88C5;fuse3&#x7684;&#x5F00;&#x53D1;&#x5305;</span></span><br><span class="line">sudo apt install libfuse3-dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x91CD;&#x65B0;&#x7F16;&#x8BD1;</span></span><br><span class="line"><span class="built_in">cd</span> /apfs-fuse/build </span><br><span class="line">make </span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5982;&#x679C;&#x6210;&#x529F;</span></span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>

<h2 id="3-&#x6302;&#x8F7D;apfs&#x683C;&#x5F0F;&#x7684;&#x786C;&#x76D8;"><a href="#3-&#x6302;&#x8F7D;apfs&#x683C;&#x5F0F;&#x7684;&#x786C;&#x76D8;" class="headerlink" title="3 &#x6302;&#x8F7D;apfs&#x683C;&#x5F0F;&#x7684;&#x786C;&#x76D8;"></a>3 &#x6302;&#x8F7D;apfs&#x683C;&#x5F0F;&#x7684;&#x786C;&#x76D8;</h2><p>&#x626B;&#x63CF;&#x51FA;&#x76D8;&#x7B26;</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fdisk -l &#x6216; lsblk</span><br><span class="line"></span><br><span class="line">&#x5982;</span><br><span class="line">Disk /dev/sdb&#xFF1A;465.8 GiB&#xFF0C;500107862016 &#x5B57;&#x8282;&#xFF0C;976773168 &#x4E2A;&#x6247;&#x533A;</span><br><span class="line">&#x5355;&#x5143;&#xFF1A;&#x6247;&#x533A; / 1 * 512 = 512 &#x5B57;&#x8282;</span><br><span class="line">&#x6247;&#x533A;&#x5927;&#x5C0F;(&#x903B;&#x8F91;/&#x7269;&#x7406;)&#xFF1A;512 &#x5B57;&#x8282; / 4096 &#x5B57;&#x8282;</span><br><span class="line">I/O &#x5927;&#x5C0F;(&#x6700;&#x5C0F;/&#x6700;&#x4F73;)&#xFF1A;4096 &#x5B57;&#x8282; / 4096 &#x5B57;&#x8282;</span><br><span class="line">&#x78C1;&#x76D8;&#x6807;&#x7B7E;&#x7C7B;&#x578B;&#xFF1A;gpt</span><br><span class="line">&#x78C1;&#x76D8;&#x6807;&#x8BC6;&#x7B26;&#xFF1A;956A8929-D89C-4268-BE1D-F2FB36B1F32A</span><br><span class="line"></span><br><span class="line">&#x8BBE;&#x5907;        &#x8D77;&#x70B9;      &#x672B;&#x5C3E;      &#x6247;&#x533A;   &#x5927;&#x5C0F; &#x7C7B;&#x578B;</span><br><span class="line">/dev/sdb1     34     32767     32734    16M Microsoft &#x4FDD;&#x7559;</span><br><span class="line">/dev/sdb2  32768 976773127 976740360 465.8G &#x672A;&#x77E5;</span><br><span class="line"></span><br><span class="line">&#x6216;</span><br><span class="line">sdb      8:16   0 465.8G  0 disk </span><br><span class="line">&#x251C;&#x2500;sdb1   8:17   0    16M  0 part </span><br><span class="line">&#x2514;&#x2500;sdb2   8:18   0 465.8G  0 part </span><br></pre></td></tr></table></figure>
<p>&#x5219; dev/sdb &#x4E3A;&#x8BE5;&#x786C;&#x76D8;&#x4F4D; &#x53EF;&#x4EE5;&#x770B;&#x5230; dev/sdb2 </p>
<p>&#x5982;&#x679C;&#x76F4;&#x63A5;&#x6302;&#x8F7D;</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apfs-fuse /dev/sdb2 ~/RenCCCP</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x53EF;&#x80FD;&#x62A5;&#x9519;</span></span><br><span class="line">Unable to get volume!</span><br></pre></td></tr></table></figure>
<p>&#x9700;&#x8981;&#x6307;&#x5B9A;vol&#x53C2;&#x6570;&#x540E;&#x518D;&#x6302;&#x8F7D;</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apfs-fuse -o vol=1 /dev/sdb2 ~/RenCCCP</span><br><span class="line"><span class="built_in">cd</span> ~/RenCCCP/</span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">private-dir  root</span><br></pre></td></tr></table></figure>
<p>&#x5219;&#x6B64;&#x65F6;&#x6302;&#x8F7D;&#x6210;&#x529F;</p>
]]></content>
      <categories>
        <category>tips</category>
      </categories>
      <tags>
        <tag>开发记录</tag>
      </tags>
  </entry>
  <entry>
    <title>ES 的快速搭建</title>
    <url>/2025/01/24/elasticSearch/</url>
    <content><![CDATA[<h1 id="ElassticSearch-&#x5FEB;&#x901F;&#x642D;&#x5EFA;"><a href="#ElassticSearch-&#x5FEB;&#x901F;&#x642D;&#x5EFA;" class="headerlink" title="ElassticSearch &#x5FEB;&#x901F;&#x642D;&#x5EFA;"></a>ElassticSearch &#x5FEB;&#x901F;&#x642D;&#x5EFA;</h1><h2 id="1-&#x62C9;&#x53D6;&#x5E76;&#x89E3;&#x538B;&#x4E0B;&#x8F7D;&#x6240;&#x9700;&#x7248;&#x672C;&#x7684;-ES-&#xFF08;&#x672C;&#x793A;&#x4F8B;&#x4E3A;-7-17-16&#xFF09;"><a href="#1-&#x62C9;&#x53D6;&#x5E76;&#x89E3;&#x538B;&#x4E0B;&#x8F7D;&#x6240;&#x9700;&#x7248;&#x672C;&#x7684;-ES-&#xFF08;&#x672C;&#x793A;&#x4F8B;&#x4E3A;-7-17-16&#xFF09;" class="headerlink" title="1 &#x62C9;&#x53D6;&#x5E76;&#x89E3;&#x538B;&#x4E0B;&#x8F7D;&#x6240;&#x9700;&#x7248;&#x672C;&#x7684; ES &#xFF08;&#x672C;&#x793A;&#x4F8B;&#x4E3A; 7.17.16&#xFF09;"></a>1 &#x62C9;&#x53D6;&#x5E76;&#x89E3;&#x538B;&#x4E0B;&#x8F7D;&#x6240;&#x9700;&#x7248;&#x672C;&#x7684; ES &#xFF08;&#x672C;&#x793A;&#x4F8B;&#x4E3A; 7.17.16&#xFF09;</h2><p>&#x5728; <a href="https://www.elastic.co/cn/downloads/past-releases#elasticsearch">elastic&#x7F51;&#x7AD9;</a> &#x4E0B;&#x8F7D;&#x5BF9;&#x5E94;&#x538B;&#x7F29;&#x5305;&#xFF0C;&#x6216;&#x76F4;&#x63A5;wget</p>
<p>&#x79FB;&#x52A8;&#x5230;&#x670D;&#x52A1;&#x5668;&#x76EE;&#x5F55;&#xFF0C;&#x4F8B;&#x5982; /home/elasticsearch/</p>
<p>&#x89E3;&#x538B;</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">tar -zxvf elasticsearch-7.17.16-linux-x86_64.tar.gz</span><br></pre></td></tr></table></figure>

<h2 id="2-&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5904;&#x7406;"><a href="#2-&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5904;&#x7406;" class="headerlink" title="2 &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5904;&#x7406;"></a>2 &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5904;&#x7406;</h2><h3 id="2-1-&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;-elasticsearch-yml"><a href="#2-1-&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;-elasticsearch-yml" class="headerlink" title="2.1 &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6; elasticsearch.yml"></a>2.1 &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6; elasticsearch.yml</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> elasticsearch-7.17.16-linux-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line">vim config/elasticsearch.yml</span><br><span class="line"></span><br><span class="line"><span class="comment">###### elasticsearch.yml ######</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x8BBE;&#x7F6E;&#x4E3A;&#x5355;&#x673A;&#x6A21;&#x5F0F;</span></span><br><span class="line">discovery.type: single-node</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x7F51;&#x6BB5;&#x4E3A;&#x6240;&#x6709;&#x53EF;&#x8BBF;&#x95EE;</span></span><br><span class="line">network.host: 0.0.0.0</span><br><span class="line">http.port: 9200</span><br><span class="line"><span class="comment"># &#x900F;&#x8FC7;cors&#x8DE8;&#x57DF;&#x8BF7;&#x6C42;</span></span><br><span class="line">http.cors.enabled: <span class="literal">true</span></span><br><span class="line">http.cors.allow-origin: <span class="string">&quot;*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5934;&#x90E8;&#x52A0;&#x4E0A; AUTH</span></span><br><span class="line">http.cors.allow-headers: Authorization</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5B89;&#x5168;&#x6A21;&#x5757;&#x5F00;&#x542F;&#xFF0C;&#x9632;&#x6B62;&#x542F;&#x52A8;&#x62A5;&#x9519;</span></span><br><span class="line">xpack.security.enabled: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###############################</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2-&#x4FEE;&#x6539;&#x542F;&#x52A8;&#x5305;&#x4E2D;&#x7684;jdk&#x4F4D;&#x7F6E;&#x4E3A;ES&#x81EA;&#x5E26;&#x7684;jdk"><a href="#2-2-&#x4FEE;&#x6539;&#x542F;&#x52A8;&#x5305;&#x4E2D;&#x7684;jdk&#x4F4D;&#x7F6E;&#x4E3A;ES&#x81EA;&#x5E26;&#x7684;jdk" class="headerlink" title="2.2 &#x4FEE;&#x6539;&#x542F;&#x52A8;&#x5305;&#x4E2D;&#x7684;jdk&#x4F4D;&#x7F6E;&#x4E3A;ES&#x81EA;&#x5E26;&#x7684;jdk"></a>2.2 &#x4FEE;&#x6539;&#x542F;&#x52A8;&#x5305;&#x4E2D;&#x7684;jdk&#x4F4D;&#x7F6E;&#x4E3A;ES&#x81EA;&#x5E26;&#x7684;jdk</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">vim bin/elasticsearch</span><br><span class="line"></span><br><span class="line"><span class="comment">###### elasticsearch ######</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/home/elasticsearch/elasticsearch-7.17.16/jdk</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###########################</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-&#x4FEE;&#x6539;es&#x7684;jvm&#x5806;&#x5185;&#x5B58;&#x5927;&#x5C0F;"><a href="#2-3-&#x4FEE;&#x6539;es&#x7684;jvm&#x5806;&#x5185;&#x5B58;&#x5927;&#x5C0F;" class="headerlink" title="2.3 &#x4FEE;&#x6539;es&#x7684;jvm&#x5806;&#x5185;&#x5B58;&#x5927;&#x5C0F;"></a>2.3 &#x4FEE;&#x6539;es&#x7684;jvm&#x5806;&#x5185;&#x5B58;&#x5927;&#x5C0F;</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">vim config/jvm.options</span><br><span class="line"></span><br><span class="line"><span class="comment">###### jvm.options ######</span></span><br><span class="line"></span><br><span class="line">-Xms1g</span><br><span class="line">-Xms1g</span><br><span class="line"></span><br><span class="line"><span class="comment">##########################</span></span><br></pre></td></tr></table></figure>

<h2 id="3-&#x521B;&#x5EFA;es&#x4E13;&#x7528;&#x7528;&#x6237;"><a href="#3-&#x521B;&#x5EFA;es&#x4E13;&#x7528;&#x7528;&#x6237;" class="headerlink" title="3 &#x521B;&#x5EFA;es&#x4E13;&#x7528;&#x7528;&#x6237;"></a>3 &#x521B;&#x5EFA;es&#x4E13;&#x7528;&#x7528;&#x6237;</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &#x56E0;&#x4E3A;es&#x8FD0;&#x884C;&#x4E0D;&#x53EF;&#x4E3A;root&#x7528;&#x6237;&#xFF0C;&#x5219;&#x521B;&#x5EFA; user-es &#x4F9B;es&#x4F7F;&#x7528;</span></span><br><span class="line">sudo useradd user-es</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x8BBE;&#x7F6E;&#x5BC6;&#x7801;</span></span><br><span class="line">sudo passwd user-es</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5C06; user-es &#x52A0;&#x5165;&#x7BA1;&#x7406;&#x5458;&#x7EC4;</span></span><br><span class="line">sudo usermod -aG root user-es</span><br></pre></td></tr></table></figure>
<h2 id="4-&#x542F;&#x52A8;"><a href="#4-&#x542F;&#x52A8;" class="headerlink" title="4 &#x542F;&#x52A8;"></a>4 &#x542F;&#x52A8;</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &#x5207;&#x6362;&#x5230; user-es </span></span><br><span class="line">su user-es</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x542F;&#x52A8;&#x9879;&#x76EE;</span></span><br><span class="line">bin/elasticsearch</span><br><span class="line"><span class="comment"># &#x540E;&#x53F0;&#x542F;&#x52A8;</span></span><br><span class="line">bin/elasticsearch -d</span><br></pre></td></tr></table></figure>
<h2 id="5-&#x8BBE;&#x7F6E;es&#x7528;&#x6237;&#x7EC4;&#x5BC6;&#x7801;"><a href="#5-&#x8BBE;&#x7F6E;es&#x7528;&#x6237;&#x7EC4;&#x5BC6;&#x7801;" class="headerlink" title="5 &#x8BBE;&#x7F6E;es&#x7528;&#x6237;&#x7EC4;&#x5BC6;&#x7801;"></a>5 &#x8BBE;&#x7F6E;es&#x7528;&#x6237;&#x7EC4;&#x5BC6;&#x7801;</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &#x9996;&#x5148;&#x6D4B;&#x8BD5;&#x9879;&#x76EE;&#x662F;&#x5426;&#x542F;&#x52A8;&#x6210;&#x529F;</span></span><br><span class="line">crul http://127.0.0.1:9200/</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5728;es&#x542F;&#x52A8;&#x4E2D;&#xFF0C;&#x6267;&#x884C;</span></span><br><span class="line">bin/elasticsearch-setup-passwords interactive</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x51FA;&#x73B0;</span></span><br><span class="line">Initiating the setup of passwords <span class="keyword">for</span> reserved <span class="built_in">users</span> </span><br><span class="line">elastic,apm_system,kibana,kibana_system,logstash_system,beats_system,remote_monitoring_user.</span><br><span class="line">You will be prompted to enter passwords as the process progresses.</span><br><span class="line">Please confirm that you would like to <span class="built_in">continue</span> [y/N]y</span><br><span class="line"><span class="comment"># &#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x5BC6;&#x7801;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x6D4B;&#x8BD5;&#x5BC6;&#x7801;&#x662F;&#x5426;&#x8BBE;&#x7F6E;&#x6210;&#x529F;</span></span><br><span class="line"></span><br><span class="line">curl -u elastic:password http://127.0.0.1:9200/</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>部署</category>
      </categories>
      <tags>
        <tag>后端</tag>
      </tags>
  </entry>
  <entry>
    <title>RocketMqDe</title>
    <url>/2024/12/31/RocketMqDe/</url>
    <content><![CDATA[<h2 id="RocketMq&#x6574;&#x5408;&#x8BB0;&#x5F55;&#x5907;&#x7528;"><a href="#RocketMq&#x6574;&#x5408;&#x8BB0;&#x5F55;&#x5907;&#x7528;" class="headerlink" title="RocketMq&#x6574;&#x5408;&#x8BB0;&#x5F55;&#x5907;&#x7528;"></a>RocketMq&#x6574;&#x5408;&#x8BB0;&#x5F55;&#x5907;&#x7528;</h2><h2 id="&#x5F15;&#x5165;pom"><a href="#&#x5F15;&#x5165;pom" class="headerlink" title="&#x5F15;&#x5165;pom"></a>&#x5F15;&#x5165;pom</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.rocketmq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rocketmq-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="&#x4E00;-&#x751F;&#x4EA7;&#x8005;"><a href="#&#x4E00;-&#x751F;&#x4EA7;&#x8005;" class="headerlink" title="&#x4E00;, &#x751F;&#x4EA7;&#x8005;"></a>&#x4E00;, &#x751F;&#x4EA7;&#x8005;</h3><h4 id="1-&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#1-&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="1 &#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>1 &#x914D;&#x7F6E;&#x6587;&#x4EF6;</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">rocketmq:</span></span><br><span class="line">  <span class="attr">name-server:</span> {<span class="string">mq&#x5730;&#x5740;</span>}<span class="string">:{mq&#x7AEF;&#x53E3;}</span>  <span class="comment"># NameServer &#x5730;&#x5740;&#xFF0C;&#x96C6;&#x7FA4;&#x4F7F;&#x7528;&apos;;&apos;&#x9694;&#x5F00;</span></span><br><span class="line">  <span class="attr">producer:</span></span><br><span class="line">    <span class="attr">group:</span> <span class="string">producer-group</span>  <span class="comment"># &#x751F;&#x4EA7;&#x8005;&#x7EC4;&#x540D;&#x79F0;</span></span><br><span class="line">    <span class="attr">send-message-timeout:</span> <span class="number">3000</span></span><br><span class="line">    <span class="attr">retry-times-when-send-failed:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">retry-next-server:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h4 id="2-&#x914D;&#x7F6E;&#x7C7B;"><a href="#2-&#x914D;&#x7F6E;&#x7C7B;" class="headerlink" title="2 &#x914D;&#x7F6E;&#x7C7B;"></a>2 &#x914D;&#x7F6E;&#x7C7B;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.producer.DefaultMQProducer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RocketMqConfiguration</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;${rocketmq.name-server}&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String nameServer;</span><br><span class="line">    <span class="meta">@Value(&quot;${rocketmq.producer.group}&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String producerGroup;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//&#x914D;&#x7F6E;&#x751F;&#x4EA7;&#x8005;</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DefaultMQProducer <span class="title function_">defaultMQProducer</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">DefaultMQProducer</span> <span class="variable">producer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultMQProducer</span>(producerGroup);</span><br><span class="line">        producer.setNamesrvAddr(nameServer);</span><br><span class="line">        <span class="keyword">return</span> producer;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="3-&#x6D88;&#x8D39;&#x8005;&#x53D1;&#x9001;&#x670D;&#x52A1;-&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5DE5;&#x5382;&#x7C7B;-&#x6B64;&#x5904;&#x4E0D;&#x793A;&#x4F8B;"><a href="#3-&#x6D88;&#x8D39;&#x8005;&#x53D1;&#x9001;&#x670D;&#x52A1;-&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5DE5;&#x5382;&#x7C7B;-&#x6B64;&#x5904;&#x4E0D;&#x793A;&#x4F8B;" class="headerlink" title="3 &#x6D88;&#x8D39;&#x8005;&#x53D1;&#x9001;&#x670D;&#x52A1; (&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5DE5;&#x5382;&#x7C7B;,&#x6B64;&#x5904;&#x4E0D;&#x793A;&#x4F8B;)"></a>3 &#x6D88;&#x8D39;&#x8005;&#x53D1;&#x9001;&#x670D;&#x52A1; (&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5DE5;&#x5382;&#x7C7B;,&#x6B64;&#x5904;&#x4E0D;&#x793A;&#x4F8B;)</h4><p>&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x53D1;&#x9001;&#x89C4;&#x8303;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyRocketService</span> {</span><br><span class="line">    SendResult <span class="title function_">sendMsg</span><span class="params">(String topic, String tag, Object data)</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5B9E;&#x73B0;&#x7C7B; &#x53D1;&#x9001;&#x5B9E;&#x73B0;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> com.ren.rocketmqdemo.service.MyRocketService;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.producer.DefaultMQProducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.producer.SendResult;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.common.message.Message;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRocketProducer</span> <span class="keyword">implements</span> <span class="title class_">MyRocketService</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DefaultMQProducer ownProducer;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> SendResult <span class="title function_">sendMsg</span><span class="params">(String topic, String tag, Object data)</span> {</span><br><span class="line">        <span class="comment">// &#x5207;&#x6362;&#x4E3A;&#x672C;&#x5730;MQ&#x670D;&#x52A1;</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> JSONObject.toJSONString(data);</span><br><span class="line">        log.info(<span class="string">&quot;Local Ons&#x53D1;&#x9001;&#x6D88;&#x606F;topic:{},tag:{} msg:{}&quot;</span>, topic, tag, JSONObject.toJSONString(data));</span><br><span class="line">        <span class="type">Message</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Message</span>(topic, tag, body.getBytes());</span><br><span class="line">        <span class="type">SendResult</span> <span class="variable">sendResult</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            sendResult = ownProducer.send(msg);</span><br><span class="line">            log.info(String.format(<span class="string">&quot;Local MQ&#x6D88;&#x606F;&#x53D1;&#x9001;&#x72B6;&#x6001;:%s, queueId:%d, body:%s&quot;</span>, sendResult.getSendStatus(),</span><br><span class="line">                    sendResult.getMessageQueue().getQueueId(), body));</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.error(<span class="string">&quot;MQ&#x6D88;&#x606F;&#x53D1;&#x9001;&#x5931;&#x8D25;&quot;</span>, e);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> sendResult;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="4-&#x4F7F;&#x7528;&#x793A;&#x4F8B;"><a href="#4-&#x4F7F;&#x7528;&#x793A;&#x4F8B;" class="headerlink" title="4 &#x4F7F;&#x7528;&#x793A;&#x4F8B;"></a>4 &#x4F7F;&#x7528;&#x793A;&#x4F8B;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/rocketmq&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RocketMqController</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MyRocketProducer myRocketProducer;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/{msg}&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> SendResult <span class="title function_">sendMsg</span><span class="params">(<span class="meta">@PathVariable(&quot;msg&quot;)</span> String msg)</span> {</span><br><span class="line">        <span class="keyword">return</span> myRocketProducer.sendMsg(<span class="string">&quot;test-topic&quot;</span>, <span class="string">&quot;test-tag&quot;</span>, msg);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x4E8C;-&#x6D88;&#x8D39;&#x8005;"><a href="#&#x4E8C;-&#x6D88;&#x8D39;&#x8005;" class="headerlink" title="&#x4E8C;, &#x6D88;&#x8D39;&#x8005;"></a>&#x4E8C;, &#x6D88;&#x8D39;&#x8005;</h3><h4 id="1-&#x914D;&#x7F6E;&#x6587;&#x4EF6;-1"><a href="#1-&#x914D;&#x7F6E;&#x6587;&#x4EF6;-1" class="headerlink" title="1 &#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>1 &#x914D;&#x7F6E;&#x6587;&#x4EF6;</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">rocketmq:</span></span><br><span class="line">  <span class="attr">name-server:</span> {<span class="string">mq&#x5730;&#x5740;</span>}<span class="string">:{mq&#x7AEF;&#x53E3;}</span>  <span class="comment"># NameServer &#x5730;&#x5740;&#xFF0C;&#x96C6;&#x7FA4;&#x4F7F;&#x7528;&apos;;&apos;&#x9694;&#x5F00;</span></span><br><span class="line">  <span class="attr">consumer:</span></span><br><span class="line">    <span class="attr">group:</span> <span class="string">consumer-group</span>  <span class="comment"># &#x6D88;&#x8D39;&#x8005;&#x7EC4;&#x540D;&#x79F0;</span></span><br><span class="line">    <span class="attr">topic:</span> <span class="string">test-topic</span>  <span class="comment"># &#x8BA2;&#x9605;&#x7684;&#x4E3B;&#x9898;</span></span><br></pre></td></tr></table></figure>

<h4 id="&#x4E24;&#x79CD;&#x76D1;&#x542C;&#x65B9;&#x5F0F;"><a href="#&#x4E24;&#x79CD;&#x76D1;&#x542C;&#x65B9;&#x5F0F;" class="headerlink" title="&#x4E24;&#x79CD;&#x76D1;&#x542C;&#x65B9;&#x5F0F;"></a>&#x4E24;&#x79CD;&#x76D1;&#x542C;&#x65B9;&#x5F0F;</h4><h4 id="2-1-&#x6CE8;&#x89E3;&#x5F62;&#x5F0F;"><a href="#2-1-&#x6CE8;&#x89E3;&#x5F62;&#x5F0F;" class="headerlink" title="2-1 &#x6CE8;&#x89E3;&#x5F62;&#x5F0F;"></a>2-1 &#x6CE8;&#x89E3;&#x5F62;&#x5F0F;</h4><p>&#x9996;&#x5148;&#x5728;&#x542F;&#x52A8;&#x7C7B;&#x52A0;&#x4E0A;RocketMq&#x914D;&#x7F6E;&#x5F15;&#x5165;&#x6CE8;&#x89E3;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Import(RocketMQAutoConfiguration.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> {</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">		SpringApplication.run(CloudBiz2Application.class, args);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x76D1;&#x542C;&#x4E1A;&#x52A1;&#x7C7B;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.rocketmq.spring.annotation.RocketMQMessageListener;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.spring.core.RocketMQListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@RocketMQMessageListener(topic = &quot;test-topic&quot;, selectorExpression = &quot;test-tag || demo&quot;, consumerGroup =&quot;${rocketmq.consumer.group}&quot; ,selectorType = SelectorType.TAG)</span>  <span class="comment">// selectorExpression&#x6307;&#x5B9A;&#x8981;&#x8FC7;&#x6EE4;&#x7684;tag</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRocketCustomer</span> <span class="keyword">implements</span> <span class="title class_">RocketMQListener</span>&lt;String&gt; {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onMessage</span><span class="params">(String message)</span> {</span><br><span class="line">        System.out.println(message);</span><br><span class="line">        <span class="comment">// &#x5904;&#x7406;&#x63A5;&#x6536;&#x5230;&#x7684;&#x6D88;&#x606F;</span></span><br><span class="line">        <span class="comment">// &#x65B9;&#x6CD5;&#x4F53;</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="2-2-&#x65B9;&#x6CD5;&#x4F53;&#x5F62;&#x5F0F;-&#x4E0D;&#x63A8;&#x8350;"><a href="#2-2-&#x65B9;&#x6CD5;&#x4F53;&#x5F62;&#x5F0F;-&#x4E0D;&#x63A8;&#x8350;" class="headerlink" title="2-2 &#x65B9;&#x6CD5;&#x4F53;&#x5F62;&#x5F0F; (&#x4E0D;&#x63A8;&#x8350;)"></a>2-2 &#x65B9;&#x6CD5;&#x4F53;&#x5F62;&#x5F0F; (&#x4E0D;&#x63A8;&#x8350;)</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;${rocketmq.name-server}&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String namesrv;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6B64;&#x5904;&#x4F20;&#x5165;&#x7684;mqHandler&#x662F;&#x4E00;&#x4E2A;&#x5DE5;&#x5382;&#x7C7B;&#x65B9;&#x6CD5;,&#x901A;&#x8FC7;&#x516C;&#x7528;&#x7236;&#x7C7B;MqHandler&#x52A8;&#x6001;&#x4F20;&#x5165;&#x5B50;&#x7C7B;,&#x591A;&#x6001;&#x7684;&#x5229;&#x7528;&#x6D88;&#x606F;&#x505A;&#x51FA;&#x4E0D;&#x540C;&#x54CD;&#x5E94;</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">registerOrderListener</span><span class="params">(String consumerGroups, String topic, String tag, MqHandler handler)</span> {</span><br><span class="line">	<span class="keyword">try</span> {</span><br><span class="line">		<span class="type">String</span> <span class="variable">mapKey</span> <span class="operator">=</span> consumerGroups + topic + tag;</span><br><span class="line">		<span class="keyword">if</span> (consumerMap.containsKey(mapKey)) {</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(GlobalError.MQ_CONSUMER_REPEAT_ERROR.code,</span><br><span class="line">					GlobalError.MQ_CONSUMER_REPEAT_ERROR.msg);</span><br><span class="line">		}</span><br><span class="line">		<span class="type">DefaultMQPushConsumer</span> <span class="variable">consumer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultMQPushConsumer</span>(consumerGroups, <span class="literal">true</span>);</span><br><span class="line">		consumer.setNamesrvAddr(namesrv);</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * &#x8BBE;&#x7F6E;Consumer&#x7B2C;&#x4E00;&#x6B21;&#x542F;&#x52A8;&#x662F;&#x4ECE;&#x961F;&#x5217;&#x5934;&#x90E8;&#x5F00;&#x59CB;&#x6D88;&#x8D39;&#x8FD8;&#x662F;&#x961F;&#x5217;&#x5C3E;&#x90E8;&#x5F00;&#x59CB;&#x6D88;&#x8D39;&lt;br&gt;</span></span><br><span class="line"><span class="comment">		 * &#x5982;&#x679C;&#x975E;&#x7B2C;&#x4E00;&#x6B21;&#x542F;&#x52A8;&#xFF0C;&#x90A3;&#x4E48;&#x6309;&#x7167;&#x4E0A;&#x6B21;&#x6D88;&#x8D39;&#x7684;&#x4F4D;&#x7F6E;&#x7EE7;&#x7EED;&#x6D88;&#x8D39;</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);</span><br><span class="line">		consumer.subscribe(topic, tag);</span><br><span class="line">		consumer.registerMessageListener(<span class="keyword">new</span> <span class="title class_">MessageListenerOrderly</span>() {</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="keyword">public</span> ConsumeOrderlyStatus <span class="title function_">consumeMessage</span><span class="params">(List&lt;MessageExt&gt; msgs, ConsumeOrderlyContext context)</span> {</span><br><span class="line">				context.setAutoCommit(<span class="literal">true</span>);</span><br><span class="line">				<span class="keyword">for</span> (MessageExt message : msgs) {</span><br><span class="line">					<span class="type">long</span> <span class="variable">time</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">					<span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> message.getKeys();</span><br><span class="line">					<span class="type">String</span> <span class="variable">tag</span> <span class="operator">=</span> message.getTags();</span><br><span class="line">					<span class="type">String</span> <span class="variable">msgid</span> <span class="operator">=</span> message.getMsgId();</span><br><span class="line">					<span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">					<span class="keyword">try</span> {</span><br><span class="line">						content = <span class="keyword">new</span> <span class="title class_">String</span>(message.getBody(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">					} <span class="keyword">catch</span> (UnsupportedEncodingException e) {</span><br><span class="line">						log.info(<span class="string">&quot;MQ&#x6CE8;&#x518C;&#x6D88;&#x8D39;&#x8005;&#x5931;&#x8D25;&#xFF1A;{}&quot;</span>, e.getMessage());</span><br><span class="line">						<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(GlobalError.MQ_CONSUMER_ERROR.code,</span><br><span class="line">								GlobalError.MQ_CONSUMER_ERROR.msg);</span><br><span class="line">					}</span><br><span class="line">					log.info(<span class="string">&quot;MQ&#x6D88;&#x606F;key:{} tag:{} msgid:{} content:{}&quot;</span>, key, tag, msgid, content);</span><br><span class="line">                       <span class="comment">// &#x5DE5;&#x5382;&#x7C7B;&#x52A8;&#x6001;&#x591A;&#x6001;&#x65B9;&#x6CD5;</span></span><br><span class="line">					<span class="type">MqStatus</span> <span class="variable">status</span> <span class="operator">=</span> handler.methodT(content);</span><br><span class="line">					<span class="keyword">if</span> (!MqStatus.SUCCESS.equals(status)) {</span><br><span class="line">						log.info(<span class="string">&quot;MQ&#x6D88;&#x606F;key:{} &#x6D88;&#x8D39;&#x7ED3;&#x675F;:{}&#xFF0C;&#x8017;&#x65F6;&#xFF1A;{}ms&quot;</span>, key, status, (System.currentTimeMillis() - time));</span><br><span class="line">						<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(GlobalError.MQ_CONSUMER_ERROR.code,</span><br><span class="line">								GlobalError.MQ_CONSUMER_ERROR.msg);</span><br><span class="line">					}</span><br><span class="line">				}</span><br><span class="line">				<span class="keyword">return</span> ConsumeOrderlyStatus.SUCCESS;</span><br><span class="line">			}</span><br><span class="line">		});</span><br><span class="line">		consumer.start();</span><br><span class="line">		consumerMap.put(mapKey, consumer);</span><br><span class="line">	} <span class="keyword">catch</span> (MQClientException e) {</span><br><span class="line">		log.info(<span class="string">&quot;MQ&#x6CE8;&#x518C;&#x6D88;&#x8D39;&#x8005;&#x5931;&#x8D25;&#xFF1A;{}&quot;</span>, e.getErrorMessage());</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(GlobalError.MQ_CONSUMER_INIT_ERROR.code, GlobalError.MQ_CONSUMER_INIT_ERROR.msg);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>xxl-job</title>
    <url>/2024/12/31/xxl-job/</url>
    <content><![CDATA[<h2 id="xxl-job&#x6574;&#x5408;&#x8BB0;&#x5F55;&#x5907;&#x7528;"><a href="#xxl-job&#x6574;&#x5408;&#x8BB0;&#x5F55;&#x5907;&#x7528;" class="headerlink" title="xxl-job&#x6574;&#x5408;&#x8BB0;&#x5F55;&#x5907;&#x7528;"></a>xxl-job&#x6574;&#x5408;&#x8BB0;&#x5F55;&#x5907;&#x7528;</h2><h3 id="&#x4E00;-xxl-job&#x5FEB;&#x901F;&#x642D;&#x5EFA;"><a href="#&#x4E00;-xxl-job&#x5FEB;&#x901F;&#x642D;&#x5EFA;" class="headerlink" title="&#x4E00;, xxl-job&#x5FEB;&#x901F;&#x642D;&#x5EFA;"></a>&#x4E00;, xxl-job&#x5FEB;&#x901F;&#x642D;&#x5EFA;</h3><h4 id="1-&#x62C9;&#x53D6;"><a href="#1-&#x62C9;&#x53D6;" class="headerlink" title="1 &#x62C9;&#x53D6;"></a>1 &#x62C9;&#x53D6;</h4><p>&#x4ECE; <a href="https://github.com/xuxueli/xxl-job">https://github.com/xuxueli/xxl-job</a> &#x62C9;&#x53D6;&#x4EE3;&#x7801;</p>
<h4 id="2-&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;"><a href="#2-&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;" class="headerlink" title="2 &#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;"></a>2 &#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;</h4><p>&#x5C06;&#x62C9;&#x53D6;&#x4E0B;&#x6765;&#x7684;&#x4EE3;&#x7801;&#x4E2D;, .doc/db/xxl_job_info.sql&#x6267;&#x884C;&#x5E76;&#x521B;&#x5EFA;xxl-job&#x5E93;</p>
<h4 id="3-&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#3-&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="3 &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>3 &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h4><p>&#x4FEE;&#x6539; xxl-job-admin&#x6A21;&#x5757; &#x4E0B; application.properties &#x4E2D;&#x7684; ### xxl-job, datasource &#x90E8;&#x5206;&#x4FEE;&#x6539;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x5E93;&#x4FE1;&#x606F;</p>
<h4 id="&#x81F3;&#x6B64;&#x5B8C;&#x6210;&#x642D;&#x5EFA;"><a href="#&#x81F3;&#x6B64;&#x5B8C;&#x6210;&#x642D;&#x5EFA;" class="headerlink" title="&#x81F3;&#x6B64;&#x5B8C;&#x6210;&#x642D;&#x5EFA;"></a>&#x81F3;&#x6B64;&#x5B8C;&#x6210;&#x642D;&#x5EFA;</h4><p>&#x8BBF;&#x95EE;&#x9875;&#x9762;&#x4E3A; http://{job&#x642D;&#x5EFA;ip}:{job-server:port}/xxl-job-admin/ &#x5EFA;&#x8BAE;&#x5728;docker&#x4E2D;&#x642D;&#x5EFA;</p>
<h3 id="&#x4E8C;-xxl-job&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#x521B;&#x5EFA;"><a href="#&#x4E8C;-xxl-job&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#x521B;&#x5EFA;" class="headerlink" title="&#x4E8C;, xxl-job&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#x521B;&#x5EFA;"></a>&#x4E8C;, xxl-job&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#x521B;&#x5EFA;</h3><h4 id="1-&#x5F15;&#x5165;pom"><a href="#1-&#x5F15;&#x5165;pom" class="headerlink" title="1 &#x5F15;&#x5165;pom"></a>1 &#x5F15;&#x5165;pom</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.xuxueli<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xxl-job-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-&#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53CA;&#x914D;&#x7F6E;&#x7C7B;"><a href="#2-&#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53CA;&#x914D;&#x7F6E;&#x7C7B;" class="headerlink" title="2 &#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53CA;&#x914D;&#x7F6E;&#x7C7B;"></a>2 &#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53CA;&#x914D;&#x7F6E;&#x7C7B;</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">xxl:</span></span><br><span class="line">  <span class="attr">job:</span></span><br><span class="line">    <span class="attr">admin:</span></span><br><span class="line">      <span class="attr">addresses:</span> <span class="string">http://{job&#x642D;&#x5EFA;ip}:{job-server:port}/xxl-job-admin/</span></span><br><span class="line">    <span class="attr">executor:</span></span><br><span class="line">      <span class="attr">appname:</span> <span class="string">xxl-job-executor-sample</span>	<span class="comment">#&#x6CE8;&#x6267;&#x884C;&#x5668;&#x540D;&#x79F0;</span></span><br><span class="line">      <span class="attr">ip:</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">9998</span>	<span class="comment">#&#x6CE8;&#x518C;&#x5904;ip,&#x4E0E;&#x9879;&#x76EE;&#x7AEF;&#x53E3;&#x4E0D;&#x540C;</span></span><br><span class="line">      <span class="attr">logpath:</span> <span class="string">/data/applogs/xxl-job-test/jobhandler</span></span><br><span class="line">      <span class="attr">logretentiondays:</span> <span class="number">30</span></span><br><span class="line">    <span class="attr">accessToken:</span> <span class="string">&apos;432e62f3b488bc861d91b0e274e850cc&apos;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.xxl.job.core.executor.impl.XxlJobSpringExecutor;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XxlJobConfig</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;${xxl.job.admin.addresses}&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String adminAddresses;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;${xxl.job.executor.appname}&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String appName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;${xxl.job.executor.ip}&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String ip;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;${xxl.job.executor.port}&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> port;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;${xxl.job.accessToken}&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String accessToken;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;${xxl.job.executor.logpath}&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String logPath;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;${xxl.job.executor.logretentiondays}&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> logRetentionDays;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> XxlJobSpringExecutor <span class="title function_">xxlJobExecutor</span><span class="params">()</span> {</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xxl-job config init.&quot;</span>);</span><br><span class="line">        <span class="type">XxlJobSpringExecutor</span> <span class="variable">xxlJobSpringExecutor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XxlJobSpringExecutor</span>();</span><br><span class="line">        xxlJobSpringExecutor.setAdminAddresses(adminAddresses);</span><br><span class="line">        xxlJobSpringExecutor.setAppname(appName);</span><br><span class="line">        xxlJobSpringExecutor.setIp(ip);</span><br><span class="line">        xxlJobSpringExecutor.setPort(port);</span><br><span class="line">        xxlJobSpringExecutor.setAccessToken(accessToken);</span><br><span class="line">        xxlJobSpringExecutor.setLogPath(logPath);</span><br><span class="line">        xxlJobSpringExecutor.setLogRetentionDays(logRetentionDays);</span><br><span class="line">        <span class="keyword">return</span> xxlJobSpringExecutor;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="3-&#x5B9A;&#x65F6;&#x65B9;&#x6CD5;&#x521B;&#x5EFA;"><a href="#3-&#x5B9A;&#x65F6;&#x65B9;&#x6CD5;&#x521B;&#x5EFA;" class="headerlink" title="3 &#x5B9A;&#x65F6;&#x65B9;&#x6CD5;&#x521B;&#x5EFA;"></a>3 &#x5B9A;&#x65F6;&#x65B9;&#x6CD5;&#x521B;&#x5EFA;</h4><p>&#x4EE3;&#x7801;&#x4E2D;: &#x52A0;&#x5165; @XxlJob(&#x201C;&#x540D;&#x201D;) &#x5373;&#x53EF;&#x6CE8;&#x518C;&#x5B9A;&#x65F6;&#x65B9;&#x6CD5;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TaskJob</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@XxlJob(&quot;postVideo2CHXAsync&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postVideo2CHXAsync</span><span class="params">()</span> {</span><br><span class="line">        <span class="comment">// &#x65B9;&#x6CD5;&#x4F53;</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x89C6;&#x5316;&#x5E73;&#x53F0;&#x914D;&#x7F6E;&#x8BE5;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#x5468;&#x671F;</p>
<h5 id="1-&#x4EFB;&#x52A1;&#x7BA1;&#x7406;-&#x4E2D;-&#x9009;&#x62E9;&#x5BF9;&#x5E94;&#x6267;&#x884C;&#x5668;-&#x65B0;&#x589E;"><a href="#1-&#x4EFB;&#x52A1;&#x7BA1;&#x7406;-&#x4E2D;-&#x9009;&#x62E9;&#x5BF9;&#x5E94;&#x6267;&#x884C;&#x5668;-&#x65B0;&#x589E;" class="headerlink" title="1,&#x4EFB;&#x52A1;&#x7BA1;&#x7406; &#x4E2D; &#x9009;&#x62E9;&#x5BF9;&#x5E94;&#x6267;&#x884C;&#x5668; &#x65B0;&#x589E;"></a>1,&#x4EFB;&#x52A1;&#x7BA1;&#x7406; &#x4E2D; &#x9009;&#x62E9;&#x5BF9;&#x5E94;&#x6267;&#x884C;&#x5668; &#x65B0;&#x589E;</h5><p>&#x8FD0;&#x884C;&#x6A21;&#x5F0F; &#x9009;&#x62E9; BEAN , JobHandler &#x586B;&#x5165;&#x5BF9;&#x5E94;&#x6CE8;&#x518C;&#x540D;&#x79F0;, &#x5176;&#x4ED6;&#x9ED8;&#x8BA4;,&#x5373;&#x53EF;</p>
]]></content>
      <categories>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>使用单例的工厂类进行开发</title>
    <url>/2024/11/12/factory/</url>
    <content><![CDATA[<h2 id="&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x4E00;&#x6B21;&#x4E0D;&#x540C;&#x573A;&#x666F;&#x767B;&#x5F55;&#x8C03;&#x7528;&#x4E0D;&#x540C;&#x514D;&#x767B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;-&#x6211;&#x60F3;&#x51FA;&#x7528;&#x5DE5;&#x5382;&#x7C7B;&#x663E;&#x7136;&#x53EF;&#x4EE5;&#x66F4;&#x52A0;&#x7075;&#x6D3B;&#x7684;&#x89E3;&#x51B3;&#x4EE3;&#x7801;&#x5197;&#x4F59;&#x7684;&#x95EE;&#x9898;-&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;"><a href="#&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x4E00;&#x6B21;&#x4E0D;&#x540C;&#x573A;&#x666F;&#x767B;&#x5F55;&#x8C03;&#x7528;&#x4E0D;&#x540C;&#x514D;&#x767B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;-&#x6211;&#x60F3;&#x51FA;&#x7528;&#x5DE5;&#x5382;&#x7C7B;&#x663E;&#x7136;&#x53EF;&#x4EE5;&#x66F4;&#x52A0;&#x7075;&#x6D3B;&#x7684;&#x89E3;&#x51B3;&#x4EE3;&#x7801;&#x5197;&#x4F59;&#x7684;&#x95EE;&#x9898;-&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;" class="headerlink" title="&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x4E00;&#x6B21;&#x4E0D;&#x540C;&#x573A;&#x666F;&#x767B;&#x5F55;&#x8C03;&#x7528;&#x4E0D;&#x540C;&#x514D;&#x767B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;,&#x6211;&#x60F3;&#x51FA;&#x7528;&#x5DE5;&#x5382;&#x7C7B;&#x663E;&#x7136;&#x53EF;&#x4EE5;&#x66F4;&#x52A0;&#x7075;&#x6D3B;&#x7684;&#x89E3;&#x51B3;&#x4EE3;&#x7801;&#x5197;&#x4F59;&#x7684;&#x95EE;&#x9898;,&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;"></a>&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x4E00;&#x6B21;&#x4E0D;&#x540C;&#x573A;&#x666F;&#x767B;&#x5F55;&#x8C03;&#x7528;&#x4E0D;&#x540C;&#x514D;&#x767B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;,&#x6211;&#x60F3;&#x51FA;&#x7528;&#x5DE5;&#x5382;&#x7C7B;&#x663E;&#x7136;&#x53EF;&#x4EE5;&#x66F4;&#x52A0;&#x7075;&#x6D3B;&#x7684;&#x89E3;&#x51B3;&#x4EE3;&#x7801;&#x5197;&#x4F59;&#x7684;&#x95EE;&#x9898;,&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;</h2><h3 id="&#x9996;&#x5148;-&#x5F15;&#x5165;&#x57FA;&#x672C;&#x7684;&#x5DE5;&#x5382;&#x5B58;&#x50A8;&#x7C7B;"><a href="#&#x9996;&#x5148;-&#x5F15;&#x5165;&#x57FA;&#x672C;&#x7684;&#x5DE5;&#x5382;&#x5B58;&#x50A8;&#x7C7B;" class="headerlink" title="&#x9996;&#x5148;,&#x5F15;&#x5165;&#x57FA;&#x672C;&#x7684;&#x5DE5;&#x5382;&#x5B58;&#x50A8;&#x7C7B;"></a>&#x9996;&#x5148;,&#x5F15;&#x5165;&#x57FA;&#x672C;&#x7684;&#x5DE5;&#x5382;&#x5B58;&#x50A8;&#x7C7B;</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.atom.common.spring.AbstractBaseLogger;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseHandlerFactory</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">AbstractBaseLogger</span> {</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, T&gt; handlers = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseHandlerFactory</span><span class="params">()</span> {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">register</span><span class="params">(String key, T handler)</span> {</span><br><span class="line">        <span class="built_in">this</span>.handlers.put(key, handler);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">get</span><span class="params">(String key)</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.handlers.get(key);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">exist</span><span class="params">(String key)</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.handlers.containsKey(key) ? <span class="built_in">this</span>.handlers.get(key) : <span class="built_in">this</span>.getDefaultHandler(key);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">del</span><span class="params">(String key)</span> {</span><br><span class="line">        <span class="built_in">this</span>.handlers.remove(key);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> T <span class="title function_">getDefaultHandler</span><span class="params">(String key)</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;String&gt; <span class="title function_">keys</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.handlers.keySet();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> T <span class="title function_">getDefaultHandler</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h3 id="&#x5EFA;&#x7ACB;&#x5DE5;&#x5382;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x89C4;&#x8303;"><a href="#&#x5EFA;&#x7ACB;&#x5DE5;&#x5382;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x89C4;&#x8303;" class="headerlink" title="&#x5EFA;&#x7ACB;&#x5DE5;&#x5382;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x89C4;&#x8303;"></a>&#x5EFA;&#x7ACB;&#x5DE5;&#x5382;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x89C4;&#x8303;</h3><p>&#x8BA9;&#x4ED6;&#x4EEC;&#x90FD;&#x5B9E;&#x73B0;&#x8BE5;&#x65B9;&#x6CD5;&#x8FBE;&#x5230;&#x591A;&#x6001;&#x8C03;&#x7528;&#x7684;&#x76EE;&#x7684;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sso.server.model.user.ThirdUserLoginRes;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@program</span>: sso-server</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Ren  blog.igotu.top</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2024-11-04 17:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OauthHandler</span> {</span><br><span class="line"></span><br><span class="line">    ThirdUserLoginRes <span class="title function_">login</span><span class="params">(String code, String redirect_uri)</span>;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x514D;&#x767B;&#x7684;&#x5DE5;&#x5382;&#x7C7B;"><a href="#&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x514D;&#x767B;&#x7684;&#x5DE5;&#x5382;&#x7C7B;" class="headerlink" title="&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x514D;&#x767B;&#x7684;&#x5DE5;&#x5382;&#x7C7B;"></a>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x514D;&#x767B;&#x7684;&#x5DE5;&#x5382;&#x7C7B;</h3><p>&#x5176;&#x4E2D;&#x9759;&#x6001;&#x5B57;&#x7B26;&#x5C5E;&#x6027;&#x53EF;&#x52A0;&#x5728;&#x679A;&#x4E3E;&#x63A5;&#x53E3;&#x4E2D;,&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x662F;&#x65E0;&#x72B6;&#x6001;&#x7684;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.atom.common.factory.BaseHandlerFactory;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@program</span>: sso-server</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Ren  blog.igotu.top</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2024-11-04 17:23</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OauthHandlerFactory</span> <span class="keyword">extends</span> <span class="title class_">BaseHandlerFactory</span>&lt;OauthHandler&gt; {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">GOAUTH_INSTANCE</span> <span class="operator">=</span> <span class="string">&quot;gOauthInstance&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">APPOAUTH_INSTANCE</span> <span class="operator">=</span> <span class="string">&quot;appOauthInstance&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">WXOAUTH_INSTANCE</span> <span class="operator">=</span> <span class="string">&quot;wxOauthInstance&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">OauthHandlerFactory</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OauthHandlerFactory</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> OauthHandlerFactory <span class="title function_">getInstance</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x5B9E;&#x73B0;&#x4ED6;&#x4EEC;&#x7684;&#x5DE5;&#x5382;&#x7C7B;-&#x5E76;&#x5C06;&#x4ED6;&#x4EEC;&#x5BF9;&#x5E94;&#x7684;&#x4EE3;&#x7406;&#x540D;&#x79F0;&#x6CE8;&#x518C;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6CD5;&#x91CC;-&#x5B9E;&#x73B0;&#x89C4;&#x8303;&#x65B9;&#x6CD5;"><a href="#&#x5B9E;&#x73B0;&#x4ED6;&#x4EEC;&#x7684;&#x5DE5;&#x5382;&#x7C7B;-&#x5E76;&#x5C06;&#x4ED6;&#x4EEC;&#x5BF9;&#x5E94;&#x7684;&#x4EE3;&#x7406;&#x540D;&#x79F0;&#x6CE8;&#x518C;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6CD5;&#x91CC;-&#x5B9E;&#x73B0;&#x89C4;&#x8303;&#x65B9;&#x6CD5;" class="headerlink" title="&#x5B9E;&#x73B0;&#x4ED6;&#x4EEC;&#x7684;&#x5DE5;&#x5382;&#x7C7B;,&#x5E76;&#x5C06;&#x4ED6;&#x4EEC;&#x5BF9;&#x5E94;&#x7684;&#x4EE3;&#x7406;&#x540D;&#x79F0;&#x6CE8;&#x518C;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6CD5;&#x91CC;,&#x5B9E;&#x73B0;&#x89C4;&#x8303;&#x65B9;&#x6CD5;"></a>&#x5B9E;&#x73B0;&#x4ED6;&#x4EEC;&#x7684;&#x5DE5;&#x5382;&#x7C7B;,&#x5E76;&#x5C06;&#x4ED6;&#x4EEC;&#x5BF9;&#x5E94;&#x7684;&#x4EE3;&#x7406;&#x540D;&#x79F0;&#x6CE8;&#x518C;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6CD5;&#x91CC;,&#x5B9E;&#x73B0;&#x89C4;&#x8303;&#x65B9;&#x6CD5;</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@program</span>: sso-server</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: Ren  blog.igotu.top</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2024-11-04 17:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppOauthHandlerImpl</span> <span class="keyword">implements</span> <span class="title class_">OauthHandler</span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4F7F;&#x7528;&#x6B64;init&#x521D;&#x59CB;&#x5316;,&#x5C06;&#x5DE5;&#x5382;&#x7C7B;&#x7684;&#x8C03;&#x7528;&#x540D;&#x79F0;&#x6CE8;&#x518C;&#x8FDB;&#x5DE5;&#x5382;&#x5185;&#x5B58;&#x5B58;&#x50A8;&#x4E2D;</span></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> {</span><br><span class="line">        OauthHandlerFactory.getInstance().register(OauthHandlerFactory.APPOAUTH_INSTANCE, <span class="built_in">this</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x8BE5;&#x65B9;&#x6CD5;&#x4E2D;&#x5B9E;&#x73B0;&#x767B;&#x5F55;&#x7684;&#x4E1A;&#x52A1;</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ThirdUserLoginRes <span class="title function_">login</span><span class="params">(String code, String returnUri)</span> {</span><br><span class="line">        <span class="comment">// xxx...</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x8BE5;&#x5DE5;&#x5382;&#x7C7B;&#x591A;&#x6001;&#x89C4;&#x8303;&#x5316;&#x7684;&#x8C03;&#x7528;-&#x4E0D;&#x540C;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x7684;&#x767B;&#x5F55;&#x4E1A;&#x52A1;"><a href="#&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x8BE5;&#x5DE5;&#x5382;&#x7C7B;&#x591A;&#x6001;&#x89C4;&#x8303;&#x5316;&#x7684;&#x8C03;&#x7528;-&#x4E0D;&#x540C;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x7684;&#x767B;&#x5F55;&#x4E1A;&#x52A1;" class="headerlink" title="&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x8BE5;&#x5DE5;&#x5382;&#x7C7B;&#x591A;&#x6001;&#x89C4;&#x8303;&#x5316;&#x7684;&#x8C03;&#x7528;,&#x4E0D;&#x540C;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x7684;&#x767B;&#x5F55;&#x4E1A;&#x52A1;"></a>&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x8BE5;&#x5DE5;&#x5382;&#x7C7B;&#x591A;&#x6001;&#x89C4;&#x8303;&#x5316;&#x7684;&#x8C03;&#x7528;,&#x4E0D;&#x540C;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x7684;&#x767B;&#x5F55;&#x4E1A;&#x52A1;</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/oauth&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginOAuthController</span> <span class="keyword">extends</span> <span class="title class_">BaseController</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;${oauth.app_redirect_uri}&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String appReturnUri;</span><br><span class="line">    <span class="meta">@Value(&quot;${oauth.gserver_redirect_uri}&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String gServerReturnUri;</span><br><span class="line">    <span class="meta">@Value(&quot;${oauth.wechat_redirect_uri}&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String wechatReturnUri;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/callback/{soft}&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">callbackCenter</span><span class="params">(<span class="meta">@PathVariable(&quot;soft&quot;)</span> String soft, <span class="meta">@RequestParam(&quot;code&quot;)</span> String code, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="comment">// &#x6536;&#x5230;&#x7684;&#x6388;&#x6743;&#x7801;</span></span><br><span class="line">        log.info(<span class="string">&quot;Received authorization code: &quot;</span> + code);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (soft) {</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;app&quot;</span>:</span><br><span class="line">                response.sendRedirect(</span><br><span class="line">                        OauthHandlerFactory.getInstance()</span><br><span class="line">                                .exist(OauthHandlerFactory.APPOAUTH_INSTANCE)</span><br><span class="line">                                .login(code, appReturnUri).getUrl());</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;server&quot;</span>:</span><br><span class="line">                response.sendRedirect(</span><br><span class="line">                        OauthHandlerFactory.getInstance()</span><br><span class="line">                                .exist(OauthHandlerFactory.GOAUTH_INSTANCE)</span><br><span class="line">                                .login(code, gServerReturnUri).getUrl());</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;wechat&quot;</span>:</span><br><span class="line">                response.sendRedirect(</span><br><span class="line">                        OauthHandlerFactory.getInstance()</span><br><span class="line">                                .exist(OauthHandlerFactory.WXOAUTH_INSTANCE)</span><br><span class="line">                                .login(code, wechatReturnUri).getUrl());</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ResultCode.PARAMS_NOT_EXIST);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>后端</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>使用JWT进行权限检测</title>
    <url>/2024/09/02/%E4%BD%BF%E7%94%A8JWT%E8%BF%9B%E8%A1%8C%E6%9D%83%E9%99%90%E6%A0%A1%E9%AA%8C/</url>
    <content><![CDATA[<h1 id="&#x4F7F;&#x7528;JWT&#x8FDB;&#x884C;&#x6743;&#x9650;&#x68C0;&#x6D4B;"><a href="#&#x4F7F;&#x7528;JWT&#x8FDB;&#x884C;&#x6743;&#x9650;&#x68C0;&#x6D4B;" class="headerlink" title="&#x4F7F;&#x7528;JWT&#x8FDB;&#x884C;&#x6743;&#x9650;&#x68C0;&#x6D4B;"></a>&#x4F7F;&#x7528;JWT&#x8FDB;&#x884C;&#x6743;&#x9650;&#x68C0;&#x6D4B;</h1><h2 id="1-&#x9996;&#x5148;&#x5BFC;&#x5165;&#x5B83;&#x7684;&#x4F9D;&#x8D56;"><a href="#1-&#x9996;&#x5148;&#x5BFC;&#x5165;&#x5B83;&#x7684;&#x4F9D;&#x8D56;" class="headerlink" title="1 ,&#x9996;&#x5148;&#x5BFC;&#x5165;&#x5B83;&#x7684;&#x4F9D;&#x8D56;"></a>1 ,&#x9996;&#x5148;&#x5BFC;&#x5165;&#x5B83;&#x7684;&#x4F9D;&#x8D56;</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.dev33<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sa-token-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.dev33<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sa-token-jwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-&#x5B9E;&#x73B0;StpInterface&#x63A5;&#x53E3;-&#x5E76;&#x5C06;&#x5F53;&#x524D;&#x767B;&#x5F55;&#x7528;&#x6237;&#x5177;&#x6709;&#x7684;&#x89D2;&#x8272;&#x548C;&#x6743;&#x9650;&#x8D4B;&#x4E88;"><a href="#2-&#x5B9E;&#x73B0;StpInterface&#x63A5;&#x53E3;-&#x5E76;&#x5C06;&#x5F53;&#x524D;&#x767B;&#x5F55;&#x7528;&#x6237;&#x5177;&#x6709;&#x7684;&#x89D2;&#x8272;&#x548C;&#x6743;&#x9650;&#x8D4B;&#x4E88;" class="headerlink" title="2 ,&#x5B9E;&#x73B0;StpInterface&#x63A5;&#x53E3;,&#x5E76;&#x5C06;&#x5F53;&#x524D;&#x767B;&#x5F55;&#x7528;&#x6237;&#x5177;&#x6709;&#x7684;&#x89D2;&#x8272;&#x548C;&#x6743;&#x9650;&#x8D4B;&#x4E88;"></a>2 ,&#x5B9E;&#x73B0;StpInterface&#x63A5;&#x53E3;,&#x5E76;&#x5C06;&#x5F53;&#x524D;&#x767B;&#x5F55;&#x7528;&#x6237;&#x5177;&#x6709;&#x7684;&#x89D2;&#x8272;&#x548C;&#x6743;&#x9650;&#x8D4B;&#x4E88;</h2><p>&#x5B9E;&#x73B0;&#x4E86; StpInterface&#x63A5;&#x53E3;&#x7684; SaPermissionImpl&#x7C7B;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.firerock.core.satoken;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.stp.StpInterface;</span><br><span class="line"><span class="keyword">import</span> com.firerock.common.base.domain.model.LoginUser;</span><br><span class="line"><span class="keyword">import</span> com.firerock.common.helper.LoginHelper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaPermissionImpl</span> <span class="keyword">implements</span> <span class="title class_">StpInterface</span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x83B7;&#x53D6;&#x83DC;&#x5355;&#x6743;&#x9650;&#x5217;&#x8868;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getPermissionList</span><span class="params">(Object loginId, String loginType)</span> {</span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> LoginHelper.getLoginUser();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(loginUser.getMenuPermission());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x83B7;&#x53D6;&#x89D2;&#x8272;&#x6743;&#x9650;&#x5217;&#x8868;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getRoleList</span><span class="params">(Object loginId, String loginType)</span> {</span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> LoginHelper.getLoginUser();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(loginUser.getMenuPermission());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="2-1-loginHelper&#x5DE5;&#x5177;&#x7C7B;-&#x6B64;&#x5DE5;&#x5177;&#x7C7B;&#x9700;&#x8981;&#x5728;&#x7528;&#x6237;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x4E2D;&#x8BBE;&#x5B9A;login-&#x6216;loginByDevice"><a href="#2-1-loginHelper&#x5DE5;&#x5177;&#x7C7B;-&#x6B64;&#x5DE5;&#x5177;&#x7C7B;&#x9700;&#x8981;&#x5728;&#x7528;&#x6237;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x4E2D;&#x8BBE;&#x5B9A;login-&#x6216;loginByDevice" class="headerlink" title="2-1 ,loginHelper&#x5DE5;&#x5177;&#x7C7B; (&#x6B64;&#x5DE5;&#x5177;&#x7C7B;&#x9700;&#x8981;&#x5728;&#x7528;&#x6237;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x4E2D;&#x8BBE;&#x5B9A;login()&#x6216;loginByDevice() )"></a>2-1 ,loginHelper&#x5DE5;&#x5177;&#x7C7B; (&#x6B64;&#x5DE5;&#x5177;&#x7C7B;&#x9700;&#x8981;&#x5728;&#x7528;&#x6237;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x4E2D;&#x8BBE;&#x5B9A;login()&#x6216;loginByDevice() )</h3><p>loginHelper&#x5DE5;&#x5177;&#x7C7B;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.firerock.common.helper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.context.SaHolder;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.context.model.SaStorage;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.stp.SaLoginModel;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.stp.StpUtil;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.convert.Convert;</span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.ObjectUtil;</span><br><span class="line"><span class="keyword">import</span> com.firerock.common.base.domain.model.LoginUser;</span><br><span class="line"><span class="keyword">import</span> com.firerock.common.constant.UserConstants;</span><br><span class="line"><span class="keyword">import</span> com.firerock.common.enums.DeviceType;</span><br><span class="line"><span class="keyword">import</span> com.firerock.common.enums.UserType;</span><br><span class="line"><span class="keyword">import</span> lombok.AccessLevel;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@NoArgsConstructor(access = AccessLevel.PRIVATE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginHelper</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">LOGIN_USER_KEY</span> <span class="operator">=</span> <span class="string">&quot;loginUser&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">USER_KEY</span> <span class="operator">=</span> <span class="string">&quot;userId&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x767B;&#x5F55;&#x7CFB;&#x7EDF;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> loginUser &#x767B;&#x5F55;&#x7528;&#x6237;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">(LoginUser loginUser)</span> {</span><br><span class="line">        loginByDevice(loginUser, <span class="literal">null</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x767B;&#x5F55;&#x7CFB;&#x7EDF; &#x57FA;&#x4E8E; &#x8BBE;&#x5907;&#x7C7B;&#x578B;</span></span><br><span class="line"><span class="comment">     * &#x9488;&#x5BF9;&#x76F8;&#x540C;&#x7528;&#x6237;&#x4F53;&#x7CFB;&#x4E0D;&#x540C;&#x8BBE;&#x5907;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> loginUser &#x767B;&#x5F55;&#x7528;&#x6237;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">loginByDevice</span><span class="params">(LoginUser loginUser, DeviceType deviceType)</span> {</span><br><span class="line">        <span class="type">SaStorage</span> <span class="variable">storage</span> <span class="operator">=</span> SaHolder.getStorage();</span><br><span class="line">        storage.set(LOGIN_USER_KEY, loginUser);</span><br><span class="line">        storage.set(USER_KEY, loginUser.getUserId());</span><br><span class="line">        <span class="type">SaLoginModel</span> <span class="variable">model</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SaLoginModel</span>();</span><br><span class="line">        <span class="keyword">if</span> (ObjectUtil.isNotNull(deviceType)) {</span><br><span class="line">            model.setDevice(deviceType.getDevice());</span><br><span class="line">        }</span><br><span class="line">        StpUtil.login(loginUser.getLoginId(), model.setExtra(USER_KEY, loginUser.getUserId()));</span><br><span class="line">        StpUtil.getTokenSession().set(LOGIN_USER_KEY, loginUser);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x83B7;&#x53D6;&#x7528;&#x6237;(&#x591A;&#x7EA7;&#x7F13;&#x5B58;)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LoginUser <span class="title function_">getLoginUser</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> (LoginUser) SaHolder.getStorage().get(LOGIN_USER_KEY);</span><br><span class="line">        <span class="keyword">if</span> (loginUser != <span class="literal">null</span>) {</span><br><span class="line">            <span class="keyword">return</span> loginUser;</span><br><span class="line">        }</span><br><span class="line">        loginUser = (LoginUser) StpUtil.getTokenSession().get(LOGIN_USER_KEY);</span><br><span class="line">        SaHolder.getStorage().set(LOGIN_USER_KEY, loginUser);</span><br><span class="line">        <span class="keyword">return</span> loginUser;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x83B7;&#x53D6;&#x7528;&#x6237;&#x57FA;&#x4E8E;token</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LoginUser <span class="title function_">getLoginUser</span><span class="params">(String token)</span> {</span><br><span class="line">        <span class="keyword">return</span> (LoginUser) StpUtil.getTokenSessionByToken(token).get(LOGIN_USER_KEY);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x83B7;&#x53D6;&#x7528;&#x6237;id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title function_">getUserId</span><span class="params">()</span> {</span><br><span class="line">        Long userId;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            userId = Convert.toLong(SaHolder.getStorage().get(USER_KEY));</span><br><span class="line">            <span class="keyword">if</span> (ObjectUtil.isNull(userId)) {</span><br><span class="line">                userId = Convert.toLong(StpUtil.getExtra(USER_KEY));</span><br><span class="line">                SaHolder.getStorage().set(USER_KEY, userId);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> userId;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x83B7;&#x53D6;&#x90E8;&#x95E8;ID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title function_">getDeptId</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> getLoginUser().getDeptId();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x83B7;&#x53D6;&#x7528;&#x6237;&#x8D26;&#x6237;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getUsername</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> getLoginUser().getUsername();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getNickName</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> getLoginUser().getNickName();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x83B7;&#x53D6;&#x7528;&#x6237;&#x7C7B;&#x578B;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> UserType <span class="title function_">getUserType</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">loginId</span> <span class="operator">=</span> StpUtil.getLoginIdAsString();</span><br><span class="line">        <span class="keyword">return</span> UserType.getUserType(loginId);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x662F;&#x5426;&#x4E3A;&#x7BA1;&#x7406;&#x5458;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId &#x7528;&#x6237;ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#x7ED3;&#x679C;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isAdmin</span><span class="params">(Long userId)</span> {</span><br><span class="line">        <span class="keyword">return</span> UserConstants.ADMIN_ID.equals(userId);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isAdmin</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> isAdmin(getUserId());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="3-&#x7528;&#x6237;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x5904;-&#x4F7F;&#x7528;LoginHelper&#x5DE5;&#x5177;&#x7C7B;-&#x5C06;&#x7528;&#x6237;&#x767B;&#x5F55;&#x4FE1;&#x606F;&#x63D0;&#x4EA4;&#x7ED9;Stp"><a href="#3-&#x7528;&#x6237;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x5904;-&#x4F7F;&#x7528;LoginHelper&#x5DE5;&#x5177;&#x7C7B;-&#x5C06;&#x7528;&#x6237;&#x767B;&#x5F55;&#x4FE1;&#x606F;&#x63D0;&#x4EA4;&#x7ED9;Stp" class="headerlink" title="3 ,&#x7528;&#x6237;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x5904;, &#x4F7F;&#x7528;LoginHelper&#x5DE5;&#x5177;&#x7C7B;,&#x5C06;&#x7528;&#x6237;&#x767B;&#x5F55;&#x4FE1;&#x606F;&#x63D0;&#x4EA4;&#x7ED9;Stp"></a>3 ,&#x7528;&#x6237;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x5904;, &#x4F7F;&#x7528;LoginHelper&#x5DE5;&#x5177;&#x7C7B;,&#x5C06;&#x7528;&#x6237;&#x767B;&#x5F55;&#x4FE1;&#x606F;&#x63D0;&#x4EA4;&#x7ED9;Stp</h2><p>sysLoginController&#x767B;&#x5F55;&#x63A7;&#x5236;&#x7C7B;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x767B;&#x5F55;&#x9A8C;&#x8BC1;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> username &#x7528;&#x6237;&#x540D;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> password &#x5BC6;&#x7801;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> code     &#x9A8C;&#x8BC1;&#x7801;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> uuid     &#x552F;&#x4E00;&#x6807;&#x8BC6;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#x7ED3;&#x679C;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(String username, String password, String code, String uuid)</span> {</span><br><span class="line">    <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> ServletUtils.getRequest();</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">captchaEnabled</span> <span class="operator">=</span> configService.selectCaptchaEnabled();</span><br><span class="line">    <span class="comment">// &#x6B64;&#x6B65;&#x662F;&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x5E76;&#x8FD4;&#x56DE;&#x5B58;&#x5728;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;</span></span><br><span class="line">    <span class="type">SysUser</span> <span class="variable">user</span> <span class="operator">=</span> loadUserByUsername(username);</span><br><span class="line">    checkLogin(LoginType.PASSWORD, username, () -&gt; !BCrypt.checkpw(password, user.getPassword()));</span><br><span class="line">    <span class="comment">// &#x6B64;&#x5904;&#x53EF;&#x6839;&#x636E;&#x767B;&#x5F55;&#x7528;&#x6237;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x540C; &#x81EA;&#x884C;&#x521B;&#x5EFA; loginUser</span></span><br><span class="line">    <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> buildLoginUser(user);</span><br><span class="line">    <span class="comment">// &#x751F;&#x6210;token</span></span><br><span class="line">    LoginHelper.loginByDevice(loginUser, DeviceType.PC);</span><br><span class="line"></span><br><span class="line">    recordLogininfor(username, Constants.LOGIN_SUCCESS, MessageUtils.message(<span class="string">&quot;user.login.success&quot;</span>));</span><br><span class="line">    recordLoginInfo(user.getUserId(), username);</span><br><span class="line">    <span class="keyword">return</span> StpUtil.getTokenValue();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> SysUser <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> {</span><br><span class="line">    <span class="type">SysUser</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectOne(<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;SysUser&gt;()</span><br><span class="line">            .select(SysUser::getUserName, SysUser::getStatus)</span><br><span class="line">            .eq(SysUser::getUserName, username));</span><br><span class="line">    <span class="keyword">if</span> (ObjectUtil.isNull(user)) {</span><br><span class="line">        log.info(<span class="string">&quot;&#x767B;&#x5F55;&#x7528;&#x6237;&#xFF1A;{} &#x4E0D;&#x5B58;&#x5728;.&quot;</span>, username);</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UserException</span>(<span class="string">&quot;user.not.exists&quot;</span>, username);</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (UserStatus.DISABLE.getCode().equals(user.getStatus())) {</span><br><span class="line">        log.info(<span class="string">&quot;&#x767B;&#x5F55;&#x7528;&#x6237;&#xFF1A;{} &#x5DF2;&#x88AB;&#x505C;&#x7528;.&quot;</span>, username);</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UserException</span>(<span class="string">&quot;user.blocked&quot;</span>, username);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> userMapper.selectUserByUserName(username);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x767B;&#x5F55;&#x6821;&#x9A8C;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">checkLogin</span><span class="params">(LoginType loginType, String username, Supplier&lt;Boolean&gt; supplier)</span> {</span><br><span class="line">    <span class="type">String</span> <span class="variable">errorKey</span> <span class="operator">=</span> CacheConstants.PWD_ERR_CNT_KEY + username;</span><br><span class="line">    <span class="type">String</span> <span class="variable">loginFail</span> <span class="operator">=</span> Constants.LOGIN_FAIL;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x83B7;&#x53D6;&#x7528;&#x6237;&#x767B;&#x5F55;&#x9519;&#x8BEF;&#x6B21;&#x6570;(&#x53EF;&#x81EA;&#x5B9A;&#x4E49;&#x9650;&#x5236;&#x7B56;&#x7565; &#x4F8B;&#x5982;: key + username + ip)</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">errorNumber</span> <span class="operator">=</span> RedisUtils.getCacheObject(errorKey);</span><br><span class="line">    <span class="comment">// &#x9501;&#x5B9A;&#x65F6;&#x95F4;&#x5185;&#x767B;&#x5F55; &#x5219;&#x8E22;&#x51FA;</span></span><br><span class="line">    <span class="keyword">if</span> (ObjectUtil.isNotNull(errorNumber) &amp;&amp; errorNumber.equals(maxRetryCount)) {</span><br><span class="line">        recordLogininfor(username, loginFail, MessageUtils.message(loginType.getRetryLimitExceed(), maxRetryCount, lockTime));</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UserException</span>(loginType.getRetryLimitExceed(), maxRetryCount, lockTime);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x6839;&#x636E;login()&#x4E2D;,&#x8C03;&#x7528;checkLogin()&#x65F6;&#x7684; () -&gt; !BCrypt.checkpw(password, user.getPassword()) &#x5224;&#x65AD;&#x7528;&#x6237;&#x5BC6;&#x7801;&#x662F;&#x5426;&#x6B63;&#x786E;, &#x6DFB;&#x52A0;&#x7528;&#x6237;&#x65F6;&#x9700;&#x8981;&#x4F7F;&#x7528;Bcrypt&#x8FDB;&#x884C;&#x52A0;&#x5BC6; user.setPassword(BCrypt.hashpw(user.getPassword())), &#x5982;&#x679C;&#x5BC6;&#x7801;&#x9519;&#x8BEF;&#x5C31;&#x8FDB;&#x5165;</span></span><br><span class="line">    <span class="keyword">if</span> (supplier.get()) {</span><br><span class="line">        <span class="comment">// &#x662F;&#x5426;&#x7B2C;&#x4E00;&#x6B21;</span></span><br><span class="line">        errorNumber = ObjectUtil.isNull(errorNumber) ? <span class="number">1</span> : errorNumber + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// &#x8FBE;&#x5230;&#x89C4;&#x5B9A;&#x9519;&#x8BEF;&#x6B21;&#x6570; &#x5219;&#x9501;&#x5B9A;&#x767B;&#x5F55;</span></span><br><span class="line">        <span class="keyword">if</span> (errorNumber.equals(maxRetryCount)) {</span><br><span class="line">            RedisUtils.setCacheObject(errorKey, errorNumber, Duration.ofMinutes(lockTime));</span><br><span class="line">            recordLogininfor(username, loginFail, MessageUtils.message(loginType.getRetryLimitExceed(), maxRetryCount, lockTime));</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UserException</span>(loginType.getRetryLimitExceed(), maxRetryCount, lockTime);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="comment">// &#x672A;&#x8FBE;&#x5230;&#x89C4;&#x5B9A;&#x9519;&#x8BEF;&#x6B21;&#x6570; &#x5219;&#x9012;&#x589E;</span></span><br><span class="line">            RedisUtils.setCacheObject(errorKey, errorNumber);</span><br><span class="line">            recordLogininfor(username, loginFail, MessageUtils.message(loginType.getRetryLimitCount(), errorNumber));</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UserException</span>(loginType.getRetryLimitCount(), errorNumber);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x767B;&#x5F55;&#x6210;&#x529F; &#x6E05;&#x7A7A;&#x9519;&#x8BEF;&#x6B21;&#x6570;</span></span><br><span class="line">    RedisUtils.deleteObject(errorKey);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x8BB0;&#x5F55;&#x767B;&#x5F55;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> username &#x7528;&#x6237;&#x540D;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> status   &#x72B6;&#x6001;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> message  &#x6D88;&#x606F;&#x5185;&#x5BB9;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">recordLogininfor</span><span class="params">(String username, String status, String message)</span> {</span><br><span class="line">    <span class="type">LoginInEvent</span> <span class="variable">loginInEvent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LoginInEvent</span>();</span><br><span class="line">    loginInEvent.setUsername(username);</span><br><span class="line">    loginInEvent.setStatus(status);</span><br><span class="line">    loginInEvent.setMessage(message);</span><br><span class="line">    loginInEvent.setRequest(ServletUtils.getRequest());</span><br><span class="line">    SpringUtils.context().publishEvent(loginInEvent);</span><br><span class="line">}</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x8BB0;&#x5F55;&#x767B;&#x5F55;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> userId &#x7528;&#x6237;ID</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">recordLoginInfo</span><span class="params">(Long userId, String username)</span> {</span><br><span class="line">    <span class="type">SysUser</span> <span class="variable">sysUser</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SysUser</span>();</span><br><span class="line">    sysUser.setUserId(userId);</span><br><span class="line">    sysUser.setLoginIp(ServletUtils.getClientIP());</span><br><span class="line">    sysUser.setLoginDate(DateUtils.getNowDate());</span><br><span class="line">    sysUser.setUpdateBy(username);</span><br><span class="line">    userMapper.updateById(sysUser);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="4-sa-token&#x7684;&#x5168;&#x5C40;&#x62E6;&#x622A;&#x5668;"><a href="#4-sa-token&#x7684;&#x5168;&#x5C40;&#x62E6;&#x622A;&#x5668;" class="headerlink" title="4 ,sa-token&#x7684;&#x5168;&#x5C40;&#x62E6;&#x622A;&#x5668;"></a>4 ,sa-token&#x7684;&#x5168;&#x5C40;&#x62E6;&#x622A;&#x5668;</h2><h3 id="&#x82E5;&#x8981;&#x4F7F;&#x7528;-SaCheckPermission-&#x201C;system-role-query&#x201D;-&#x6216;-SaCheckRole-&#x201C;admin&#x201D;-&#x5219;&#x9700;&#x8981;&#x6CE8;&#x518C;sa-token&#x7684;&#x5168;&#x5C40;&#x62E6;&#x622A;&#x5668;"><a href="#&#x82E5;&#x8981;&#x4F7F;&#x7528;-SaCheckPermission-&#x201C;system-role-query&#x201D;-&#x6216;-SaCheckRole-&#x201C;admin&#x201D;-&#x5219;&#x9700;&#x8981;&#x6CE8;&#x518C;sa-token&#x7684;&#x5168;&#x5C40;&#x62E6;&#x622A;&#x5668;" class="headerlink" title="- &#x82E5;&#x8981;&#x4F7F;&#x7528;@SaCheckPermission(&#x201C;system:role:query&#x201D;)&#x6216;@SaCheckRole(&#x201C;admin&#x201D;),&#x5219;&#x9700;&#x8981;&#x6CE8;&#x518C;sa-token&#x7684;&#x5168;&#x5C40;&#x62E6;&#x622A;&#x5668;"></a>- &#x82E5;&#x8981;&#x4F7F;&#x7528;@SaCheckPermission(&#x201C;system:role:query&#x201D;)&#x6216;@SaCheckRole(&#x201C;admin&#x201D;),&#x5219;&#x9700;&#x8981;&#x6CE8;&#x518C;sa-token&#x7684;&#x5168;&#x5C40;&#x62E6;&#x622A;&#x5668;</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.firerock.core.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.dao.SaTokenDao;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.interceptor.SaInterceptor;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.jwt.StpLogicJwtForSimple;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.router.SaRouter;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.stp.StpInterface;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.stp.StpLogic;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.stp.StpUtil;</span><br><span class="line"><span class="keyword">import</span> com.firerock.common.utils.SpringUtils;</span><br><span class="line"><span class="keyword">import</span> com.firerock.core.config.properties.SecurityProperties;</span><br><span class="line"><span class="keyword">import</span> com.firerock.core.handler.AllUrlHandler;</span><br><span class="line"><span class="keyword">import</span> com.firerock.core.satoken.PlusSaTokenDao;</span><br><span class="line"><span class="keyword">import</span> com.firerock.core.satoken.SaPermissionImpl;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaTokenConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SecurityProperties securityProperties;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x6CE8;&#x518C;sa-token&#x7684;&#x62E6;&#x622A;&#x5668;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> {</span><br><span class="line">        <span class="comment">// &#x6CE8;&#x518C;&#x8DEF;&#x7531;&#x62E6;&#x622A;&#x5668;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;&#x9A8C;&#x8BC1;&#x89C4;&#x5219;</span></span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">SaInterceptor</span>(handler -&gt; {</span><br><span class="line">                    <span class="type">AllUrlHandler</span> <span class="variable">allUrlHandler</span> <span class="operator">=</span> SpringUtils.getBean(AllUrlHandler.class);</span><br><span class="line">                    <span class="comment">// &#x767B;&#x5F55;&#x9A8C;&#x8BC1; -- &#x6392;&#x9664;&#x591A;&#x4E2A;&#x8DEF;&#x5F84;</span></span><br><span class="line">                    SaRouter</span><br><span class="line">                            <span class="comment">// &#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684;</span></span><br><span class="line">                            .match(allUrlHandler.getUrls())</span><br><span class="line">                            <span class="comment">// &#x5BF9;&#x672A;&#x6392;&#x9664;&#x7684;&#x8DEF;&#x5F84;&#x8FDB;&#x884C;&#x68C0;&#x67E5;</span></span><br><span class="line">                            .check(() -&gt; {</span><br><span class="line">                                <span class="comment">// &#x68C0;&#x67E5;&#x662F;&#x5426;&#x767B;&#x5F55; &#x662F;&#x5426;&#x6709;token</span></span><br><span class="line">                                StpUtil.checkLogin();</span><br><span class="line">                            });</span><br><span class="line">                })).addPathPatterns(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                <span class="comment">// &#x6392;&#x9664;&#x4E0D;&#x9700;&#x8981;&#x62E6;&#x622A;&#x7684;&#x8DEF;&#x5F84;</span></span><br><span class="line">                .excludePathPatterns(securityProperties.getExcludes());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> StpLogic <span class="title function_">getStpLogicJwt</span><span class="params">()</span> {</span><br><span class="line">        <span class="comment">// Sa-Token &#x6574;&#x5408; jwt (&#x7B80;&#x5355;&#x6A21;&#x5F0F;)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">StpLogicJwtForSimple</span>();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x6743;&#x9650;&#x63A5;&#x53E3;&#x5B9E;&#x73B0;(&#x4F7F;&#x7528;bean&#x6CE8;&#x5165;&#x65B9;&#x4FBF;&#x7528;&#x6237;&#x66FF;&#x6362;)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> StpInterface <span class="title function_">stpInterface</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SaPermissionImpl</span>();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x81EA;&#x5B9A;&#x4E49;dao&#x5C42;&#x5B58;&#x50A8;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SaTokenDao <span class="title function_">saTokenDao</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PlusSaTokenDao</span>();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="5-&#x4F7F;&#x7528;&#x6743;&#x9650;&#x6CE8;&#x89E3;&#x8FDB;&#x884C;&#x6821;&#x9A8C;"><a href="#5-&#x4F7F;&#x7528;&#x6743;&#x9650;&#x6CE8;&#x89E3;&#x8FDB;&#x884C;&#x6821;&#x9A8C;" class="headerlink" title="5 ,&#x4F7F;&#x7528;&#x6743;&#x9650;&#x6CE8;&#x89E3;&#x8FDB;&#x884C;&#x6821;&#x9A8C;"></a>5 ,&#x4F7F;&#x7528;&#x6743;&#x9650;&#x6CE8;&#x89E3;&#x8FDB;&#x884C;&#x6821;&#x9A8C;</h2><h3 id="SaCheckPermission"><a href="#SaCheckPermission" class="headerlink" title="@SaCheckPermission"></a>@SaCheckPermission</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="comment">// @SaCheckPermission(&quot;member:list:add&quot;) &#x6CE8;&#x89E3;&#x8868;&#x660E;&#x6821;&#x9A8C;&#x5F53;&#x524D;&#x7528;&#x6237;&#x7684;PermissionList&#x4E2D;&#x662F;&#x5426;&#x6709; &quot;member:list:add&#x8FD9;&#x4E2A;&#x6743;&#x9650;&#x5B57;&#x6BB5;</span></span><br><span class="line"><span class="meta">@SaCheckPermission(&quot;member:list:add&quot;)</span></span><br><span class="line">   <span class="meta">@Log(title = &quot;&#x65B0;&#x589E;&#x4EBA;&#x5458;&quot;, businessType = BusinessType.INSERT)</span></span><br><span class="line">   <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> Result&lt;Void&gt; <span class="title function_">addMember</span><span class="params">(<span class="meta">@RequestBody</span> SysUser user)</span> {</span><br><span class="line">       <span class="keyword">return</span> toAjax(result);</span><br><span class="line">   }</span><br></pre></td></tr></table></figure>

<h3 id="SaCheckRole"><a href="#SaCheckRole" class="headerlink" title="@SaCheckRole"></a>@SaCheckRole</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="comment">// @RoleList(&quot;admin&quot;) &#x6CE8;&#x89E3;&#x8868;&#x660E;&#x6821;&#x9A8C;&#x5F53;&#x524D;&#x7528;&#x6237;&#x7684;RoleList&#x4E2D;&#x662F;&#x5426;&#x6709; &quot;admin&quot;&#x8FD9;&#x4E2A;&#x89D2;&#x8272;&#x5B57;&#x6BB5;</span></span><br><span class="line"><span class="meta">@SaCheckRole(&quot;admin&quot;)</span></span><br><span class="line">   <span class="meta">@Log(title = &quot;&#x65B0;&#x589E;&#x4EBA;&#x5458;&quot;, businessType = BusinessType.INSERT)</span></span><br><span class="line">   <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> Result&lt;Void&gt; <span class="title function_">addMember</span><span class="params">(<span class="meta">@RequestBody</span> SysUser user)</span> {</span><br><span class="line">       <span class="keyword">return</span> toAjax(result);</span><br><span class="line">   }</span><br></pre></td></tr></table></figure>

<h3 id="SaCheckLogin"><a href="#SaCheckLogin" class="headerlink" title="@SaCheckLogin"></a>@SaCheckLogin</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="comment">// @SaCheckLogin &#x6CE8;&#x89E3;&#x8868;&#x660E;&#x6821;&#x9A8C;&#x5F53;&#x524D;&#x7528;&#x6237;&#x662F;&#x5426;&#x767B;&#x5F55;,&#x7531;&#x7528;&#x6237;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x5904;&#x8C03;&#x7528;LoginHelper.loginByDevice(loginUser, DeviceType.PC);&#x4E2D;&#x7684;StpUtil.login(loginUser.getLoginId(), model.setExtra(USER_KEY, loginUser.getUserId()));&#x8FDB;&#x884C;&#x7528;&#x6237;&#x767B;&#x5F55;&#x6CE8;&#x518C;</span></span><br><span class="line"><span class="meta">@SaCheckLogin</span></span><br><span class="line">   <span class="meta">@Log(title = &quot;&#x65B0;&#x589E;&#x4EBA;&#x5458;&quot;, businessType = BusinessType.INSERT)</span></span><br><span class="line">   <span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> Result&lt;Void&gt; <span class="title function_">addMember</span><span class="params">(<span class="meta">@RequestBody</span> SysUser user)</span> {</span><br><span class="line">       <span class="keyword">return</span> toAjax(result);</span><br><span class="line">   }</span><br></pre></td></tr></table></figure>

<h2 id="&#x81F3;&#x6B64;&#x4F7F;&#x7528;JWT&#x505A;&#x6743;&#x9650;&#x6821;&#x9A8C;&#x7684;&#x603B;&#x8FC7;&#x7A0B;&#x8FDB;&#x884C;&#x5B8C;&#x6BD5;"><a href="#&#x81F3;&#x6B64;&#x4F7F;&#x7528;JWT&#x505A;&#x6743;&#x9650;&#x6821;&#x9A8C;&#x7684;&#x603B;&#x8FC7;&#x7A0B;&#x8FDB;&#x884C;&#x5B8C;&#x6BD5;" class="headerlink" title="&#x81F3;&#x6B64;&#x4F7F;&#x7528;JWT&#x505A;&#x6743;&#x9650;&#x6821;&#x9A8C;&#x7684;&#x603B;&#x8FC7;&#x7A0B;&#x8FDB;&#x884C;&#x5B8C;&#x6BD5;"></a>&#x81F3;&#x6B64;&#x4F7F;&#x7528;JWT&#x505A;&#x6743;&#x9650;&#x6821;&#x9A8C;&#x7684;&#x603B;&#x8FC7;&#x7A0B;&#x8FDB;&#x884C;&#x5B8C;&#x6BD5;</h2>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>后端</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>使用apache的POI进行excel操作</title>
    <url>/2024/05/27/apachepoi/</url>
    <content><![CDATA[<h3 id="Apache-POI-&#x662F;Java-&#x9886;&#x57DF;&#x4E2D;&#x53EF;&#x4EE5;&#x64CD;&#x4F5C;World-Excel-PPT&#x6587;&#x4EF6;&#x7684;&#x7C7B;&#x5E93;-&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x751F;&#x6210;&#x62A5;&#x8868;-&#x6570;&#x636E;&#x5904;&#x7406;&#x7B49;"><a href="#Apache-POI-&#x662F;Java-&#x9886;&#x57DF;&#x4E2D;&#x53EF;&#x4EE5;&#x64CD;&#x4F5C;World-Excel-PPT&#x6587;&#x4EF6;&#x7684;&#x7C7B;&#x5E93;-&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x751F;&#x6210;&#x62A5;&#x8868;-&#x6570;&#x636E;&#x5904;&#x7406;&#x7B49;" class="headerlink" title="Apache POI &#x662F;Java &#x9886;&#x57DF;&#x4E2D;&#x53EF;&#x4EE5;&#x64CD;&#x4F5C;World,Excel,PPT&#x6587;&#x4EF6;&#x7684;&#x7C7B;&#x5E93;,&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x751F;&#x6210;&#x62A5;&#x8868;,&#x6570;&#x636E;&#x5904;&#x7406;&#x7B49;."></a><a href="https://poi.apache.org/">Apache POI</a> &#x662F;Java &#x9886;&#x57DF;&#x4E2D;&#x53EF;&#x4EE5;&#x64CD;&#x4F5C;World,Excel,PPT&#x6587;&#x4EF6;&#x7684;&#x7C7B;&#x5E93;,&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x751F;&#x6210;&#x62A5;&#x8868;,&#x6570;&#x636E;&#x5904;&#x7406;&#x7B49;.</h3><h4 id="1-&#x5BFC;&#x5165;apache-POI&#x7684;maven&#x4F9D;&#x8D56;"><a href="#1-&#x5BFC;&#x5165;apache-POI&#x7684;maven&#x4F9D;&#x8D56;" class="headerlink" title="1, &#x5BFC;&#x5165;apache POI&#x7684;maven&#x4F9D;&#x8D56;"></a>1, &#x5BFC;&#x5165;apache POI&#x7684;maven&#x4F9D;&#x8D56;</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.poi/poi --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.poi/poi-ooxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-ooxml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-&#x5728;&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x4E2D;-&#x6D4B;&#x8BD5;excel&#x7684;&#x8BFB;&#x5199;"><a href="#2-&#x5728;&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x4E2D;-&#x6D4B;&#x8BD5;excel&#x7684;&#x8BFB;&#x5199;" class="headerlink" title="2, &#x5728;&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x4E2D;, &#x6D4B;&#x8BD5;excel&#x7684;&#x8BFB;&#x5199;"></a>2, &#x5728;&#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x4E2D;, &#x6D4B;&#x8BD5;excel&#x7684;&#x8BFB;&#x5199;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">POITest</span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x901A;&#x8FC7;&#x521B;&#x5EFA;POI&#x521B;&#x5EFA;excel&#x6587;&#x4EF6;&#x5E76;&#x5199;&#x5165;&#x6587;&#x4EF6;&#x5185;&#x5BB9;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">()</span> {</span><br><span class="line">        <span class="comment">// &#x5728;&#x5185;&#x5B58;&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Excel&#x6587;&#x4EF6;</span></span><br><span class="line">        <span class="type">XSSFWorkbook</span> <span class="variable">excel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XSSFWorkbook</span>();</span><br><span class="line">        <span class="comment">// &#x5728;&#x5185;&#x5B58;&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;sheet&#x9875;</span></span><br><span class="line">        <span class="type">XSSFSheet</span> <span class="variable">sheetInfo1</span> <span class="operator">=</span> excel.createSheet(<span class="string">&quot;info1&quot;</span>);</span><br><span class="line">        <span class="type">XSSFRow</span> <span class="variable">row</span> <span class="operator">=</span> sheetInfo1.createRow(<span class="number">0</span>);</span><br><span class="line">        row.createCell(<span class="number">0</span>).setCellValue(<span class="string">&quot;&#x59D3;&#x540D;-&#x8FD9;&#x662F;&#x7B2C;1&#x884C;&#x7B2C;1&#x683C;&quot;</span>);</span><br><span class="line">        row.createCell(<span class="number">2</span>).setCellValue(<span class="string">&quot;&#x57CE;&#x5E02;-&#x8FD9;&#x662F;&#x7B2C;1&#x884C;&#x7B2C;3&#x683C;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x884C;</span></span><br><span class="line">        <span class="type">XSSFRow</span> <span class="variable">row2</span> <span class="operator">=</span> sheetInfo1.createRow(<span class="number">2</span>);</span><br><span class="line">        row2.createCell(<span class="number">0</span>).setCellValue(<span class="string">&quot;&#x4E09;&#x513F;&quot;</span>);</span><br><span class="line">        row2.createCell(<span class="number">2</span>).setCellValue(<span class="string">&quot;&#x5317;&#x4EAC;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x7684;excel&#x5199;&#x5165;&#x5230;&#x78C1;&#x76D8;&#x4E2D;</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            out = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;G:\\test.xlsx&quot;</span>));</span><br><span class="line">            excel.write(out);</span><br><span class="line">        } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                out.close();</span><br><span class="line">                excel.close();</span><br><span class="line">            } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x8BFB;&#x53D6;excel&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5185;&#x5BB9;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">read</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">XSSFWorkbook</span> <span class="variable">sheets</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// &#x8BFB;&#x53D6;&#x78C1;&#x76D8;&#x4E0A;&#x7684;&#x6587;&#x4EF6;</span></span><br><span class="line">            is = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;G:\\test.xlsx&quot;</span>));</span><br><span class="line">            sheets = <span class="keyword">new</span> <span class="title class_">XSSFWorkbook</span>(is);</span><br><span class="line">            <span class="comment">// &#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x5185;&#x5BB9;</span></span><br><span class="line">            <span class="type">XSSFSheet</span> <span class="variable">sheetAt</span> <span class="operator">=</span> sheets.getSheetAt(<span class="number">0</span>);</span><br><span class="line">            <span class="comment">// &#x83B7;&#x53D6;&#x6709;&#x5185;&#x5BB9;&#x7684;&#x6700;&#x540E;&#x4E00;&#x884C;&#x884C;&#x6570;</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">lastRowNum</span> <span class="operator">=</span> sheetAt.getLastRowNum();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= lastRowNum; i++) {</span><br><span class="line">                <span class="type">XSSFRow</span> <span class="variable">row</span> <span class="operator">=</span> sheetAt.getRow(i);</span><br><span class="line">                <span class="comment">// &#x5982;&#x679C;&#x67D0;&#x4E00;&#x884C;&#x6CA1;&#x6709;&#x5185;&#x5BB9;&#xFF0C;row&#x4E3A;null, &#x5219;&#x521B;&#x5EFA;&#x8FD9;&#x4E00;&#x884C;, &#x9632;&#x6B62;&#x8FD0;&#x884C;&#x65F6;invoke&#x62A5;&#x9519;</span></span><br><span class="line">                <span class="keyword">if</span> (row == <span class="literal">null</span>){</span><br><span class="line">                    row = sheetAt.createRow(i);</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">// &#x83B7;&#x53D6;&#x8FD9;&#x4E00;&#x884C;&#x6709;&#x591A;&#x5C11;&#x5217;</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">lastCellNum</span> <span class="operator">=</span> row.getLastCellNum();</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; lastCellNum; j++) {</span><br><span class="line">                    <span class="type">XSSFCell</span> <span class="variable">cell</span> <span class="operator">=</span> row.getCell(j);</span><br><span class="line">                    <span class="comment">// &#x5982;&#x679C;&#x8FD9;&#x4E00;&#x5217;&#x4E0D;&#x4E3A;null&#x65F6;, &#x5C06;&#x5176;&#x8F93;&#x51FA;</span></span><br><span class="line">                    <span class="keyword">if</span> (cell != <span class="literal">null</span>)</span><br><span class="line">                    System.out.print(cell.getStringCellValue());</span><br><span class="line">                }</span><br><span class="line">                System.out.println();</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                is.close();</span><br><span class="line">                sheets.close();</span><br><span class="line">            } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="comment">// &#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x7684;excel&#x5199;&#x5165;&#x5230;&#x5177;&#x4F53;&#x5730;&#x5740;</span></span><br><span class="line">        write();</span><br><span class="line">        <span class="comment">// &#x5C06;&#x5177;&#x4F53;&#x5730;&#x5740;&#x7684;excel&#x8BFB;&#x51FA;</span></span><br><span class="line">        read();</span><br><span class="line">        <span class="comment">/*   &#x8F93;&#x51FA;&#x4E3A;</span></span><br><span class="line"><span class="comment">        &#x59D3;&#x540D;-&#x8FD9;&#x662F;&#x7B2C;1&#x884C;&#x7B2C;1&#x683C;&#x57CE;&#x5E02;-&#x8FD9;&#x662F;&#x7B2C;1&#x884C;&#x7B2C;3&#x683C;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        &#x4E09;&#x513F;&#x5317;&#x4EAC;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>开发技巧</tag>
      </tags>
  </entry>
  <entry>
    <title>在SpringBoot中使用Oss进行文件上传下载</title>
    <url>/2024/05/22/ossupload/</url>
    <content><![CDATA[<h2 id="&#x672C;&#x6587;&#x4F7F;&#x7528;alioss-&#x53CA;-&#x4E2A;&#x4EBA;&#x642D;&#x5EFA;&#x7684;-minioOss&#x8FDB;&#x884C;&#x6F14;&#x793A;"><a href="#&#x672C;&#x6587;&#x4F7F;&#x7528;alioss-&#x53CA;-&#x4E2A;&#x4EBA;&#x642D;&#x5EFA;&#x7684;-minioOss&#x8FDB;&#x884C;&#x6F14;&#x793A;" class="headerlink" title="&#x672C;&#x6587;&#x4F7F;&#x7528;alioss &#x53CA; &#x4E2A;&#x4EBA;&#x642D;&#x5EFA;&#x7684; minioOss&#x8FDB;&#x884C;&#x6F14;&#x793A;"></a>&#x672C;&#x6587;&#x4F7F;&#x7528;alioss &#x53CA; &#x4E2A;&#x4EBA;&#x642D;&#x5EFA;&#x7684; minioOss&#x8FDB;&#x884C;&#x6F14;&#x793A;</h2><h3 id="&#x5728;SpringBoot&#x4E2D;&#x4F7F;&#x7528;Oss&#x8FDB;&#x884C;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;-&#x9996;&#x5148;&#x8981;&#x914D;&#x7F6E;oss&#x7684;-endPoint-accessKeyId-accessKeySecret&#x53CA;bucketName"><a href="#&#x5728;SpringBoot&#x4E2D;&#x4F7F;&#x7528;Oss&#x8FDB;&#x884C;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;-&#x9996;&#x5148;&#x8981;&#x914D;&#x7F6E;oss&#x7684;-endPoint-accessKeyId-accessKeySecret&#x53CA;bucketName" class="headerlink" title="&#x5728;SpringBoot&#x4E2D;&#x4F7F;&#x7528;Oss&#x8FDB;&#x884C;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;, &#x9996;&#x5148;&#x8981;&#x914D;&#x7F6E;oss&#x7684; endPoint, accessKeyId, accessKeySecret&#x53CA;bucketName"></a>&#x5728;SpringBoot&#x4E2D;&#x4F7F;&#x7528;Oss&#x8FDB;&#x884C;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;, &#x9996;&#x5148;&#x8981;&#x914D;&#x7F6E;oss&#x7684; endPoint, accessKeyId, accessKeySecret&#x53CA;bucketName</h3><h3 id="&#x4E00;-&#x5728;pom&#x6587;&#x4EF6;&#x91CC;&#x5F15;&#x5165;-aliOss&#x6216;-minioOss&#x7684;maven&#x5730;&#x5740;"><a href="#&#x4E00;-&#x5728;pom&#x6587;&#x4EF6;&#x91CC;&#x5F15;&#x5165;-aliOss&#x6216;-minioOss&#x7684;maven&#x5730;&#x5740;" class="headerlink" title="&#x4E00; &#x5728;pom&#x6587;&#x4EF6;&#x91CC;&#x5F15;&#x5165; aliOss&#x6216; minioOss&#x7684;maven&#x5730;&#x5740;"></a>&#x4E00; &#x5728;pom&#x6587;&#x4EF6;&#x91CC;&#x5F15;&#x5165; aliOss&#x6216; minioOss&#x7684;maven&#x5730;&#x5740;</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- aliOss --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>${aliyun.sdk.oss}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- minioOss --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.minio<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>minio<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>${minio}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="&#x4E8C;-&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x5165;&#x4ECE;Oss&#x7F51;&#x7AD9;&#x83B7;&#x53D6;&#x7684;&#x5FC5;&#x8981;&#x6570;&#x636E;"><a href="#&#x4E8C;-&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x5165;&#x4ECE;Oss&#x7F51;&#x7AD9;&#x83B7;&#x53D6;&#x7684;&#x5FC5;&#x8981;&#x6570;&#x636E;" class="headerlink" title="&#x4E8C; &#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x5165;&#x4ECE;Oss&#x7F51;&#x7AD9;&#x83B7;&#x53D6;&#x7684;&#x5FC5;&#x8981;&#x6570;&#x636E;"></a>&#x4E8C; &#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x5165;&#x4ECE;Oss&#x7F51;&#x7AD9;&#x83B7;&#x53D6;&#x7684;&#x5FC5;&#x8981;&#x6570;&#x636E;</h3><p>``application.ym</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">alioss:</span></span><br><span class="line">  <span class="attr">endpoint:</span> <span class="string">${work.alioss.endpoint}</span></span><br><span class="line">  <span class="attr">accessKeyId:</span> <span class="string">${work.alioss.accessKeyId}</span></span><br><span class="line">  <span class="attr">accessKeySecret:</span> <span class="string">${work.alioss.accessKeySecret}</span></span><br><span class="line">  <span class="attr">bucketName:</span> <span class="string">${work.alioss.bucket-name}</span></span><br><span class="line"><span class="attr">minio:</span></span><br><span class="line">  <span class="attr">endpoint:</span> <span class="string">${work.minio.endpoint}</span></span><br><span class="line">  <span class="attr">accessKeyId:</span> <span class="string">${work.minio.accessKeyId}</span></span><br><span class="line">  <span class="attr">accessKeySecret:</span> <span class="string">${work.minio.accessKeySecret}</span></span><br><span class="line">  <span class="attr">bucketName:</span> <span class="string">${work.minio.bucket-name}</span></span><br></pre></td></tr></table></figure>

<h3 id="&#x4E09;-&#x4E3A;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x521B;&#x5EFA;-properties&#x7C7B;-&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6CE8;&#x89E3;&#x8D4B;&#x503C;"><a href="#&#x4E09;-&#x4E3A;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x521B;&#x5EFA;-properties&#x7C7B;-&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6CE8;&#x89E3;&#x8D4B;&#x503C;" class="headerlink" title="&#x4E09; &#x4E3A;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x521B;&#x5EFA; properties&#x7C7B;, &#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6CE8;&#x89E3;&#x8D4B;&#x503C;"></a>&#x4E09; &#x4E3A;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x521B;&#x5EFA; properties&#x7C7B;, &#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6CE8;&#x89E3;&#x8D4B;&#x503C;</h3><p>``AliOssPropertis.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;work.alioss&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOssProperties</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String endpoint;</span><br><span class="line">    <span class="keyword">private</span> String accessKeyId;</span><br><span class="line">    <span class="keyword">private</span> String accessKeySecret;</span><br><span class="line">    <span class="keyword">private</span> String bucketName;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>``MinioProperties.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;work.minio&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MinioProperties</span> {</span><br><span class="line">    <span class="keyword">private</span> String endpoint;</span><br><span class="line">    <span class="keyword">private</span> String accessKeyId;</span><br><span class="line">    <span class="keyword">private</span> String accessKeySecret;</span><br><span class="line">    <span class="keyword">private</span> String bucketName;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x56DB;-&#x4E3A;Oss&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x521B;&#x5EFA;&#x5DE5;&#x5177;&#x7C7B;-&#x4FBF;&#x4E8E;&#x8C03;&#x7528;"><a href="#&#x56DB;-&#x4E3A;Oss&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x521B;&#x5EFA;&#x5DE5;&#x5177;&#x7C7B;-&#x4FBF;&#x4E8E;&#x8C03;&#x7528;" class="headerlink" title="&#x56DB; &#x4E3A;Oss&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x521B;&#x5EFA;&#x5DE5;&#x5177;&#x7C7B;, &#x4FBF;&#x4E8E;&#x8C03;&#x7528;"></a>&#x56DB; &#x4E3A;Oss&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x521B;&#x5EFA;&#x5DE5;&#x5177;&#x7C7B;, &#x4FBF;&#x4E8E;&#x8C03;&#x7528;</h3><p>``AliOssUtil.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliOssUtil</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String endpoint;</span><br><span class="line">    <span class="keyword">private</span> String accessKeyId;</span><br><span class="line">    <span class="keyword">private</span> String accessKeySecret;</span><br><span class="line">    <span class="keyword">private</span> String bucketName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x6587;&#x4EF6;&#x4E0A;&#x4F20;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bytes</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> objectName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(<span class="type">byte</span>[] bytes, String objectName)</span> {</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x521B;&#x5EFA;OSSClient&#x5B9E;&#x4F8B;&#x3002;</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// &#x521B;&#x5EFA;PutObject&#x8BF7;&#x6C42;&#x3002;</span></span><br><span class="line">            ossClient.putObject(bucketName, objectName, <span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(bytes));</span><br><span class="line">        } <span class="keyword">catch</span> (OSSException oe) {</span><br><span class="line">            System.out.println(<span class="string">&quot;Caught an OSSException, which means your request made it to OSS, &quot;</span></span><br><span class="line">                    + <span class="string">&quot;but was rejected with an error response for some reason.&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;Error Message:&quot;</span> + oe.getErrorMessage());</span><br><span class="line">            System.out.println(<span class="string">&quot;Error Code:&quot;</span> + oe.getErrorCode());</span><br><span class="line">            System.out.println(<span class="string">&quot;Request ID:&quot;</span> + oe.getRequestId());</span><br><span class="line">            System.out.println(<span class="string">&quot;Host ID:&quot;</span> + oe.getHostId());</span><br><span class="line">        } <span class="keyword">catch</span> (ClientException ce) {</span><br><span class="line">            System.out.println(<span class="string">&quot;Caught an ClientException, which means the client encountered &quot;</span></span><br><span class="line">                    + <span class="string">&quot;a serious internal problem while trying to communicate with OSS, &quot;</span></span><br><span class="line">                    + <span class="string">&quot;such as not being able to access the network.&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;Error Message:&quot;</span> + ce.getMessage());</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="keyword">if</span> (ossClient != <span class="literal">null</span>) {</span><br><span class="line">                ossClient.shutdown();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">//&#x6587;&#x4EF6;&#x8BBF;&#x95EE;&#x8DEF;&#x5F84;&#x89C4;&#x5219; https://BucketName.Endpoint/ObjectName</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">stringBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;https://&quot;</span>);</span><br><span class="line">        stringBuilder</span><br><span class="line">                .append(bucketName)</span><br><span class="line">                .append(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">                .append(endpoint)</span><br><span class="line">                .append(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">                .append(objectName);</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x5230;:{}&quot;</span>, stringBuilder.toString());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> stringBuilder.toString();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>``MinioUtil.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MinioUtil</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String endpoint;</span><br><span class="line">    <span class="keyword">private</span> String accessKey;</span><br><span class="line">    <span class="keyword">private</span> String secretKey;</span><br><span class="line">    <span class="keyword">private</span> String bucketName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(MultipartFile file, String objectName)</span> <span class="keyword">throws</span> ServerException, InsufficientDataException, ErrorResponseException, IOException, NoSuchAlgorithmException, InvalidKeyException, InvalidResponseException, XmlParserException, InternalException, io.minio.errors.ServerException {</span><br><span class="line">        <span class="comment">// &#x5B9E;&#x4F8B;&#x5316;&#x5BA2;&#x6237;&#x7AEF;</span></span><br><span class="line">        <span class="type">MinioClient</span> <span class="variable">client</span> <span class="operator">=</span> MinioClient.builder()</span><br><span class="line">                .endpoint(<span class="built_in">this</span>.endpoint)</span><br><span class="line">                .credentials(<span class="built_in">this</span>.accessKey, <span class="built_in">this</span>.secretKey)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            inputStream = file.getInputStream();</span><br><span class="line">        } <span class="keyword">catch</span> (IOException ex) {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(ex);</span><br><span class="line">        }</span><br><span class="line">        client.putObject(PutObjectArgs.builder()</span><br><span class="line">                .bucket(<span class="built_in">this</span>.bucketName)</span><br><span class="line">                .object(objectName)</span><br><span class="line">                .stream(inputStream, file.getSize(), -<span class="number">1</span>)</span><br><span class="line">                .contentType(file.getContentType())</span><br><span class="line">                .build());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.endpoint + <span class="string">&quot;/&quot;</span> + <span class="built_in">this</span>.bucketName + <span class="string">&quot;/&quot;</span> + objectName;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x4E94;-&#x5728;&#x914D;&#x7F6E;&#x7C7B;&#x4E2D;&#x5C06;-propertis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x8D4B;&#x503C;&#x7ED9;-OssUtil&#x5DE5;&#x5177;&#x7C7B;-&#x5E76;&#x901A;&#x8FC7;-Bean&#x6CE8;&#x89E3;&#x52A0;&#x5165;Spring&#x5BB9;&#x5668;"><a href="#&#x4E94;-&#x5728;&#x914D;&#x7F6E;&#x7C7B;&#x4E2D;&#x5C06;-propertis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x8D4B;&#x503C;&#x7ED9;-OssUtil&#x5DE5;&#x5177;&#x7C7B;-&#x5E76;&#x901A;&#x8FC7;-Bean&#x6CE8;&#x89E3;&#x52A0;&#x5165;Spring&#x5BB9;&#x5668;" class="headerlink" title="&#x4E94; &#x5728;&#x914D;&#x7F6E;&#x7C7B;&#x4E2D;&#x5C06; propertis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x8D4B;&#x503C;&#x7ED9; OssUtil&#x5DE5;&#x5177;&#x7C7B;, &#x5E76;&#x901A;&#x8FC7; @Bean&#x6CE8;&#x89E3;&#x52A0;&#x5165;Spring&#x5BB9;&#x5668;"></a>&#x4E94; &#x5728;&#x914D;&#x7F6E;&#x7C7B;&#x4E2D;&#x5C06; propertis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x8D4B;&#x503C;&#x7ED9; OssUtil&#x5DE5;&#x5177;&#x7C7B;, &#x5E76;&#x901A;&#x8FC7; @Bean&#x6CE8;&#x89E3;&#x52A0;&#x5165;Spring&#x5BB9;&#x5668;</h3><p>``OssConfiguration.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OssConfiguration</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">    <span class="keyword">public</span> AliOssUtil <span class="title function_">aliOssUtil</span><span class="params">(AliOssProperties aliOssProperties)</span> {</span><br><span class="line">        log.info(<span class="string">&quot;&#x5F00;&#x59CB;&#x521B;&#x5EFA;&#x963F;&#x91CC;&#x4E91;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x5DE5;&#x5177;&#x7C7B;&#x5BF9;&#x8C61;: {}&quot;</span>, aliOssProperties);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AliOssUtil</span>(aliOssProperties.getEndpoint(),</span><br><span class="line">                aliOssProperties.getAccessKeyId(),</span><br><span class="line">                aliOssProperties.getAccessKeySecret(),</span><br><span class="line">                aliOssProperties.getBucketName());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">    <span class="keyword">public</span> MinioUtil <span class="title function_">minioUtil</span><span class="params">(MinioProperties minioProperties)</span> {</span><br><span class="line">        log.info(<span class="string">&quot;&#x5F00;&#x59CB;&#x521B;&#x5EFA;Minion&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x5DE5;&#x5177;&#x7C7B;&#x5BF9;&#x8C61;: {}&quot;</span>, minioProperties);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MinioUtil</span>(minioProperties.getEndpoint(),</span><br><span class="line">                minioProperties.getAccessKeyId(),</span><br><span class="line">                minioProperties.getAccessKeySecret(),</span><br><span class="line">                minioProperties.getBucketName());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x516D;-&#x521B;&#x5EFA;-CommonController&#x63A7;&#x5236;&#x7C7B;-&#x5C06;-Oss&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;&#x5177;&#x8C61;&#x5316;-&#x4FBF;&#x4E8E;&#x524D;&#x7AEF;&#x8C03;&#x7528;"><a href="#&#x516D;-&#x521B;&#x5EFA;-CommonController&#x63A7;&#x5236;&#x7C7B;-&#x5C06;-Oss&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;&#x5177;&#x8C61;&#x5316;-&#x4FBF;&#x4E8E;&#x524D;&#x7AEF;&#x8C03;&#x7528;" class="headerlink" title="&#x516D; &#x521B;&#x5EFA; CommonController&#x63A7;&#x5236;&#x7C7B;, &#x5C06; Oss&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;&#x5177;&#x8C61;&#x5316;, &#x4FBF;&#x4E8E;&#x524D;&#x7AEF;&#x8C03;&#x7528;"></a>&#x516D; &#x521B;&#x5EFA; CommonController&#x63A7;&#x5236;&#x7C7B;, &#x5C06; Oss&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;&#x5177;&#x8C61;&#x5316;, &#x4FBF;&#x4E8E;&#x524D;&#x7AEF;&#x8C03;&#x7528;</h3><p>``CommonController</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin/common&quot;)</span></span><br><span class="line"><span class="meta">@Api(tags = &quot;&#x901A;&#x7528;&#x63A5;&#x53E3;&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommonController</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AliOssUtil aliOssUtil;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MinioUtil minioUtil;</span><br><span class="line"></span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x6587;&#x4EF6;&#x4E0A;&#x4F20;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> file</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;String&gt; <span class="title function_">upload</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile multipartFile)</span> {</span><br><span class="line">        log.info(<span class="string">&quot;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;: {}&quot;</span>, multipartFile);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// &#x83B7;&#x53D6;&#x539F;&#x59CB;&#x6587;&#x4EF6;&#x540D;</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> multipartFile.getOriginalFilename();</span><br><span class="line">            <span class="comment">// &#x622A;&#x53D6;&#x539F;&#x59CB;&#x6587;&#x4EF6;&#x540D;&#x540E;&#x7F00;</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">extension</span> <span class="operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">            <span class="comment">// &#x6784;&#x5EFA;&#x65B0;&#x6587;&#x4EF6;&#x540D;&#x79F0;</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> UUID.randomUUID() + extension;</span><br><span class="line">            <span class="comment">// &#x6587;&#x4EF6;&#x7684;&#x8BF7;&#x6C42;&#x8DEF;&#x5F84;</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> aliOssUtil.upload(multipartFile.getBytes(), fileName);</span><br><span class="line">            <span class="keyword">return</span> Result.success(filePath);</span><br><span class="line">        } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">            log.error(<span class="string">&quot;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x5931;&#x8D25;: {}&quot;</span>, e.getMessage());</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> Result.error(MessageConstant.UPLOAD_FAILED);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x6587;&#x4EF6;&#x4E0A;&#x4F20;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> file</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x63A5;&#x53E3;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;String&gt; <span class="title function_">uploadMin</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile file)</span> {</span><br><span class="line">        log.info(<span class="string">&quot;&#x6587;&#x4EF6;&#x4E0A;&#x4F20; &#xFF1A; {}&quot;</span>, file);</span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">        <span class="type">String</span> <span class="variable">extension</span> <span class="operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">        <span class="type">String</span> <span class="variable">objectName</span> <span class="operator">=</span> UUID.randomUUID() + extension;</span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            filePath = minioUtil.upload(file, objectName);</span><br><span class="line">            <span class="keyword">return</span> Result.success(filePath);</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            log.error(<span class="string">&quot;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x5931;&#x8D25;&#xFF1A; {}&quot;</span>, e);</span><br><span class="line">            <span class="keyword">return</span> Result.error(MessageConstant.UPLOAD_FAILED);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x4E03;-&#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;-localhost-x2F-admin-x2F-common-x2F-upload-&#x4E0A;&#x4F20;&#x6587;&#x4EF6;-&#x4E0A;&#x4F20;&#x6210;&#x529F;&#x4F1A;&#x8FD4;&#x56DE;filePath-&#x53EF;&#x4EE5;&#x901A;&#x8FC7;filePath&#x8BBF;&#x95EE;&#x4E0A;&#x4F20;&#x7684;&#x6587;&#x4EF6;"><a href="#&#x4E03;-&#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;-localhost-x2F-admin-x2F-common-x2F-upload-&#x4E0A;&#x4F20;&#x6587;&#x4EF6;-&#x4E0A;&#x4F20;&#x6210;&#x529F;&#x4F1A;&#x8FD4;&#x56DE;filePath-&#x53EF;&#x4EE5;&#x901A;&#x8FC7;filePath&#x8BBF;&#x95EE;&#x4E0A;&#x4F20;&#x7684;&#x6587;&#x4EF6;" class="headerlink" title="&#x4E03; &#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528; localhost/admin/common/upload &#x4E0A;&#x4F20;&#x6587;&#x4EF6;, &#x4E0A;&#x4F20;&#x6210;&#x529F;&#x4F1A;&#x8FD4;&#x56DE;filePath, &#x53EF;&#x4EE5;&#x901A;&#x8FC7;filePath&#x8BBF;&#x95EE;&#x4E0A;&#x4F20;&#x7684;&#x6587;&#x4EF6;"></a>&#x4E03; &#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528; localhost/admin/common/upload &#x4E0A;&#x4F20;&#x6587;&#x4EF6;, &#x4E0A;&#x4F20;&#x6210;&#x529F;&#x4F1A;&#x8FD4;&#x56DE;filePath, &#x53EF;&#x4EE5;&#x901A;&#x8FC7;filePath&#x8BBF;&#x95EE;&#x4E0A;&#x4F20;&#x7684;&#x6587;&#x4EF6;</h3>]]></content>
      <categories>
        <category>Java</category>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>后端</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>springboot微信登陆实现</title>
    <url>/2024/05/21/wechatlogin/</url>
    <content><![CDATA[<h2 id="&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x767B;&#x5F55;&#x6D41;&#x7A0B;&#x56FE;"><a href="#&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x767B;&#x5F55;&#x6D41;&#x7A0B;&#x56FE;" class="headerlink" title="&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x767B;&#x5F55;&#x6D41;&#x7A0B;&#x56FE;"></a>&#x5FAE;&#x4FE1;&#x5C0F;&#x7A0B;&#x5E8F;&#x767B;&#x5F55;&#x6D41;&#x7A0B;&#x56FE;</h2><img src="/2024/05/21/wechatlogin/allway.jpg" style="zoom:65%;">

<h2 id="&#x4E2A;&#x4EBA;&#x5B9E;&#x73B0;&#x767B;&#x5F55;&#x6D41;&#x7A0B;&#x7684;&#x601D;&#x8DEF;"><a href="#&#x4E2A;&#x4EBA;&#x5B9E;&#x73B0;&#x767B;&#x5F55;&#x6D41;&#x7A0B;&#x7684;&#x601D;&#x8DEF;" class="headerlink" title="&#x4E2A;&#x4EBA;&#x5B9E;&#x73B0;&#x767B;&#x5F55;&#x6D41;&#x7A0B;&#x7684;&#x601D;&#x8DEF;"></a>&#x4E2A;&#x4EBA;&#x5B9E;&#x73B0;&#x767B;&#x5F55;&#x6D41;&#x7A0B;&#x7684;&#x601D;&#x8DEF;</h2><img src="/2024/05/21/wechatlogin/login.png" style="zoom:55%;">

<h3 id="&#x4E00;-&#x524D;&#x7AEF;&#x8C03;&#x7528;wx-login-&#x524D;&#x7AEF;&#x4F7F;&#x7528;-wx-login-&#x51FD;&#x6570;&#x83B7;&#x53D6;code-&#x6BCF;&#x6B21;&#x83B7;&#x5F97;&#x7684;code&#x4EC5;&#x53EF;&#x4F7F;&#x7528;&#x4E00;&#x6B21;"><a href="#&#x4E00;-&#x524D;&#x7AEF;&#x8C03;&#x7528;wx-login-&#x524D;&#x7AEF;&#x4F7F;&#x7528;-wx-login-&#x51FD;&#x6570;&#x83B7;&#x53D6;code-&#x6BCF;&#x6B21;&#x83B7;&#x5F97;&#x7684;code&#x4EC5;&#x53EF;&#x4F7F;&#x7528;&#x4E00;&#x6B21;" class="headerlink" title="&#x4E00; &#x524D;&#x7AEF;&#x8C03;&#x7528;wx.login() - &#x524D;&#x7AEF;&#x4F7F;&#x7528; wx.login()&#x51FD;&#x6570;&#x83B7;&#x53D6;code, &#x6BCF;&#x6B21;&#x83B7;&#x5F97;&#x7684;code&#x4EC5;&#x53EF;&#x4F7F;&#x7528;&#x4E00;&#x6B21;"></a>&#x4E00; &#x524D;&#x7AEF;&#x8C03;&#x7528;wx.login() - &#x524D;&#x7AEF;&#x4F7F;&#x7528; wx.login()&#x51FD;&#x6570;&#x83B7;&#x53D6;code, &#x6BCF;&#x6B21;&#x83B7;&#x5F97;&#x7684;code&#x4EC5;&#x53EF;&#x4F7F;&#x7528;&#x4E00;&#x6B21;</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">wx.<span class="title function_">login</span>({</span><br><span class="line">  success (res) {</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span>) {</span><br><span class="line">      <span class="comment">//&#x53D1;&#x8D77;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42; &#x5C06;code&#x53D1;&#x9001;&#x5230;url&#x540E;&#x7AEF;</span></span><br><span class="line">      wx.<span class="title function_">request</span>({</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&apos;http://localhost/user/login&apos;</span>,</span><br><span class="line">        <span class="attr">data</span>: {</span><br><span class="line">          <span class="attr">code</span>: res.<span class="property">code</span></span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&apos;&#x767B;&#x5F55;&#x5931;&#x8D25;&#xFF01;&apos;</span> + res.<span class="property">errMsg</span>)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></table></figure>

<h3 id="&#x4E8C;-Controller&#x4E2D;&#x8FDB;&#x884C;&#x767B;&#x5F55;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;-&#x9996;&#x5148;&#x5C01;&#x88C5;&#x5305;&#x542B;-openId&#x7684;&#x7528;&#x6237;-&#x4E3A;&#x8BE5;&#x7528;&#x6237;&#x751F;&#x6210;jwt&#x4EE4;&#x724C;-&#x5C06;-user-id-openId-jwt&#x7684;token&#x5C01;&#x88C5;&#x6210;-userLoginVo&#x8FD4;&#x56DE;&#x524D;&#x7AEF;"><a href="#&#x4E8C;-Controller&#x4E2D;&#x8FDB;&#x884C;&#x767B;&#x5F55;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;-&#x9996;&#x5148;&#x5C01;&#x88C5;&#x5305;&#x542B;-openId&#x7684;&#x7528;&#x6237;-&#x4E3A;&#x8BE5;&#x7528;&#x6237;&#x751F;&#x6210;jwt&#x4EE4;&#x724C;-&#x5C06;-user-id-openId-jwt&#x7684;token&#x5C01;&#x88C5;&#x6210;-userLoginVo&#x8FD4;&#x56DE;&#x524D;&#x7AEF;" class="headerlink" title="&#x4E8C; Controller&#x4E2D;&#x8FDB;&#x884C;&#x767B;&#x5F55;&#x6574;&#x4E2A;&#x6D41;&#x7A0B; - &#x9996;&#x5148;&#x5C01;&#x88C5;&#x5305;&#x542B; openId&#x7684;&#x7528;&#x6237;, &#x4E3A;&#x8BE5;&#x7528;&#x6237;&#x751F;&#x6210;jwt&#x4EE4;&#x724C;, &#x5C06; user.id, openId, jwt&#x7684;token&#x5C01;&#x88C5;&#x6210; userLoginVo&#x8FD4;&#x56DE;&#x524D;&#x7AEF;"></a>&#x4E8C; Controller&#x4E2D;&#x8FDB;&#x884C;&#x767B;&#x5F55;&#x6574;&#x4E2A;&#x6D41;&#x7A0B; - &#x9996;&#x5148;&#x5C01;&#x88C5;&#x5305;&#x542B; openId&#x7684;&#x7528;&#x6237;, &#x4E3A;&#x8BE5;&#x7528;&#x6237;&#x751F;&#x6210;jwt&#x4EE4;&#x724C;, &#x5C06; user.id, openId, jwt&#x7684;token&#x5C01;&#x88C5;&#x6210; userLoginVo&#x8FD4;&#x56DE;&#x524D;&#x7AEF;</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> JwtProperties jwtProperties;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x5FAE;&#x4FE1;&#x767B;&#x5F55;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> userLoginDTO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;&#x5FAE;&#x4FE1;&#x767B;&#x5F55;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;UserLoginVO&gt; <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> UserLoginDTO userLoginDTO)</span> {</span><br><span class="line">    log.info(<span class="string">&quot;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x767B;&#x5F55;: {}&quot;</span>,userLoginDTO.getCode());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//&#x5FAE;&#x4FE1;&#x767B;&#x5F55;</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.wxLogin(userLoginDTO);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//&#x4E3A;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x751F;&#x6210;jwt&#x4EE4;&#x724C;</span></span><br><span class="line">    Map&lt;String, Object&gt; claims = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    claims.put(<span class="string">&quot;userId&quot;</span>,user.getId());</span><br><span class="line">    <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> JwtUtil.createJWT(</span><br><span class="line">            jwtProperties.getUserSecretKey(),</span><br><span class="line">            jwtProperties.getUserTtl(),</span><br><span class="line">            claims);</span><br><span class="line"></span><br><span class="line">    <span class="type">UserLoginVO</span> <span class="variable">userLoginVO</span> <span class="operator">=</span> UserLoginVO.builder()</span><br><span class="line">            .id(user.getId())</span><br><span class="line">            .openid(user.getOpenid())</span><br><span class="line">            .token(token)</span><br><span class="line">            .build();</span><br><span class="line">    <span class="keyword">return</span> Result.success(userLoginVO);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x4E09;-wxLogin-&#x4F4D;&#x4E8E;ServiceImpl&#x4E2D;-&#x7528;&#x4E8E;&#x8FD4;&#x56DE;&#x5305;&#x542B;openId&#x7684;&#x7528;&#x6237;user-&#x901A;&#x8FC7;getOpenId-&#x83B7;&#x53D6;-openId-&#x5982;&#x679C;&#x7528;&#x6237;&#x662F;&#x65B0;&#x7528;&#x6237;-&#x5219;&#x521B;&#x5EFA;&#x6B64;&#x7528;&#x6237;-&#x5E76;&#x52A0;&#x5165;openId"><a href="#&#x4E09;-wxLogin-&#x4F4D;&#x4E8E;ServiceImpl&#x4E2D;-&#x7528;&#x4E8E;&#x8FD4;&#x56DE;&#x5305;&#x542B;openId&#x7684;&#x7528;&#x6237;user-&#x901A;&#x8FC7;getOpenId-&#x83B7;&#x53D6;-openId-&#x5982;&#x679C;&#x7528;&#x6237;&#x662F;&#x65B0;&#x7528;&#x6237;-&#x5219;&#x521B;&#x5EFA;&#x6B64;&#x7528;&#x6237;-&#x5E76;&#x52A0;&#x5165;openId" class="headerlink" title="&#x4E09; wxLogin() - &#x4F4D;&#x4E8E;ServiceImpl&#x4E2D;, &#x7528;&#x4E8E;&#x8FD4;&#x56DE;&#x5305;&#x542B;openId&#x7684;&#x7528;&#x6237;user - &#x901A;&#x8FC7;getOpenId() &#x83B7;&#x53D6; openId, &#x5982;&#x679C;&#x7528;&#x6237;&#x662F;&#x65B0;&#x7528;&#x6237;,&#x5219;&#x521B;&#x5EFA;&#x6B64;&#x7528;&#x6237;, &#x5E76;&#x52A0;&#x5165;openId"></a>&#x4E09; wxLogin() - &#x4F4D;&#x4E8E;ServiceImpl&#x4E2D;, &#x7528;&#x4E8E;&#x8FD4;&#x56DE;&#x5305;&#x542B;openId&#x7684;&#x7528;&#x6237;user - &#x901A;&#x8FC7;getOpenId() &#x83B7;&#x53D6; openId, &#x5982;&#x679C;&#x7528;&#x6237;&#x662F;&#x65B0;&#x7528;&#x6237;,&#x5219;&#x521B;&#x5EFA;&#x6B64;&#x7528;&#x6237;, &#x5E76;&#x52A0;&#x5165;openId</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x5FAE;&#x4FE1;&#x767B;&#x5F55;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> userLoginDTO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">wxLogin</span><span class="params">(UserLoginDTO userLoginDTO)</span> {</span><br><span class="line">    <span class="comment">// &#x8C03;&#x7528;&#x5FAE;&#x4FE1;&#x63A5;&#x53E3;&#x670D;&#x52A1;, &#x83B7;&#x5F97;&#x5F53;&#x524D;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x7684;openid</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">openId</span> <span class="operator">=</span> getOpenId(userLoginDTO.getCode());</span><br><span class="line">    <span class="comment">// &#x5224;&#x65AD;openid&#x662F;&#x5426;&#x4E3A;&#x7A7A;, &#x5982;&#x679C;&#x4E3A;&#x7A7A;&#x8868;&#x793A;&#x767B;&#x9646;&#x5931;&#x8D25;, &#x5219;&#x629B;&#x51FA;&#x4E1A;&#x52A1;&#x5F02;&#x5E38;</span></span><br><span class="line">    <span class="keyword">if</span> (openId == <span class="literal">null</span>) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">LoginFailedException</span>(<span class="string">&quot;&#x5FAE;&#x4FE1;&#x767B;&#x5F55;&#x5931;&#x8D25;&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// &#x5224;&#x65AD;&#x5F53;&#x524D;&#x7528;&#x6237;&#x662F;&#x5426;&#x4E3A;&#x65B0;&#x7528;&#x6237;</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectByOpenid(openId);</span><br><span class="line">    <span class="comment">// &#x5982;&#x679C;&#x4E3A;&#x65B0;&#x7528;&#x6237;, &#x5219;&#x8C03;&#x7528;&#x6CE8;&#x518C;&#x63A5;&#x53E3;&#x670D;&#x52A1;, &#x6CE8;&#x518C;&#x7528;&#x6237;&#x4FE1;&#x606F;</span></span><br><span class="line">    <span class="keyword">if</span> (user == <span class="literal">null</span>) {</span><br><span class="line">        user = User.builder()</span><br><span class="line">                .openid(openId)</span><br><span class="line">                .createTime(LocalDateTime.now())</span><br><span class="line">                .build();</span><br><span class="line">        userMapper.insert(user);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x8FD4;&#x56DE;&#x8FD9;&#x4E2A;&#x7528;&#x6237;&#x5BF9;&#x8C61;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>``UserLoginDTO&#x5C01;&#x88C5;&#x7C7B;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserLoginDTO</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x56DB;-getOpenId-&#x4F4D;&#x4E8E;ServiceImpl&#x4E2D;-&#x7528;&#x4E8E;&#x83B7;&#x53D6;openId-&#x5E76;&#x8FD4;&#x56DE;openId"><a href="#&#x56DB;-getOpenId-&#x4F4D;&#x4E8E;ServiceImpl&#x4E2D;-&#x7528;&#x4E8E;&#x83B7;&#x53D6;openId-&#x5E76;&#x8FD4;&#x56DE;openId" class="headerlink" title="&#x56DB; getOpenId() - &#x4F4D;&#x4E8E;ServiceImpl&#x4E2D; - &#x7528;&#x4E8E;&#x83B7;&#x53D6;openId, &#x5E76;&#x8FD4;&#x56DE;openId"></a>&#x56DB; getOpenId() - &#x4F4D;&#x4E8E;ServiceImpl&#x4E2D; - &#x7528;&#x4E8E;&#x83B7;&#x53D6;openId, &#x5E76;&#x8FD4;&#x56DE;openId</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x5FAE;&#x4FE1;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x5730;&#x5740;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">WX_LOGIN</span> <span class="operator">=</span> <span class="string">&quot;https://api.weixin.qq.com/sns/jscode2session&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> WeChatProperties weChatProperties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x8C03;&#x7528;&#x5FAE;&#x4FE1;&#x63A5;&#x53E3;&#x670D;&#x52A1;, &#x83B7;&#x5F97;&#x5F53;&#x524D;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x7684;openid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> code</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> String <span class="title function_">getOpenId</span><span class="params">(String code)</span> {</span><br><span class="line">    <span class="comment">// &#x8C03;&#x7528;&#x5FAE;&#x4FE1;&#x63A5;&#x53E3;&#x670D;&#x52A1;, &#x83B7;&#x5F97;&#x5F53;&#x524D;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x7684;openid</span></span><br><span class="line">    Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;appid&quot;</span>, weChatProperties.getAppid());</span><br><span class="line">    map.put(<span class="string">&quot;secret&quot;</span>, weChatProperties.getSecret());</span><br><span class="line">    map.put(<span class="string">&quot;js_code&quot;</span>, code);</span><br><span class="line">    map.put(<span class="string">&quot;grant_type&quot;</span>, <span class="string">&quot;authorization_code&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> HttpClientUtil.doGet(WX_LOGIN, map);</span><br><span class="line"></span><br><span class="line">    <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(body);</span><br><span class="line">    <span class="type">String</span> <span class="variable">openid</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;openid&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> openid;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="&#x6B64;&#x7C7B;&#x4E2D;&#x9700;&#x8981;appid-secret-grant-type&#x5747;&#x53EF;&#x5728;&#x5FAE;&#x4FE1;&#x5F00;&#x653E;&#x5E73;&#x53F0;&#x83B7;&#x53D6;&#x5230;-js-code&#x5219;&#x662F;&#x524D;&#x7AEF;wx-login-&#x51FD;&#x6570;&#x83B7;&#x53D6;&#x5230;&#x7684;code-&#x6B64;&#x65F6;&#x82E5;&#x83B7;&#x53D6;&#x5230;&#x4E86;openid-&#x5219;&#x5FAE;&#x4FE1;&#x767B;&#x9646;&#x540E;&#x7AEF;&#x5C31;&#x7B97;&#x5B8C;&#x6210;&#x4E86;"><a href="#&#x6B64;&#x7C7B;&#x4E2D;&#x9700;&#x8981;appid-secret-grant-type&#x5747;&#x53EF;&#x5728;&#x5FAE;&#x4FE1;&#x5F00;&#x653E;&#x5E73;&#x53F0;&#x83B7;&#x53D6;&#x5230;-js-code&#x5219;&#x662F;&#x524D;&#x7AEF;wx-login-&#x51FD;&#x6570;&#x83B7;&#x53D6;&#x5230;&#x7684;code-&#x6B64;&#x65F6;&#x82E5;&#x83B7;&#x53D6;&#x5230;&#x4E86;openid-&#x5219;&#x5FAE;&#x4FE1;&#x767B;&#x9646;&#x540E;&#x7AEF;&#x5C31;&#x7B97;&#x5B8C;&#x6210;&#x4E86;" class="headerlink" title="&#x6B64;&#x7C7B;&#x4E2D;&#x9700;&#x8981;appid, secret, grant_type&#x5747;&#x53EF;&#x5728;&#x5FAE;&#x4FE1;&#x5F00;&#x653E;&#x5E73;&#x53F0;&#x83B7;&#x53D6;&#x5230;, js_code&#x5219;&#x662F;&#x524D;&#x7AEF;wx.login()&#x51FD;&#x6570;&#x83B7;&#x53D6;&#x5230;&#x7684;code, &#x6B64;&#x65F6;&#x82E5;&#x83B7;&#x53D6;&#x5230;&#x4E86;openid,&#x5219;&#x5FAE;&#x4FE1;&#x767B;&#x9646;&#x540E;&#x7AEF;&#x5C31;&#x7B97;&#x5B8C;&#x6210;&#x4E86;"></a>&#x6B64;&#x7C7B;&#x4E2D;&#x9700;&#x8981;appid, secret, grant_type&#x5747;&#x53EF;&#x5728;&#x5FAE;&#x4FE1;&#x5F00;&#x653E;&#x5E73;&#x53F0;&#x83B7;&#x53D6;&#x5230;, js_code&#x5219;&#x662F;&#x524D;&#x7AEF;wx.login()&#x51FD;&#x6570;&#x83B7;&#x53D6;&#x5230;&#x7684;code, &#x6B64;&#x65F6;&#x82E5;&#x83B7;&#x53D6;&#x5230;&#x4E86;openid,&#x5219;&#x5FAE;&#x4FE1;&#x767B;&#x9646;&#x540E;&#x7AEF;&#x5C31;&#x7B97;&#x5B8C;&#x6210;&#x4E86;</h4><p>``weChatProperties &#x7C7B;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x5FAE;&#x4FE1;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x5730;&#x5740;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">WX_LOGIN</span> <span class="operator">=</span> <span class="string">&quot;https://api.weixin.qq.com/sns/jscode2session&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> WeChatProperties weChatProperties;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;work.wechat&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeChatProperties</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String appid; <span class="comment">//&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;appid</span></span><br><span class="line">    <span class="keyword">private</span> String secret; <span class="comment">//&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x79D8;&#x94A5;</span></span><br><span class="line">    <span class="keyword">private</span> String mchid; <span class="comment">//&#x5546;&#x6237;&#x53F7;</span></span><br><span class="line">    <span class="keyword">private</span> String mchSerialNo; <span class="comment">//&#x5546;&#x6237;API&#x8BC1;&#x4E66;&#x7684;&#x8BC1;&#x4E66;&#x5E8F;&#x5217;&#x53F7;</span></span><br><span class="line">    <span class="keyword">private</span> String privateKeyFilePath; <span class="comment">//&#x5546;&#x6237;&#x79C1;&#x94A5;&#x6587;&#x4EF6;</span></span><br><span class="line">    <span class="keyword">private</span> String apiV3Key; <span class="comment">//&#x8BC1;&#x4E66;&#x89E3;&#x5BC6;&#x7684;&#x5BC6;&#x94A5;</span></span><br><span class="line">    <span class="keyword">private</span> String weChatPayCertFilePath; <span class="comment">//&#x5E73;&#x53F0;&#x8BC1;&#x4E66;</span></span><br><span class="line">    <span class="keyword">private</span> String notifyUrl; <span class="comment">//&#x652F;&#x4ED8;&#x6210;&#x529F;&#x7684;&#x56DE;&#x8C03;&#x5730;&#x5740;</span></span><br><span class="line">    <span class="keyword">private</span> String refundNotifyUrl; <span class="comment">//&#x9000;&#x6B3E;&#x6210;&#x529F;&#x7684;&#x56DE;&#x8C03;&#x5730;&#x5740;</span></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x5165;-appie-secret&#x6570;&#x636E;"><a href="#&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x5165;-appie-secret&#x6570;&#x636E;" class="headerlink" title="&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x5165; appie, secret&#x6570;&#x636E;"></a>&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x5165; appie, secret&#x6570;&#x636E;</h4><p>``application.yml &#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">wechat:</span></span><br><span class="line">  <span class="attr">appid:</span> <span class="string">${sky.wechat.appid}</span></span><br><span class="line">  <span class="attr">secret:</span> <span class="string">${sky.wechat.secret}</span></span><br></pre></td></tr></table></figure>

<h4 id="HttpClicentUtil&#x5C01;&#x88C5;&#x7C7B;-getOpenId-&#x4E2D;&#x7684;&#x6240;&#x8C03;&#x7528;&#x7684;-&#x5C06;-Httpclient&#x7684;-doGet-doPost-&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;-&#x4FBF;&#x4E8E;&#x8C03;&#x7528;"><a href="#HttpClicentUtil&#x5C01;&#x88C5;&#x7C7B;-getOpenId-&#x4E2D;&#x7684;&#x6240;&#x8C03;&#x7528;&#x7684;-&#x5C06;-Httpclient&#x7684;-doGet-doPost-&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;-&#x4FBF;&#x4E8E;&#x8C03;&#x7528;" class="headerlink" title="HttpClicentUtil&#x5C01;&#x88C5;&#x7C7B; getOpenId() &#x4E2D;&#x7684;&#x6240;&#x8C03;&#x7528;&#x7684;, &#x5C06; Httpclient&#x7684; doGet(), doPost()&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;, &#x4FBF;&#x4E8E;&#x8C03;&#x7528;"></a>HttpClicentUtil&#x5C01;&#x88C5;&#x7C7B; getOpenId() &#x4E2D;&#x7684;&#x6240;&#x8C03;&#x7528;&#x7684;, &#x5C06; Httpclient&#x7684; doGet(), doPost()&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;, &#x4FBF;&#x4E8E;&#x8C03;&#x7528;</h4><p>`` HttpClientUtil.java &#x7C7B;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Http&#x5DE5;&#x5177;&#x7C7B;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpClientUtil</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span>  <span class="type">int</span> <span class="variable">TIMEOUT_MSEC</span> <span class="operator">=</span> <span class="number">5</span> * <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x53D1;&#x9001;GET&#x65B9;&#x5F0F;&#x8BF7;&#x6C42;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> paramMap</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">doGet</span><span class="params">(String url,Map&lt;String,String&gt; paramMap)</span>{</span><br><span class="line">        <span class="comment">// &#x521B;&#x5EFA;Httpclient&#x5BF9;&#x8C61;</span></span><br><span class="line">        <span class="type">CloseableHttpClient</span> <span class="variable">httpClient</span> <span class="operator">=</span> HttpClients.createDefault();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">CloseableHttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>{</span><br><span class="line">            <span class="type">URIBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URIBuilder</span>(url);</span><br><span class="line">            <span class="keyword">if</span>(paramMap != <span class="literal">null</span>){</span><br><span class="line">                <span class="keyword">for</span> (String key : paramMap.keySet()) {</span><br><span class="line">                    builder.addParameter(key,paramMap.get(key));</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="type">URI</span> <span class="variable">uri</span> <span class="operator">=</span> builder.build();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//&#x521B;&#x5EFA;GET&#x8BF7;&#x6C42;</span></span><br><span class="line">            <span class="type">HttpGet</span> <span class="variable">httpGet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpGet</span>(uri);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//&#x53D1;&#x9001;&#x8BF7;&#x6C42;</span></span><br><span class="line">            response = httpClient.execute(httpGet);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//&#x5224;&#x65AD;&#x54CD;&#x5E94;&#x72B6;&#x6001;</span></span><br><span class="line">            <span class="keyword">if</span>(response.getStatusLine().getStatusCode() == <span class="number">200</span>){</span><br><span class="line">                result = EntityUtils.toString(response.getEntity(),<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            }</span><br><span class="line">        }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }<span class="keyword">finally</span> {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                response.close();</span><br><span class="line">                httpClient.close();</span><br><span class="line">            } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x53D1;&#x9001;POST&#x65B9;&#x5F0F;&#x8BF7;&#x6C42;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> paramMap</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">doPost</span><span class="params">(String url, Map&lt;String, String&gt; paramMap)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="comment">// &#x521B;&#x5EFA;Httpclient&#x5BF9;&#x8C61;</span></span><br><span class="line">        <span class="type">CloseableHttpClient</span> <span class="variable">httpClient</span> <span class="operator">=</span> HttpClients.createDefault();</span><br><span class="line">        <span class="type">CloseableHttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">resultString</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// &#x521B;&#x5EFA;Http Post&#x8BF7;&#x6C42;</span></span><br><span class="line">            <span class="type">HttpPost</span> <span class="variable">httpPost</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpPost</span>(url);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// &#x521B;&#x5EFA;&#x53C2;&#x6570;&#x5217;&#x8868;</span></span><br><span class="line">            <span class="keyword">if</span> (paramMap != <span class="literal">null</span>) {</span><br><span class="line">                List&lt;NameValuePair&gt; paramList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">                <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; param : paramMap.entrySet()) {</span><br><span class="line">                    paramList.add(<span class="keyword">new</span> <span class="title class_">BasicNameValuePair</span>(param.getKey(), param.getValue()));</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">// &#x6A21;&#x62DF;&#x8868;&#x5355;</span></span><br><span class="line">                <span class="type">UrlEncodedFormEntity</span> <span class="variable">entity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlEncodedFormEntity</span>(paramList);</span><br><span class="line">                httpPost.setEntity(entity);</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            httpPost.setConfig(builderRequestConfig());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// &#x6267;&#x884C;http&#x8BF7;&#x6C42;</span></span><br><span class="line">            response = httpClient.execute(httpPost);</span><br><span class="line"></span><br><span class="line">            resultString = EntityUtils.toString(response.getEntity(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                response.close();</span><br><span class="line">            } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> resultString;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x53D1;&#x9001;POST&#x65B9;&#x5F0F;&#x8BF7;&#x6C42;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> paramMap</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">doPost4Json</span><span class="params">(String url, Map&lt;String, String&gt; paramMap)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="comment">// &#x521B;&#x5EFA;Httpclient&#x5BF9;&#x8C61;</span></span><br><span class="line">        <span class="type">CloseableHttpClient</span> <span class="variable">httpClient</span> <span class="operator">=</span> HttpClients.createDefault();</span><br><span class="line">        <span class="type">CloseableHttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">resultString</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// &#x521B;&#x5EFA;Http Post&#x8BF7;&#x6C42;</span></span><br><span class="line">            <span class="type">HttpPost</span> <span class="variable">httpPost</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpPost</span>(url);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (paramMap != <span class="literal">null</span>) {</span><br><span class="line">                <span class="comment">//&#x6784;&#x9020;json&#x683C;&#x5F0F;&#x6570;&#x636E;</span></span><br><span class="line">                <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">                <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; param : paramMap.entrySet()) {</span><br><span class="line">                    jsonObject.put(param.getKey(),param.getValue());</span><br><span class="line">                }</span><br><span class="line">                <span class="type">StringEntity</span> <span class="variable">entity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringEntity</span>(jsonObject.toString(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">                <span class="comment">//&#x8BBE;&#x7F6E;&#x8BF7;&#x6C42;&#x7F16;&#x7801;</span></span><br><span class="line">                entity.setContentEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">                <span class="comment">//&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x7C7B;&#x578B;</span></span><br><span class="line">                entity.setContentType(<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">                httpPost.setEntity(entity);</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            httpPost.setConfig(builderRequestConfig());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// &#x6267;&#x884C;http&#x8BF7;&#x6C42;</span></span><br><span class="line">            response = httpClient.execute(httpPost);</span><br><span class="line"></span><br><span class="line">            resultString = EntityUtils.toString(response.getEntity(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                response.close();</span><br><span class="line">            } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> resultString;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> RequestConfig <span class="title function_">builderRequestConfig</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> RequestConfig.custom()</span><br><span class="line">                .setConnectTimeout(TIMEOUT_MSEC)</span><br><span class="line">                .setConnectionRequestTimeout(TIMEOUT_MSEC)</span><br><span class="line">                .setSocketTimeout(TIMEOUT_MSEC).build();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="&#x81F3;&#x6B64;&#x540E;&#x7AEF;&#x5B9E;&#x73B0;&#x5FAE;&#x4FE1;&#x767B;&#x5F55;&#x7684;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#x5B8C;&#x6210;"><a href="#&#x81F3;&#x6B64;&#x540E;&#x7AEF;&#x5B9E;&#x73B0;&#x5FAE;&#x4FE1;&#x767B;&#x5F55;&#x7684;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#x5B8C;&#x6210;" class="headerlink" title="&#x81F3;&#x6B64;&#x540E;&#x7AEF;&#x5B9E;&#x73B0;&#x5FAE;&#x4FE1;&#x767B;&#x5F55;&#x7684;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#x5B8C;&#x6210;"></a>&#x81F3;&#x6B64;&#x540E;&#x7AEF;&#x5B9E;&#x73B0;&#x5FAE;&#x4FE1;&#x767B;&#x5F55;&#x7684;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#x5B8C;&#x6210;</h2>]]></content>
      <categories>
        <category>Java</category>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
        <tag>后端</tag>
      </tags>
  </entry>
  <entry>
    <title>在SpringBoot中使用SpringCache</title>
    <url>/2024/05/20/SpringCache/</url>
    <content><![CDATA[<h2 id="SpringCache&#x7684;&#x4F9D;&#x8D56;"><a href="#SpringCache&#x7684;&#x4F9D;&#x8D56;" class="headerlink" title="SpringCache&#x7684;&#x4F9D;&#x8D56;"></a>SpringCache&#x7684;&#x4F9D;&#x8D56;</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2024/05/20/SpringCache/springCache.png" style="zoom:45%;">

<img src="/2024/05/20/SpringCache/comt.png" style="zoom:45%;">

<h2 id="&#x4E00;-&#x5728;&#x542F;&#x52A8;&#x7C7B;&#x4E0A;&#x52A0;&#x5165;-EnableCaching"><a href="#&#x4E00;-&#x5728;&#x542F;&#x52A8;&#x7C7B;&#x4E0A;&#x52A0;&#x5165;-EnableCaching" class="headerlink" title="&#x4E00; &#x5728;&#x542F;&#x52A8;&#x7C7B;&#x4E0A;&#x52A0;&#x5165; @EnableCaching"></a>&#x4E00; &#x5728;&#x542F;&#x52A8;&#x7C7B;&#x4E0A;&#x52A0;&#x5165; @EnableCaching</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheDemoApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(CacheDemoApplication.class,args);</span><br><span class="line">        log.info(<span class="string">&quot;&#x9879;&#x76EE;&#x542F;&#x52A8;&#x6210;&#x529F;...&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="&#x4E8C;-&#x5728;&#x9700;&#x8981;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165;-CachePut"><a href="#&#x4E8C;-&#x5728;&#x9700;&#x8981;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165;-CachePut" class="headerlink" title="&#x4E8C; &#x5728;&#x9700;&#x8981;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165; @CachePut"></a>&#x4E8C; &#x5728;&#x9700;&#x8981;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165; @CachePut</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span></span><br><span class="line"><span class="meta">@CachePut(cacheNames = &quot;userCache&quot;, key = &quot;#user.id&quot;)</span>  <span class="comment">// &#x5982;&#x679C;&#x4F7F;&#x7528;SpringCache&#x7F13;&#x5B58;&#x6570;&#x636E;, key&#x7684;&#x751F;&#x6210;: userCache:: 2</span></span><br><span class="line"><span class="meta">@CachePut(cacheNames = &quot;userCache&quot;, key = &quot;#result.id&quot;)</span>  <span class="comment">// &#x5BF9;&#x8C61;&#x5BFC;&#x822A;, &#x6B64;&#x65F6;result&#x83B7;&#x5F97;&#x7684;&#x662F;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x8FD4;&#x56DE;&#x503C;</span></span><br><span class="line"><span class="meta">@CachePut(cacheNames = &quot;userCache&quot;, key = &quot;#p0.id&quot;)</span>  <span class="comment">// &#x6B64;&#x65F6;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x5F62;&#x53C2;&#x7684;id, p1&#x5219;&#x662F;&#x7B2C;&#x4E8C;&#x4E2A;&#x5F62;&#x53C2;</span></span><br><span class="line"><span class="meta">@CachePut(cacheNames = &quot;userCache&quot;, key = &quot;#a0.id&quot;)</span>  <span class="comment">// &#x6B64;&#x65F6;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x4E5F;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x5F62;&#x53C2;&#x7684;id, p1&#x5219;&#x662F;&#x7B2C;&#x4E8C;&#x4E2A;&#x5F62;&#x53C2;</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span>{</span><br><span class="line">    userMapper.insert(user);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x5728;redis&#x4E2D;&#x6570;&#x636E;&#x7684;&#x5B58;&#x5728;&#x5F62;&#x5F0F;"><a href="#&#x5728;redis&#x4E2D;&#x6570;&#x636E;&#x7684;&#x5B58;&#x5728;&#x5F62;&#x5F0F;" class="headerlink" title="&#x5728;redis&#x4E2D;&#x6570;&#x636E;&#x7684;&#x5B58;&#x5728;&#x5F62;&#x5F0F;"></a>&#x5728;redis&#x4E2D;&#x6570;&#x636E;&#x7684;&#x5B58;&#x5728;&#x5F62;&#x5F0F;</h3><img src="/2024/05/20/SpringCache/cachedis.png" style="zoom:45%;">

<h4 id="&#x6B64;&#x79CD;&#x60C5;&#x51B5;&#x662F;-&#x4F7F;&#x7528;&#x7684;user-id&#x4F5C;&#x4E3A;key-&#x524D;&#x7F00;name&#x662F;userCache-redis&#x4F1A;&#x5C06;-&#x4E4B;&#x95F4;&#x8FDE;&#x63A5;&#x7684;&#x5173;&#x7CFB;&#x505A;&#x6811;&#x72B6;&#x5206;&#x7C7B;"><a href="#&#x6B64;&#x79CD;&#x60C5;&#x51B5;&#x662F;-&#x4F7F;&#x7528;&#x7684;user-id&#x4F5C;&#x4E3A;key-&#x524D;&#x7F00;name&#x662F;userCache-redis&#x4F1A;&#x5C06;-&#x4E4B;&#x95F4;&#x8FDE;&#x63A5;&#x7684;&#x5173;&#x7CFB;&#x505A;&#x6811;&#x72B6;&#x5206;&#x7C7B;" class="headerlink" title="&#x6B64;&#x79CD;&#x60C5;&#x51B5;&#x662F; &#x4F7F;&#x7528;&#x7684;user.id&#x4F5C;&#x4E3A;key, &#x524D;&#x7F00;name&#x662F;userCache, redis&#x4F1A;&#x5C06; :: &#x4E4B;&#x95F4;&#x8FDE;&#x63A5;&#x7684;&#x5173;&#x7CFB;&#x505A;&#x6811;&#x72B6;&#x5206;&#x7C7B;"></a>&#x6B64;&#x79CD;&#x60C5;&#x51B5;&#x662F; &#x4F7F;&#x7528;&#x7684;user.id&#x4F5C;&#x4E3A;key, &#x524D;&#x7F00;name&#x662F;userCache, redis&#x4F1A;&#x5C06; :: &#x4E4B;&#x95F4;&#x8FDE;&#x63A5;&#x7684;&#x5173;&#x7CFB;&#x505A;&#x6811;&#x72B6;&#x5206;&#x7C7B;</h4><h2 id="&#x4E09;-&#x5728;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;&#x524D;&#x5148;&#x67E5;&#x7F13;&#x5B58;-&#x5728;&#x8FD9;&#x6837;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165;-Cacheable-&#x5982;&#x679C;&#x7F13;&#x5B58;&#x4E2D;&#x6CA1;&#x6709;-&#x5219;&#x67E5;&#x6570;&#x636E;&#x5E93;-&#x7136;&#x540E;&#x81EA;&#x52A8;&#x5C06;&#x6570;&#x636E;&#x52A0;&#x5165;&#x7F13;&#x5B58;"><a href="#&#x4E09;-&#x5728;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;&#x524D;&#x5148;&#x67E5;&#x7F13;&#x5B58;-&#x5728;&#x8FD9;&#x6837;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165;-Cacheable-&#x5982;&#x679C;&#x7F13;&#x5B58;&#x4E2D;&#x6CA1;&#x6709;-&#x5219;&#x67E5;&#x6570;&#x636E;&#x5E93;-&#x7136;&#x540E;&#x81EA;&#x52A8;&#x5C06;&#x6570;&#x636E;&#x52A0;&#x5165;&#x7F13;&#x5B58;" class="headerlink" title="&#x4E09; &#x5728;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;&#x524D;&#x5148;&#x67E5;&#x7F13;&#x5B58;, &#x5728;&#x8FD9;&#x6837;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165; @Cacheable, &#x5982;&#x679C;&#x7F13;&#x5B58;&#x4E2D;&#x6CA1;&#x6709;, &#x5219;&#x67E5;&#x6570;&#x636E;&#x5E93;,&#x7136;&#x540E;&#x81EA;&#x52A8;&#x5C06;&#x6570;&#x636E;&#x52A0;&#x5165;&#x7F13;&#x5B58;"></a>&#x4E09; &#x5728;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;&#x524D;&#x5148;&#x67E5;&#x7F13;&#x5B58;, &#x5728;&#x8FD9;&#x6837;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165; @Cacheable, &#x5982;&#x679C;&#x7F13;&#x5B58;&#x4E2D;&#x6CA1;&#x6709;, &#x5219;&#x67E5;&#x6570;&#x636E;&#x5E93;,&#x7136;&#x540E;&#x81EA;&#x52A8;&#x5C06;&#x6570;&#x636E;&#x52A0;&#x5165;&#x7F13;&#x5B58;</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line"><span class="meta">@Cacheable(cacheNames = &quot;userCache&quot;, key = &quot;#id&quot;)</span>  <span class="comment">// &#x5728; Redis&#x4E2D;&#x67E5;&#x8BE2; userCache:: id , &#x5982;&#x679C;&#x5B58;&#x5728;&#x5219;&#x4E0D;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x67E5;&#x8BE2;</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">getById</span><span class="params">(Long id)</span>{</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.getById(id);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="&#x56DB;-&#x8981;&#x6E05;&#x7406;&#x4E00;&#x6761;&#x6216;&#x591A;&#x6761;&#x7F13;&#x5B58;-&#x5219;&#x5728;&#x8BE5;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165;-CacheEnvict-&#x8981;&#x6E05;&#x7406;&#x4E00;&#x6761;&#x5219;&#x6307;&#x5B9A;key-x3D-&#x201C;-id&#x201D;-&#x8981;&#x6E05;&#x7406;&#x6240;&#x6709;cacheName&#x4E0B;&#x7684;&#x7F13;&#x5B58;-&#x5219;&#x52A0;&#x5165;allEntries-x3D-true"><a href="#&#x56DB;-&#x8981;&#x6E05;&#x7406;&#x4E00;&#x6761;&#x6216;&#x591A;&#x6761;&#x7F13;&#x5B58;-&#x5219;&#x5728;&#x8BE5;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165;-CacheEnvict-&#x8981;&#x6E05;&#x7406;&#x4E00;&#x6761;&#x5219;&#x6307;&#x5B9A;key-x3D-&#x201C;-id&#x201D;-&#x8981;&#x6E05;&#x7406;&#x6240;&#x6709;cacheName&#x4E0B;&#x7684;&#x7F13;&#x5B58;-&#x5219;&#x52A0;&#x5165;allEntries-x3D-true" class="headerlink" title="&#x56DB; &#x8981;&#x6E05;&#x7406;&#x4E00;&#x6761;&#x6216;&#x591A;&#x6761;&#x7F13;&#x5B58;, &#x5219;&#x5728;&#x8BE5;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165; @CacheEnvict , &#x8981;&#x6E05;&#x7406;&#x4E00;&#x6761;&#x5219;&#x6307;&#x5B9A;key = &#x201C;#id&#x201D;, &#x8981;&#x6E05;&#x7406;&#x6240;&#x6709;cacheName&#x4E0B;&#x7684;&#x7F13;&#x5B58;, &#x5219;&#x52A0;&#x5165;allEntries = true"></a>&#x56DB; &#x8981;&#x6E05;&#x7406;&#x4E00;&#x6761;&#x6216;&#x591A;&#x6761;&#x7F13;&#x5B58;, &#x5219;&#x5728;&#x8BE5;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165; @CacheEnvict , &#x8981;&#x6E05;&#x7406;&#x4E00;&#x6761;&#x5219;&#x6307;&#x5B9A;key = &#x201C;#id&#x201D;, &#x8981;&#x6E05;&#x7406;&#x6240;&#x6709;cacheName&#x4E0B;&#x7684;&#x7F13;&#x5B58;, &#x5219;&#x52A0;&#x5165;allEntries = true</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="meta">@CacheEvict(cacheNames = &quot;userCache&quot;, key = &quot;#id&quot;)</span> <span class="comment">// &#x6B64;&#x65F6;&#x6307;&#x5B9A;&#x6E05;&#x7406;&#x4E00;&#x6761;&#x7F13;&#x5B58; userCache::id</span></span><br><span class="line">   <span class="meta">@DeleteMapping</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>{</span><br><span class="line">       userMapper.deleteById(id);</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   <span class="meta">@CacheEvict(cacheNames = &quot;userCache&quot;, allEntries = true)</span>  <span class="comment">// &#x6B64;&#x65F6;&#x6E05;&#x7406;&#x6240;&#x6709; userCache&#x4E0B;&#x7684;&#x7F13;&#x5B58;</span></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;/delAll&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteAll</span><span class="params">()</span>{</span><br><span class="line">       userMapper.deleteAll();</span><br><span class="line">   }</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
        <tag>后端</tag>
      </tags>
  </entry>
  <entry>
    <title>使用jwt进行用户登录验证</title>
    <url>/2024/05/18/jwt/</url>
    <content><![CDATA[<h3 id="&#x4E00;-&#x8981;&#x4F7F;&#x7528;JWT&#x505A;&#x7528;&#x6237;&#x767B;&#x5F55;&#x9A8C;&#x8BC1;-&#x9996;&#x5148;&#x8981;&#x5F15;&#x5165;-JwtUtil&#x5DE5;&#x5177;&#x7C7B;-&#x5176;&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x751F;&#x6210;jwt&#x4E0E;&#x89E3;&#x5BC6;jwt&#x7684;&#x51FD;&#x6570;"><a href="#&#x4E00;-&#x8981;&#x4F7F;&#x7528;JWT&#x505A;&#x7528;&#x6237;&#x767B;&#x5F55;&#x9A8C;&#x8BC1;-&#x9996;&#x5148;&#x8981;&#x5F15;&#x5165;-JwtUtil&#x5DE5;&#x5177;&#x7C7B;-&#x5176;&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x751F;&#x6210;jwt&#x4E0E;&#x89E3;&#x5BC6;jwt&#x7684;&#x51FD;&#x6570;" class="headerlink" title="&#x4E00; &#x8981;&#x4F7F;&#x7528;JWT&#x505A;&#x7528;&#x6237;&#x767B;&#x5F55;&#x9A8C;&#x8BC1;, &#x9996;&#x5148;&#x8981;&#x5F15;&#x5165; JwtUtil&#x5DE5;&#x5177;&#x7C7B;, &#x5176;&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x751F;&#x6210;jwt&#x4E0E;&#x89E3;&#x5BC6;jwt&#x7684;&#x51FD;&#x6570;"></a>&#x4E00; &#x8981;&#x4F7F;&#x7528;JWT&#x505A;&#x7528;&#x6237;&#x767B;&#x5F55;&#x9A8C;&#x8BC1;, &#x9996;&#x5148;&#x8981;&#x5F15;&#x5165; JwtUtil&#x5DE5;&#x5177;&#x7C7B;, &#x5176;&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x751F;&#x6210;jwt&#x4E0E;&#x89E3;&#x5BC6;jwt&#x7684;&#x51FD;&#x6570;</h3><p>```java utils.JwtUtil &#x4E2D;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtUtil</span> {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x751F;&#x6210;jwt</span></span><br><span class="line"><span class="comment">     * &#x4F7F;&#x7528;Hs256&#x7B97;&#x6CD5;, &#x79C1;&#x5319;&#x4F7F;&#x7528;&#x56FA;&#x5B9A;&#x79D8;&#x94A5;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> secretKey jwt&#x79D8;&#x94A5;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ttlMillis jwt&#x8FC7;&#x671F;&#x65F6;&#x95F4;(&#x6BEB;&#x79D2;)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> claims    &#x8BBE;&#x7F6E;&#x7684;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">createJWT</span><span class="params">(String secretKey, <span class="type">long</span> ttlMillis, Map&lt;String, Object&gt; claims)</span> {</span><br><span class="line">        <span class="comment">// &#x6307;&#x5B9A;&#x7B7E;&#x540D;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528;&#x7684;&#x7B7E;&#x540D;&#x7B97;&#x6CD5;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;header&#x90A3;&#x90E8;&#x5206;</span></span><br><span class="line">        <span class="type">SignatureAlgorithm</span> <span class="variable">signatureAlgorithm</span> <span class="operator">=</span> SignatureAlgorithm.HS256;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x751F;&#x6210;JWT&#x7684;&#x65F6;&#x95F4;</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">expMillis</span> <span class="operator">=</span> System.currentTimeMillis() + ttlMillis;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">exp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(expMillis);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x8BBE;&#x7F6E;jwt&#x7684;body</span></span><br><span class="line">        <span class="type">JwtBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> Jwts.builder()</span><br><span class="line">                <span class="comment">// &#x5982;&#x679C;&#x6709;&#x79C1;&#x6709;&#x58F0;&#x660E;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x5148;&#x8BBE;&#x7F6E;&#x8FD9;&#x4E2A;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x7684;&#x79C1;&#x6709;&#x7684;&#x58F0;&#x660E;&#xFF0C;&#x8FD9;&#x4E2A;&#x662F;&#x7ED9;builder&#x7684;claim&#x8D4B;&#x503C;&#xFF0C;&#x4E00;&#x65E6;&#x5199;&#x5728;&#x6807;&#x51C6;&#x7684;&#x58F0;&#x660E;&#x8D4B;&#x503C;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x662F;&#x8986;&#x76D6;&#x4E86;&#x90A3;&#x4E9B;&#x6807;&#x51C6;&#x7684;&#x58F0;&#x660E;&#x7684;</span></span><br><span class="line">                .setClaims(claims)</span><br><span class="line">                <span class="comment">// &#x8BBE;&#x7F6E;&#x7B7E;&#x540D;&#x4F7F;&#x7528;&#x7684;&#x7B7E;&#x540D;&#x7B97;&#x6CD5;&#x548C;&#x7B7E;&#x540D;&#x4F7F;&#x7528;&#x7684;&#x79D8;&#x94A5;</span></span><br><span class="line">                .signWith(signatureAlgorithm, secretKey.getBytes(StandardCharsets.UTF_8))</span><br><span class="line">                <span class="comment">// &#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;</span></span><br><span class="line">                .setExpiration(exp);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> builder.compact();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Token&#x89E3;&#x5BC6;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> secretKey jwt&#x79D8;&#x94A5; &#x6B64;&#x79D8;&#x94A5;&#x4E00;&#x5B9A;&#x8981;&#x4FDD;&#x7559;&#x597D;&#x5728;&#x670D;&#x52A1;&#x7AEF;, &#x4E0D;&#x80FD;&#x66B4;&#x9732;&#x51FA;&#x53BB;, &#x5426;&#x5219;sign&#x5C31;&#x53EF;&#x4EE5;&#x88AB;&#x4F2A;&#x9020;, &#x5982;&#x679C;&#x5BF9;&#x63A5;&#x591A;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x5EFA;&#x8BAE;&#x6539;&#x9020;&#x6210;&#x591A;&#x4E2A;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> token     &#x52A0;&#x5BC6;&#x540E;&#x7684;token</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Claims <span class="title function_">parseJWT</span><span class="params">(String secretKey, String token)</span> {</span><br><span class="line">        <span class="comment">// &#x5F97;&#x5230;DefaultJwtParser</span></span><br><span class="line">        <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> Jwts.parser()</span><br><span class="line">                <span class="comment">// &#x8BBE;&#x7F6E;&#x7B7E;&#x540D;&#x7684;&#x79D8;&#x94A5;</span></span><br><span class="line">                .setSigningKey(secretKey.getBytes(StandardCharsets.UTF_8))</span><br><span class="line">                <span class="comment">// &#x8BBE;&#x7F6E;&#x9700;&#x8981;&#x89E3;&#x6790;&#x7684;jwt</span></span><br><span class="line">                .parseClaimsJws(token).getBody();</span><br><span class="line">        <span class="keyword">return</span> claims;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="&#x4E8C;-&#x5728;application&#x4E2D;&#x5148;&#x5BF9;jwt&#x6240;&#x9700;&#x7684;&#x53C2;&#x6570;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;-&#x7136;&#x540E;&#x901A;&#x8FC7;&#x6CE8;&#x5165;&#x7684;&#x65B9;&#x5F0F;&#x8D4B;&#x503C;&#x7ED9;&#x5B9E;&#x4F53;&#x7C7B;JwtProperties-java-&#x4EE5;&#x4F9B;&#x540E;&#x671F;&#x4F7F;&#x7528;"><a href="#&#x4E8C;-&#x5728;application&#x4E2D;&#x5148;&#x5BF9;jwt&#x6240;&#x9700;&#x7684;&#x53C2;&#x6570;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;-&#x7136;&#x540E;&#x901A;&#x8FC7;&#x6CE8;&#x5165;&#x7684;&#x65B9;&#x5F0F;&#x8D4B;&#x503C;&#x7ED9;&#x5B9E;&#x4F53;&#x7C7B;JwtProperties-java-&#x4EE5;&#x4F9B;&#x540E;&#x671F;&#x4F7F;&#x7528;" class="headerlink" title="&#x4E8C; &#x5728;application&#x4E2D;&#x5148;&#x5BF9;jwt&#x6240;&#x9700;&#x7684;&#x53C2;&#x6570;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;, &#x7136;&#x540E;&#x901A;&#x8FC7;&#x6CE8;&#x5165;&#x7684;&#x65B9;&#x5F0F;&#x8D4B;&#x503C;&#x7ED9;&#x5B9E;&#x4F53;&#x7C7B;JwtProperties.java, &#x4EE5;&#x4F9B;&#x540E;&#x671F;&#x4F7F;&#x7528;"></a>&#x4E8C; &#x5728;application&#x4E2D;&#x5148;&#x5BF9;jwt&#x6240;&#x9700;&#x7684;&#x53C2;&#x6570;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;, &#x7136;&#x540E;&#x901A;&#x8FC7;&#x6CE8;&#x5165;&#x7684;&#x65B9;&#x5F0F;&#x8D4B;&#x503C;&#x7ED9;&#x5B9E;&#x4F53;&#x7C7B;JwtProperties.java, &#x4EE5;&#x4F9B;&#x540E;&#x671F;&#x4F7F;&#x7528;</h3><p>```yml application.yml &#x4E2D;</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">work:</span></span><br><span class="line">  <span class="attr">jwt:</span></span><br><span class="line">    <span class="comment"># &#x8BBE;&#x7F6E;jwt&#x7B7E;&#x540D;&#x52A0;&#x5BC6;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x79D8;&#x94A5; </span></span><br><span class="line">    <span class="attr">admin-secret-key:</span> <span class="string">itcast</span>   </span><br><span class="line">    <span class="comment"># &#x8BBE;&#x7F6E;jwt&#x8FC7;&#x671F;&#x65F6;&#x95F4;</span></span><br><span class="line">    <span class="attr">admin-ttl:</span> <span class="number">7200000</span></span><br><span class="line">    <span class="comment"># &#x8BBE;&#x7F6E;&#x524D;&#x7AEF;&#x4F20;&#x9012;&#x8FC7;&#x6765;&#x7684;&#x4EE4;&#x724C;&#x540D;&#x79F0;</span></span><br><span class="line">    <span class="attr">admin-token-name:</span> <span class="string">token</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>```java properties.JwtProperties.java &#x4E2D;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;work.jwt&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtProperties</span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x7BA1;&#x7406;&#x7AEF;&#x5458;&#x5DE5;&#x751F;&#x6210;jwt&#x4EE4;&#x724C;&#x76F8;&#x5173;&#x914D;&#x7F6E;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String adminSecretKey;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> adminTtl;</span><br><span class="line">    <span class="keyword">private</span> String adminTokenName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x7528;&#x6237;&#x7AEF;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x751F;&#x6210;jwt&#x4EE4;&#x724C;&#x76F8;&#x5173;&#x914D;&#x7F6E;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String userSecretKey;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> userTtl;</span><br><span class="line">    <span class="keyword">private</span> String userTokenName;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x4E09;-&#x521B;&#x5EFA;JwtTokenadminInterceptor&#x62E6;&#x622A;&#x5668;-&#x968F;&#x540E;&#x5C06;&#x5176;&#x52A0;&#x5165;&#x914D;&#x7F6E;&#x6587;&#x4EF6;WebMvcConfiguration&#x4E2D;-&#x5B83;&#x53EF;&#x4EE5;&#x62E6;&#x622A;&#x6307;&#x5B9A;&#x7684;&#x8BF7;&#x6C42;&#x5934;&#x4ECE;&#x4E2D;&#x83B7;&#x53D6;&#x5230;token"><a href="#&#x4E09;-&#x521B;&#x5EFA;JwtTokenadminInterceptor&#x62E6;&#x622A;&#x5668;-&#x968F;&#x540E;&#x5C06;&#x5176;&#x52A0;&#x5165;&#x914D;&#x7F6E;&#x6587;&#x4EF6;WebMvcConfiguration&#x4E2D;-&#x5B83;&#x53EF;&#x4EE5;&#x62E6;&#x622A;&#x6307;&#x5B9A;&#x7684;&#x8BF7;&#x6C42;&#x5934;&#x4ECE;&#x4E2D;&#x83B7;&#x53D6;&#x5230;token" class="headerlink" title="&#x4E09; &#x521B;&#x5EFA;JwtTokenadminInterceptor&#x62E6;&#x622A;&#x5668;, &#x968F;&#x540E;&#x5C06;&#x5176;&#x52A0;&#x5165;&#x914D;&#x7F6E;&#x6587;&#x4EF6;WebMvcConfiguration&#x4E2D;,&#x5B83;&#x53EF;&#x4EE5;&#x62E6;&#x622A;&#x6307;&#x5B9A;&#x7684;&#x8BF7;&#x6C42;&#x5934;&#x4ECE;&#x4E2D;&#x83B7;&#x53D6;&#x5230;token"></a>&#x4E09; &#x521B;&#x5EFA;JwtTokenadminInterceptor&#x62E6;&#x622A;&#x5668;, &#x968F;&#x540E;&#x5C06;&#x5176;&#x52A0;&#x5165;&#x914D;&#x7F6E;&#x6587;&#x4EF6;WebMvcConfiguration&#x4E2D;,&#x5B83;&#x53EF;&#x4EE5;&#x62E6;&#x622A;&#x6307;&#x5B9A;&#x7684;&#x8BF7;&#x6C42;&#x5934;&#x4ECE;&#x4E2D;&#x83B7;&#x53D6;&#x5230;token</h3><p>```java interceptor.JwtTokenAdminInterceptor.java &#x4E2D;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtTokenAdminInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JwtProperties jwtProperties;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x6821;&#x9A8C;jwt</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="comment">//&#x5224;&#x65AD;&#x5F53;&#x524D;&#x62E6;&#x622A;&#x5230;&#x7684;&#x662F;Controller&#x7684;&#x65B9;&#x6CD5;&#x8FD8;&#x662F;&#x5176;&#x4ED6;&#x8D44;&#x6E90;</span></span><br><span class="line">        <span class="keyword">if</span> (!(handler <span class="keyword">instanceof</span> HandlerMethod)) {</span><br><span class="line">            <span class="comment">//&#x5F53;&#x524D;&#x62E6;&#x622A;&#x5230;&#x7684;&#x4E0D;&#x662F;&#x52A8;&#x6001;&#x65B9;&#x6CD5;&#xFF0C;&#x76F4;&#x63A5;&#x653E;&#x884C;</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1&#x3001;&#x4ECE;&#x8BF7;&#x6C42;&#x5934;&#x4E2D;&#x83B7;&#x53D6;&#x4EE4;&#x724C;</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(jwtProperties.getAdminTokenName());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2&#x3001;&#x6821;&#x9A8C;&#x4EE4;&#x724C;</span></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            log.info(<span class="string">&quot;jwt&#x6821;&#x9A8C;:{}&quot;</span>, token);</span><br><span class="line">            <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> JwtUtil.parseJWT(jwtProperties.getAdminSecretKey(), token);</span><br><span class="line">            <span class="type">Long</span> <span class="variable">empId</span> <span class="operator">=</span> Long.valueOf(claims.get(JwtClaimsConstant.EMP_ID).toString());</span><br><span class="line">            log.info(<span class="string">&quot;&#x5F53;&#x524D;&#x5458;&#x5DE5;id&#xFF1A;&quot;</span>, empId);</span><br><span class="line">            BaseContext.setCurrentId(empId);</span><br><span class="line">            <span class="comment">//3&#x3001;&#x901A;&#x8FC7;&#xFF0C;&#x653E;&#x884C;</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        } <span class="keyword">catch</span> (Exception ex) {</span><br><span class="line">            <span class="comment">//4&#x3001;&#x4E0D;&#x901A;&#x8FC7;&#xFF0C;&#x54CD;&#x5E94;401&#x72B6;&#x6001;&#x7801;</span></span><br><span class="line">            response.setStatus(<span class="number">401</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>```java WebMvcConfiguration.java &#x4E2D;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x6CE8;&#x518C;&#x81EA;&#x5B9A;&#x4E49;&#x62E6;&#x622A;&#x5668;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> {</span><br><span class="line">    log.info(<span class="string">&quot;&#x5F00;&#x59CB;&#x6CE8;&#x518C;&#x81EA;&#x5B9A;&#x4E49;&#x62E6;&#x622A;&#x5668;...&quot;</span>);</span><br><span class="line">    registry.addInterceptor(jwtTokenAdminInterceptor)</span><br><span class="line">            .addPathPatterns(<span class="string">&quot;/admin/**&quot;</span>)</span><br><span class="line">            .excludePathPatterns(<span class="string">&quot;/admin/employee/login&quot;</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x56DB;-&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5728;&#x767B;&#x5F55;&#x7684;&#x65B9;&#x6CD5;&#x4E2D;-&#x914D;&#x7F6E;&#x7B2C;&#x4E00;&#x6B21;&#x767B;&#x5F55;&#x65F6;&#x751F;&#x6210;jwt&#x7684;&#x65B9;&#x6CD5;"><a href="#&#x56DB;-&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5728;&#x767B;&#x5F55;&#x7684;&#x65B9;&#x6CD5;&#x4E2D;-&#x914D;&#x7F6E;&#x7B2C;&#x4E00;&#x6B21;&#x767B;&#x5F55;&#x65F6;&#x751F;&#x6210;jwt&#x7684;&#x65B9;&#x6CD5;" class="headerlink" title="&#x56DB; &#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5728;&#x767B;&#x5F55;&#x7684;&#x65B9;&#x6CD5;&#x4E2D;,&#x914D;&#x7F6E;&#x7B2C;&#x4E00;&#x6B21;&#x767B;&#x5F55;&#x65F6;&#x751F;&#x6210;jwt&#x7684;&#x65B9;&#x6CD5;"></a>&#x56DB; &#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5728;&#x767B;&#x5F55;&#x7684;&#x65B9;&#x6CD5;&#x4E2D;,&#x914D;&#x7F6E;&#x7B2C;&#x4E00;&#x6B21;&#x767B;&#x5F55;&#x65F6;&#x751F;&#x6210;jwt&#x7684;&#x65B9;&#x6CD5;</h3><p>```java controller.loginController.java *login()&#x4E2D;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> JwtProperties jwtProperties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x767B;&#x5F55;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> employeeLoginDTO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;&#x5458;&#x5DE5;&#x767B;&#x5F55;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;EmployeeLoginVO&gt; <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> EmployeeLoginDTO employeeLoginDTO)</span> {</span><br><span class="line">    log.info(<span class="string">&quot;&#x5458;&#x5DE5;&#x767B;&#x5F55;&#xFF1A;{}&quot;</span>, employeeLoginDTO);</span><br><span class="line"></span><br><span class="line">    <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> employeeService.login(employeeLoginDTO);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//&#x767B;&#x5F55;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x751F;&#x6210;jwt&#x4EE4;&#x724C;</span></span><br><span class="line">    Map&lt;String, Object&gt; claims = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    claims.put(JwtClaimsConstant.EMP_ID, employee.getId());</span><br><span class="line">    <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> JwtUtil.createJWT(</span><br><span class="line">            jwtProperties.getAdminSecretKey(),</span><br><span class="line">            jwtProperties.getAdminTtl(),</span><br><span class="line">            claims);</span><br><span class="line"></span><br><span class="line">    <span class="type">EmployeeLoginVO</span> <span class="variable">employeeLoginVO</span> <span class="operator">=</span> EmployeeLoginVO.builder()</span><br><span class="line">            .id(employee.getId())</span><br><span class="line">            .userName(employee.getUsername())</span><br><span class="line">            .name(employee.getName())</span><br><span class="line">            .token(token)</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Result.success(employeeLoginVO);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x5230;&#x6B64;-jwt&#x767B;&#x5F55;&#x68C0;&#x6D4B;&#x5B8C;&#x6210;-&#x540E;&#x7EED;&#x68C0;&#x67E5;jwt&#x4E1A;&#x52A1;&#x7531;&#x914D;&#x7F6E;&#x7C7B;&#x6587;&#x4EF6;&#x62E6;&#x622A;&#x8DEF;&#x5F84;&#x540E;-&#x7ECF;&#x8FC7;JwtTokenadminInterceptor&#x62E6;&#x622A;&#x5668;&#x68C0;&#x9A8C;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x653E;&#x884C;"><a href="#&#x5230;&#x6B64;-jwt&#x767B;&#x5F55;&#x68C0;&#x6D4B;&#x5B8C;&#x6210;-&#x540E;&#x7EED;&#x68C0;&#x67E5;jwt&#x4E1A;&#x52A1;&#x7531;&#x914D;&#x7F6E;&#x7C7B;&#x6587;&#x4EF6;&#x62E6;&#x622A;&#x8DEF;&#x5F84;&#x540E;-&#x7ECF;&#x8FC7;JwtTokenadminInterceptor&#x62E6;&#x622A;&#x5668;&#x68C0;&#x9A8C;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x653E;&#x884C;" class="headerlink" title="&#x5230;&#x6B64; jwt&#x767B;&#x5F55;&#x68C0;&#x6D4B;&#x5B8C;&#x6210;, &#x540E;&#x7EED;&#x68C0;&#x67E5;jwt&#x4E1A;&#x52A1;&#x7531;&#x914D;&#x7F6E;&#x7C7B;&#x6587;&#x4EF6;&#x62E6;&#x622A;&#x8DEF;&#x5F84;&#x540E;, &#x7ECF;&#x8FC7;JwtTokenadminInterceptor&#x62E6;&#x622A;&#x5668;&#x68C0;&#x9A8C;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x653E;&#x884C;"></a>&#x5230;&#x6B64; jwt&#x767B;&#x5F55;&#x68C0;&#x6D4B;&#x5B8C;&#x6210;, &#x540E;&#x7EED;&#x68C0;&#x67E5;jwt&#x4E1A;&#x52A1;&#x7531;&#x914D;&#x7F6E;&#x7C7B;&#x6587;&#x4EF6;&#x62E6;&#x622A;&#x8DEF;&#x5F84;&#x540E;, &#x7ECF;&#x8FC7;JwtTokenadminInterceptor&#x62E6;&#x622A;&#x5668;&#x68C0;&#x9A8C;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x653E;&#x884C;</h3>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>后端</tag>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Mybatis下的公共字段自动填充</title>
    <url>/2024/05/13/AutoFill/</url>
    <content><![CDATA[<h2 id="&#x5728;-Mybatis-Plus&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5BF9;&#x5B9E;&#x4F53;&#x7C7B;&#x5C5E;&#x6027;&#x6DFB;&#x52A0;-TableField-fill-x3D-FieldFill-INSERT-&#x8FDB;&#x884C;&#x81EA;&#x52A8;&#x586B;&#x5145;-&#x4F46;&#x5728;mybatis&#x4E2D;&#x901A;&#x5E38;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3;-&#x7136;&#x540E;&#x901A;&#x8FC7;&#x5207;&#x9762;&#x62E6;&#x622A;&#x7528;&#x53CD;&#x5C04;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x8D4B;&#x503C;"><a href="#&#x5728;-Mybatis-Plus&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5BF9;&#x5B9E;&#x4F53;&#x7C7B;&#x5C5E;&#x6027;&#x6DFB;&#x52A0;-TableField-fill-x3D-FieldFill-INSERT-&#x8FDB;&#x884C;&#x81EA;&#x52A8;&#x586B;&#x5145;-&#x4F46;&#x5728;mybatis&#x4E2D;&#x901A;&#x5E38;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3;-&#x7136;&#x540E;&#x901A;&#x8FC7;&#x5207;&#x9762;&#x62E6;&#x622A;&#x7528;&#x53CD;&#x5C04;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x8D4B;&#x503C;" class="headerlink" title="&#x5728; Mybatis_Plus&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5BF9;&#x5B9E;&#x4F53;&#x7C7B;&#x5C5E;&#x6027;&#x6DFB;&#x52A0;@TableField(fill=FieldFill.INSERT)&#x8FDB;&#x884C;&#x81EA;&#x52A8;&#x586B;&#x5145;, &#x4F46;&#x5728;mybatis&#x4E2D;&#x901A;&#x5E38;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3;,&#x7136;&#x540E;&#x901A;&#x8FC7;&#x5207;&#x9762;&#x62E6;&#x622A;&#x7528;&#x53CD;&#x5C04;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x8D4B;&#x503C;"></a>&#x5728; Mybatis_Plus&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5BF9;&#x5B9E;&#x4F53;&#x7C7B;&#x5C5E;&#x6027;&#x6DFB;&#x52A0;@TableField(fill=FieldFill.INSERT)&#x8FDB;&#x884C;&#x81EA;&#x52A8;&#x586B;&#x5145;, &#x4F46;&#x5728;mybatis&#x4E2D;&#x901A;&#x5E38;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3;,&#x7136;&#x540E;&#x901A;&#x8FC7;&#x5207;&#x9762;&#x62E6;&#x622A;&#x7528;&#x53CD;&#x5C04;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x8D4B;&#x503C;</h2><img src="/2024/05/13/AutoFill/autofill.png" style="zoom:38%;">

<h4 id="&#x7B2C;&#x4E00;&#x6B65;-&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3;-AutoFill-&#x7528;&#x4E8E;&#x6807;&#x8BC6;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x81EA;&#x52A8;&#x586B;&#x5145;&#x7684;&#x65B9;&#x6CD5;"><a href="#&#x7B2C;&#x4E00;&#x6B65;-&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3;-AutoFill-&#x7528;&#x4E8E;&#x6807;&#x8BC6;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x81EA;&#x52A8;&#x586B;&#x5145;&#x7684;&#x65B9;&#x6CD5;" class="headerlink" title="&#x7B2C;&#x4E00;&#x6B65;: &#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3; AutoFill, &#x7528;&#x4E8E;&#x6807;&#x8BC6;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x81EA;&#x52A8;&#x586B;&#x5145;&#x7684;&#x65B9;&#x6CD5;"></a>&#x7B2C;&#x4E00;&#x6B65;: &#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x6CE8;&#x89E3; AutoFill, &#x7528;&#x4E8E;&#x6807;&#x8BC6;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x81EA;&#x52A8;&#x586B;&#x5145;&#x7684;&#x65B9;&#x6CD5;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AutoFill {</span><br><span class="line">    <span class="comment">// &#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x7C7B;&#x578B;: UPDATE  INSERT</span></span><br><span class="line">    OperationType <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="&#x7B2C;&#x4E8C;&#x6B65;-&#x81EA;&#x5B9A;&#x4E49;&#x5207;&#x9762;&#x7C7B;-AutoFillAspect-&#x7EDF;&#x4E00;&#x62E6;&#x622A;&#x52A0;&#x5165;&#x4E86;-AutoFill&#x6CE8;&#x89E3;&#x7684;&#x65B9;&#x6CD5;-&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x4E3A;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x8D4B;&#x503C;"><a href="#&#x7B2C;&#x4E8C;&#x6B65;-&#x81EA;&#x5B9A;&#x4E49;&#x5207;&#x9762;&#x7C7B;-AutoFillAspect-&#x7EDF;&#x4E00;&#x62E6;&#x622A;&#x52A0;&#x5165;&#x4E86;-AutoFill&#x6CE8;&#x89E3;&#x7684;&#x65B9;&#x6CD5;-&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x4E3A;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x8D4B;&#x503C;" class="headerlink" title="&#x7B2C;&#x4E8C;&#x6B65;: &#x81EA;&#x5B9A;&#x4E49;&#x5207;&#x9762;&#x7C7B; AutoFillAspect, &#x7EDF;&#x4E00;&#x62E6;&#x622A;&#x52A0;&#x5165;&#x4E86; AutoFill&#x6CE8;&#x89E3;&#x7684;&#x65B9;&#x6CD5;, &#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x4E3A;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x8D4B;&#x503C;"></a>&#x7B2C;&#x4E8C;&#x6B65;: &#x81EA;&#x5B9A;&#x4E49;&#x5207;&#x9762;&#x7C7B; AutoFillAspect, &#x7EDF;&#x4E00;&#x62E6;&#x622A;&#x52A0;&#x5165;&#x4E86; AutoFill&#x6CE8;&#x89E3;&#x7684;&#x65B9;&#x6CD5;, &#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x4E3A;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x8D4B;&#x503C;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoFillAspect</span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x5207;&#x5165;&#x70B9; &#x8BBE;&#x7F6E;&#x62E6;&#x622A;&#x7684;&#x7C7B;&#x53CA;&#x65B9;&#x6CD5;&#x8DEF;&#x5F84;  &#x62E6;&#x622A;&#x7684;&#x6CE8;&#x89E3;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.work.mapper.*.*(..)) &amp;&amp; @annotation(com.work.annotation.AutoFill)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">autoFillPointCut</span><span class="params">()</span> {}</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x524D;&#x7F6E;&#x901A;&#x77E5;. &#x5728;&#x901A;&#x77E5;&#x4E2D;&#x8FDB;&#x884C;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x7684;&#x8D4B;&#x503C;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Before(&quot;autoFillPointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">autoFill</span><span class="params">(JoinPoint joinPoint)</span> {</span><br><span class="line">        log.info(<span class="string">&quot;&#x5F00;&#x59CB;&#x8FDB;&#x884C;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x7684;&#x586B;&#x5145;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x83B7;&#x53D6;&#x5230;&#x5F53;&#x524D;&#x88AB;&#x62E6;&#x622A;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x7C7B;&#x578B;</span></span><br><span class="line">        <span class="type">MethodSignature</span> <span class="variable">signature</span> <span class="operator">=</span> (MethodSignature) joinPoint.getSignature();  <span class="comment">// &#x65B9;&#x6CD5;&#x7B7E;&#x540D;&#x5BF9;&#x8C61; &#x901A;&#x8FC7;&#x5411;&#x4E0B;&#x8F6C;&#x578B;</span></span><br><span class="line">        <span class="type">AutoFill</span> <span class="variable">autoFill</span> <span class="operator">=</span> signature.getMethod().getAnnotation(AutoFill.class);  <span class="comment">// &#x83B7;&#x5F97;&#x65B9;&#x6CD5;&#x7684;&#x6CE8;&#x89E3;&#x5BF9;&#x8C61;</span></span><br><span class="line">        <span class="type">OperationType</span> <span class="variable">operationType</span> <span class="operator">=</span> autoFill.value();  <span class="comment">// &#x83B7;&#x53D6;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x7C7B;&#x578B;  INSERT  UPDATE</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//&#x83B7;&#x53D6;&#x5230;&#x5F53;&#x524D;&#x88AB;&#x62E6;&#x622A;&#x7684;&#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;-&#x5B9E;&#x4F53;&#x5BF9;&#x8C61;</span></span><br><span class="line">        Object[] args = joinPoint.getArgs();</span><br><span class="line">        <span class="keyword">if</span> (args == <span class="literal">null</span> || args.length == <span class="number">0</span>){</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="type">Object</span> <span class="variable">entity</span> <span class="operator">=</span> args[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//&#x51C6;&#x5907;&#x8D4B;&#x503C;&#x7684;&#x6570;&#x636E;</span></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">now</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">        <span class="type">Long</span> <span class="variable">currentId</span> <span class="operator">=</span> BaseContext.getCurrentId();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//&#x8FC7;&#x5462;&#x636E;&#x5F53;&#x524D;&#x4E0D;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#x7C7B;&#x578B;,&#x4E3A;&#x5BF9;&#x5E94;&#x7684;&#x5C5E;&#x6027;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x6765;&#x8D4B;&#x503C;</span></span><br><span class="line">        <span class="keyword">if</span> (operationType == OperationType.INSERT){</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                <span class="comment">// &#x4E3A;4&#x4E2A;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x8D4B;&#x503C;</span></span><br><span class="line">                <span class="comment">// &#x7528;&#x53CD;&#x5C04;&#x8FDB;&#x884C;&#x8D4B;&#x503C;</span></span><br><span class="line">                entity.getClass().getDeclaredMethod(<span class="string">&quot;setCreateTime&quot;</span>, LocalDateTime.class).invoke(entity, now);</span><br><span class="line">                entity.getClass().getDeclaredMethod(<span class="string">&quot;setCreateUser&quot;</span>, Long.class).invoke(entity,currentId);</span><br><span class="line">                entity.getClass().getDeclaredMethod(<span class="string">&quot;setUpdateTime&quot;</span>, LocalDateTime.class).invoke(entity, now);</span><br><span class="line">                entity.getClass().getDeclaredMethod(<span class="string">&quot;setUpdateUser&quot;</span>, Long.class).invoke(entity,currentId);</span><br><span class="line">            } <span class="keyword">catch</span> (IllegalAccessException e) {</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            } <span class="keyword">catch</span> (InvocationTargetException e) {</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            } <span class="keyword">catch</span> (NoSuchMethodException e) {</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span>(operationType == OperationType.UPDATE){</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                <span class="comment">// &#x4E3A;2&#x4E2A;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x8D4B;&#x503C;</span></span><br><span class="line">                <span class="comment">// &#x4F7F;&#x7528;&#x53CD;&#x5C04;&#x8FDB;&#x884C;&#x8D4B;&#x503C;</span></span><br><span class="line">                entity.getClass().getDeclaredMethod(<span class="string">&quot;setUpdateTime&quot;</span>, LocalDateTime.class).invoke(entity, now);</span><br><span class="line">                entity.getClass().getDeclaredMethod(<span class="string">&quot;setUpdateUser&quot;</span>, Long.class).invoke(entity,currentId);</span><br><span class="line">            } <span class="keyword">catch</span> (IllegalAccessException e) {</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            } <span class="keyword">catch</span> (InvocationTargetException e) {</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            } <span class="keyword">catch</span> (NoSuchMethodException e) {</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="&#x7B2C;&#x4E09;&#x6B65;-&#x5728;-Mapper&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165;-AutoFill&#x6CE8;&#x89E3;"><a href="#&#x7B2C;&#x4E09;&#x6B65;-&#x5728;-Mapper&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165;-AutoFill&#x6CE8;&#x89E3;" class="headerlink" title="&#x7B2C;&#x4E09;&#x6B65;: &#x5728; Mapper&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165; AutoFill&#x6CE8;&#x89E3;"></a>&#x7B2C;&#x4E09;&#x6B65;: &#x5728; Mapper&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;&#x5165; AutoFill&#x6CE8;&#x89E3;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@AutoFill(OperationType.UPDATE)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Employee employee)</span>;</span><br></pre></td></tr></table></figure>

<h4 id="&#x5230;&#x6B64;&#x4E3A;&#x6B62;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x81EA;&#x52A8;&#x586B;&#x5145;&#x5B8C;&#x6210;"><a href="#&#x5230;&#x6B64;&#x4E3A;&#x6B62;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x81EA;&#x52A8;&#x586B;&#x5145;&#x5B8C;&#x6210;" class="headerlink" title="&#x5230;&#x6B64;&#x4E3A;&#x6B62;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x81EA;&#x52A8;&#x586B;&#x5145;&#x5B8C;&#x6210;"></a>&#x5230;&#x6B64;&#x4E3A;&#x6B62;&#x516C;&#x5171;&#x5B57;&#x6BB5;&#x81EA;&#x52A8;&#x586B;&#x5145;&#x5B8C;&#x6210;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;sky.jwt&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtProperties</span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x7BA1;&#x7406;&#x7AEF;&#x5458;&#x5DE5;&#x751F;&#x6210;jwt&#x4EE4;&#x724C;&#x76F8;&#x5173;&#x914D;&#x7F6E;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String adminSecretKey;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> adminTtl;</span><br><span class="line">    <span class="keyword">private</span> String adminTokenName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x7528;&#x6237;&#x7AEF;&#x5FAE;&#x4FE1;&#x7528;&#x6237;&#x751F;&#x6210;jwt&#x4EE4;&#x724C;&#x76F8;&#x5173;&#x914D;&#x7F6E;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String userSecretKey;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> userTtl;</span><br><span class="line">    <span class="keyword">private</span> String userTokenName;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>mybatis</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>Swagger之使用knife4j</title>
    <url>/2024/05/11/swagger-with-knife4j/</url>
    <content><![CDATA[<h2 id="&#x4ECB;&#x7ECD;"><a href="#&#x4ECB;&#x7ECD;" class="headerlink" title="&#x4ECB;&#x7ECD;"></a>&#x4ECB;&#x7ECD;</h2><h3 id="&#x6309;&#x7167;Swagger&#x7684;&#x89C4;&#x8303;&#x5B9A;&#x4E49;&#x63A5;&#x53E3;&#x53CA;&#x76F8;&#x5173;&#x4FE1;&#x606F;-&#x5373;&#x53EF;&#x751F;&#x6210;&#x63A5;&#x53E3;&#x6587;&#x6863;&#x53CA;&#x5728;&#x7EBF;&#x8C03;&#x8BD5;&#x9875;&#x9762;"><a href="#&#x6309;&#x7167;Swagger&#x7684;&#x89C4;&#x8303;&#x5B9A;&#x4E49;&#x63A5;&#x53E3;&#x53CA;&#x76F8;&#x5173;&#x4FE1;&#x606F;-&#x5373;&#x53EF;&#x751F;&#x6210;&#x63A5;&#x53E3;&#x6587;&#x6863;&#x53CA;&#x5728;&#x7EBF;&#x8C03;&#x8BD5;&#x9875;&#x9762;" class="headerlink" title="&#x6309;&#x7167;Swagger&#x7684;&#x89C4;&#x8303;&#x5B9A;&#x4E49;&#x63A5;&#x53E3;&#x53CA;&#x76F8;&#x5173;&#x4FE1;&#x606F;,&#x5373;&#x53EF;&#x751F;&#x6210;&#x63A5;&#x53E3;&#x6587;&#x6863;&#x53CA;&#x5728;&#x7EBF;&#x8C03;&#x8BD5;&#x9875;&#x9762;"></a>&#x6309;&#x7167;Swagger&#x7684;&#x89C4;&#x8303;&#x5B9A;&#x4E49;&#x63A5;&#x53E3;&#x53CA;&#x76F8;&#x5173;&#x4FE1;&#x606F;,&#x5373;&#x53EF;&#x751F;&#x6210;&#x63A5;&#x53E3;&#x6587;&#x6863;&#x53CA;&#x5728;&#x7EBF;&#x8C03;&#x8BD5;&#x9875;&#x9762;</h3><h3 id="&#x800C;knife4j&#x662F;&#x96C6;&#x6210;Swagger&#x751F;&#x6210;api&#x6587;&#x6863;&#x7684;&#x589E;&#x5F3A;&#x89E3;&#x51B3;&#x65B9;&#x6848;"><a href="#&#x800C;knife4j&#x662F;&#x96C6;&#x6210;Swagger&#x751F;&#x6210;api&#x6587;&#x6863;&#x7684;&#x589E;&#x5F3A;&#x89E3;&#x51B3;&#x65B9;&#x6848;" class="headerlink" title="&#x800C;knife4j&#x662F;&#x96C6;&#x6210;Swagger&#x751F;&#x6210;api&#x6587;&#x6863;&#x7684;&#x589E;&#x5F3A;&#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>&#x800C;knife4j&#x662F;&#x96C6;&#x6210;Swagger&#x751F;&#x6210;api&#x6587;&#x6863;&#x7684;&#x589E;&#x5F3A;&#x89E3;&#x51B3;&#x65B9;&#x6848;</h3><h3 id="&#x4F7F;&#x7528;&#x65B9;&#x6CD5;"><a href="#&#x4F7F;&#x7528;&#x65B9;&#x6CD5;" class="headerlink" title="&#x4F7F;&#x7528;&#x65B9;&#x6CD5;"></a>&#x4F7F;&#x7528;&#x65B9;&#x6CD5;</h3><h4 id="1-&#x5BFC;&#x5165;knife4j&#x7684;maven&#x5750;&#x6807;"><a href="#1-&#x5BFC;&#x5165;knife4j&#x7684;maven&#x5750;&#x6807;" class="headerlink" title="1, &#x5BFC;&#x5165;knife4j&#x7684;maven&#x5750;&#x6807;"></a>1, &#x5BFC;&#x5165;knife4j&#x7684;maven&#x5750;&#x6807;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;knife4j-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;${knife4j}&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-&#x5728;&#x914D;&#x7F6E;&#x7C7B;&#x4E2D;&#x52A0;&#x5165;-knife4j&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;"><a href="#2-&#x5728;&#x914D;&#x7F6E;&#x7C7B;&#x4E2D;&#x52A0;&#x5165;-knife4j&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;" class="headerlink" title="2, &#x5728;&#x914D;&#x7F6E;&#x7C7B;&#x4E2D;&#x52A0;&#x5165; knife4j&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;"></a>2, &#x5728;&#x914D;&#x7F6E;&#x7C7B;&#x4E2D;&#x52A0;&#x5165; knife4j&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x901A;&#x8FC7;knife4j&#x751F;&#x6210;&#x63A5;&#x53E3;&#x6587;&#x6863;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span> {</span><br><span class="line">    <span class="type">ApiInfo</span> <span class="variable">apiInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ApiInfoBuilder</span>()</span><br><span class="line">            .title(<span class="string">&quot;&#x9879;&#x76EE;&#x63A5;&#x53E3;&#x6587;&#x6863;&quot;</span>)</span><br><span class="line">            .version(<span class="string">&quot;2.0&quot;</span>)</span><br><span class="line">            .description(<span class="string">&quot;&#x9879;&#x76EE;&#x63A5;&#x53E3;&#x6587;&#x6863;&quot;</span>)</span><br><span class="line">            .build();</span><br><span class="line">    <span class="type">Docket</span> <span class="variable">docket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">            .apiInfo(apiInfo)</span><br><span class="line">            .select()</span><br><span class="line">            <span class="comment">// &#x6307;&#x5B9A;&#x751F;&#x6210;&#x63A5;&#x53E3;&#x9700;&#x8981;&#x626B;&#x63CF;&#x7684;&#x5305;</span></span><br><span class="line">            .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.work.controller&quot;</span>))</span><br><span class="line">            .paths(PathSelectors.any())</span><br><span class="line">            .build();</span><br><span class="line">    <span class="keyword">return</span> docket;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="3-&#x8BBE;&#x7F6E;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6620;&#x5C04;-&#x5426;&#x5219;&#x63A5;&#x53E3;&#x6587;&#x6863;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;"><a href="#3-&#x8BBE;&#x7F6E;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6620;&#x5C04;-&#x5426;&#x5219;&#x63A5;&#x53E3;&#x6587;&#x6863;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;" class="headerlink" title="3, &#x8BBE;&#x7F6E;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6620;&#x5C04;, &#x5426;&#x5219;&#x63A5;&#x53E3;&#x6587;&#x6863;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;"></a>3, &#x8BBE;&#x7F6E;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6620;&#x5C04;, &#x5426;&#x5219;&#x63A5;&#x53E3;&#x6587;&#x6863;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x8BBE;&#x7F6E;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6620;&#x5C04;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> {</span><br><span class="line">    log.info(<span class="string">&quot;&#x5F00;&#x59CB;&#x8BBE;&#x7F6E;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6620;&#x5C04;...&quot;</span>);</span><br><span class="line">    registry.addResourceHandler(<span class="string">&quot;/doc.html&quot;</span>).addResourceLocations(<span class="string">&quot;classpath:/META-INF/resources/&quot;</span>);</span><br><span class="line">    registry.addResourceHandler(<span class="string">&quot;/webjars/**&quot;</span>).addResourceLocations(<span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x81F3;&#x6B64;-&#x53EF;&#x5728;-localhost-port-x2F-doc-html-&#x4E2D;&#x8BBF;&#x95EE;&#x5230;&#x63A5;&#x53E3;&#x6587;&#x6863;"><a href="#&#x81F3;&#x6B64;-&#x53EF;&#x5728;-localhost-port-x2F-doc-html-&#x4E2D;&#x8BBF;&#x95EE;&#x5230;&#x63A5;&#x53E3;&#x6587;&#x6863;" class="headerlink" title="&#x81F3;&#x6B64;, &#x53EF;&#x5728; localhost:[port]/doc.html &#x4E2D;&#x8BBF;&#x95EE;&#x5230;&#x63A5;&#x53E3;&#x6587;&#x6863;"></a>&#x81F3;&#x6B64;, &#x53EF;&#x5728; localhost:[port]/doc.html &#x4E2D;&#x8BBF;&#x95EE;&#x5230;&#x63A5;&#x53E3;&#x6587;&#x6863;</h3>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>在springboot中使用md5</title>
    <url>/2024/05/11/use-md5-in-springboot/</url>
    <content><![CDATA[<h2 id="&#x4F7F;&#x7528;SpringBoot&#x81EA;&#x5E26;&#x7684;DigestUtils&#x8FDB;&#x884C;&#x52A0;&#x5BC6;-&#x7136;&#x540E;&#x6BD4;&#x5BF9;"><a href="#&#x4F7F;&#x7528;SpringBoot&#x81EA;&#x5E26;&#x7684;DigestUtils&#x8FDB;&#x884C;&#x52A0;&#x5BC6;-&#x7136;&#x540E;&#x6BD4;&#x5BF9;" class="headerlink" title="&#x4F7F;&#x7528;SpringBoot&#x81EA;&#x5E26;&#x7684;DigestUtils&#x8FDB;&#x884C;&#x52A0;&#x5BC6;, &#x7136;&#x540E;&#x6BD4;&#x5BF9;"></a>&#x4F7F;&#x7528;SpringBoot&#x81EA;&#x5E26;&#x7684;DigestUtils&#x8FDB;&#x884C;&#x52A0;&#x5BC6;, &#x7136;&#x540E;&#x6BD4;&#x5BF9;</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//&#x5BC6;&#x7801;&#x6BD4;&#x5BF9;</span></span><br><span class="line"><span class="comment">//&#x5BF9;&#x524D;&#x7AEF;&#x4F20;&#x8FC7;&#x6765;&#x7684;&#x660E;&#x6587;&#x5BC6;&#x7801;&#x8FDB;&#x884C;md5&#x52A0;&#x5BC6;</span></span><br><span class="line">password = DigestUtils.md5DigestAsHex(password.getBytes());</span><br><span class="line"><span class="keyword">if</span> (!password.equals(employee.getPassword())) {</span><br><span class="line">    <span class="comment">//&#x5BC6;&#x7801;&#x9519;&#x8BEF;</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">PasswordErrorException</span>(MessageConstant.PASSWORD_ERROR);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Java</category>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>使用nginx实现负载均衡</title>
    <url>/2024/05/11/nginx-cfg/</url>
    <content><![CDATA[<h2 id="&#x5728;nginx&#x7684;conf&#x914D;&#x7F6E;&#x4E2D;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x8F6C;&#x53D1;&#x5230;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x5668;"><a href="#&#x5728;nginx&#x7684;conf&#x914D;&#x7F6E;&#x4E2D;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x8F6C;&#x53D1;&#x5230;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x5668;" class="headerlink" title="&#x5728;nginx&#x7684;conf&#x914D;&#x7F6E;&#x4E2D;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x8F6C;&#x53D1;&#x5230;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x5668;"></a>&#x5728;nginx&#x7684;conf&#x914D;&#x7F6E;&#x4E2D;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x8F6C;&#x53D1;&#x5230;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x5668;</h2><h4 id="conf&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;"><a href="#conf&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;" class="headerlink" title="conf&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;"></a>conf&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x5982;&#x4E0B;</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">upstream webservers{</span><br><span class="line">  server 192.168.131.1:8080 weight=90 ;   # &#x670D;&#x52A1;&#x5668;&quot;1&quot;&#x7684;&#x6743;&#x91CD;&#x4E3A;90,&quot;2&quot;&#x6743;&#x91CD;&#x4E3A;10, &#x5219;&#x63A5;&#x8FD1;90%&#x7684;&#x8D44;&#x6E90;&#x8BBF;&#x95EE;&#x7531;&#x670D;&#x52A1;&#x5668;&quot;1&quot;&#x5904;&#x7406;</span><br><span class="line">  server 192.168.131.2:8080 weight=10 ;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">  server {</span><br><span class="line">       listen       80;</span><br><span class="line">       server_name  localhost;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       # &#x53CD;&#x5411;&#x4EE3;&#x7406;,&#x5904;&#x7406;&#x7BA1;&#x7406;&#x7AEF;&#x53D1;&#x9001;&#x7684;&#x8BF7;&#x6C42;</span><br><span class="line">       location /api/ {</span><br><span class="line">           proxy_pass   http://webservers/admin/; </span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">   }</span><br></pre></td></tr></table></figure>

<h4 id="nginx&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x7B56;&#x7565;"><a href="#nginx&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x7B56;&#x7565;" class="headerlink" title="nginx&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x7B56;&#x7565;"></a>nginx&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x7B56;&#x7565;</h4><img src="/2024/05/11/nginx-cfg/fuzai.png" style="zoom:45%;">
]]></content>
      <categories>
        <category>部署</category>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>开发技巧</tag>
      </tags>
  </entry>
  <entry>
    <title>Jackson2json对象映射器</title>
    <url>/2023/02/28/Jackson2HttpMsg/</url>
    <content><![CDATA[<h2 id="&#x5728;&#x6570;&#x636E;&#x5E93;&#x4F7F;&#x7528;&#x96EA;&#x82B1;&#x7B97;&#x6CD5;&#x7684;id&#x65F6;&#xFF0C;&#x540E;&#x7AEF;&#x5411;&#x524D;&#x7AEF;&#x8F6C;&#x6362;json&#x6570;&#x636E;&#x7684;id&#xFF0C;&#x7CBE;&#x5EA6;&#x4E22;&#x5931;&#xFF0C;&#x6240;&#x4EE5;&#x540E;&#x7AEF;&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x6620;&#x5C04;&#x5668;&#x5C06;Long&#x578B;&#x6570;&#x636E;&#x76F4;&#x63A5;&#x8F6C;&#x6362;&#x4E3A;String&#x4F20;&#x81F3;&#x524D;&#x7AEF;&#xFF0C;&#x89E3;&#x51B3;&#x6570;&#x636E;&#x7CBE;&#x5EA6;&#x4E22;&#x5931;&#x95EE;&#x9898;"><a href="#&#x5728;&#x6570;&#x636E;&#x5E93;&#x4F7F;&#x7528;&#x96EA;&#x82B1;&#x7B97;&#x6CD5;&#x7684;id&#x65F6;&#xFF0C;&#x540E;&#x7AEF;&#x5411;&#x524D;&#x7AEF;&#x8F6C;&#x6362;json&#x6570;&#x636E;&#x7684;id&#xFF0C;&#x7CBE;&#x5EA6;&#x4E22;&#x5931;&#xFF0C;&#x6240;&#x4EE5;&#x540E;&#x7AEF;&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x6620;&#x5C04;&#x5668;&#x5C06;Long&#x578B;&#x6570;&#x636E;&#x76F4;&#x63A5;&#x8F6C;&#x6362;&#x4E3A;String&#x4F20;&#x81F3;&#x524D;&#x7AEF;&#xFF0C;&#x89E3;&#x51B3;&#x6570;&#x636E;&#x7CBE;&#x5EA6;&#x4E22;&#x5931;&#x95EE;&#x9898;" class="headerlink" title="&#x5728;&#x6570;&#x636E;&#x5E93;&#x4F7F;&#x7528;&#x96EA;&#x82B1;&#x7B97;&#x6CD5;&#x7684;id&#x65F6;&#xFF0C;&#x540E;&#x7AEF;&#x5411;&#x524D;&#x7AEF;&#x8F6C;&#x6362;json&#x6570;&#x636E;&#x7684;id&#xFF0C;&#x7CBE;&#x5EA6;&#x4E22;&#x5931;&#xFF0C;&#x6240;&#x4EE5;&#x540E;&#x7AEF;&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x6620;&#x5C04;&#x5668;&#x5C06;Long&#x578B;&#x6570;&#x636E;&#x76F4;&#x63A5;&#x8F6C;&#x6362;&#x4E3A;String&#x4F20;&#x81F3;&#x524D;&#x7AEF;&#xFF0C;&#x89E3;&#x51B3;&#x6570;&#x636E;&#x7CBE;&#x5EA6;&#x4E22;&#x5931;&#x95EE;&#x9898;"></a>&#x5728;&#x6570;&#x636E;&#x5E93;&#x4F7F;&#x7528;&#x96EA;&#x82B1;&#x7B97;&#x6CD5;&#x7684;id&#x65F6;&#xFF0C;&#x540E;&#x7AEF;&#x5411;&#x524D;&#x7AEF;&#x8F6C;&#x6362;json&#x6570;&#x636E;&#x7684;id&#xFF0C;&#x7CBE;&#x5EA6;&#x4E22;&#x5931;&#xFF0C;&#x6240;&#x4EE5;&#x540E;&#x7AEF;&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x6620;&#x5C04;&#x5668;&#x5C06;Long&#x578B;&#x6570;&#x636E;&#x76F4;&#x63A5;&#x8F6C;&#x6362;&#x4E3A;String&#x4F20;&#x81F3;&#x524D;&#x7AEF;&#xFF0C;&#x89E3;&#x51B3;&#x6570;&#x636E;&#x7CBE;&#x5EA6;&#x4E22;&#x5931;&#x95EE;&#x9898;</h2><h4 id="JacksonObjectMapper-java&#x7C7B;"><a href="#JacksonObjectMapper-java&#x7C7B;" class="headerlink" title="JacksonObjectMapper.java&#x7C7B;"></a>JacksonObjectMapper.java&#x7C7B;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.DeserializationFeature;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.<span class="keyword">module</span>.SimpleModule;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ser.std.ToStringSerializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.deser.LocalDateDeserializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.deser.LocalDateTimeDeserializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.deser.LocalTimeDeserializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.ser.LocalDateSerializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.ser.LocalDateTimeSerializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.ser.LocalTimeSerializer;</span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalTime;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.fasterxml.jackson.databind.DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x5BF9;&#x8C61;&#x6620;&#x5C04;&#x5668;:&#x57FA;&#x4E8E;jackson&#x5C06;Java&#x5BF9;&#x8C61;&#x8F6C;&#x4E3A;json&#xFF0C;&#x6216;&#x8005;&#x5C06;json&#x8F6C;&#x4E3A;Java&#x5BF9;&#x8C61;</span></span><br><span class="line"><span class="comment"> * &#x5C06;JSON&#x89E3;&#x6790;&#x4E3A;Java&#x5BF9;&#x8C61;&#x7684;&#x8FC7;&#x7A0B;&#x79F0;&#x4E3A; [&#x4ECE;JSON&#x53CD;&#x5E8F;&#x5217;&#x5316;Java&#x5BF9;&#x8C61;]</span></span><br><span class="line"><span class="comment"> * &#x4ECE;Java&#x5BF9;&#x8C61;&#x751F;&#x6210;JSON&#x7684;&#x8FC7;&#x7A0B;&#x79F0;&#x4E3A; [&#x5E8F;&#x5217;&#x5316;Java&#x5BF9;&#x8C61;&#x5230;JSON]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JacksonObjectMapper</span> <span class="keyword">extends</span> <span class="title class_">ObjectMapper</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_DATE_FORMAT</span> <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_DATE_TIME_FORMAT</span> <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_TIME_FORMAT</span> <span class="operator">=</span> <span class="string">&quot;HH:mm:ss&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">JacksonObjectMapper</span><span class="params">()</span> {</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="comment">//&#x6536;&#x5230;&#x672A;&#x77E5;&#x5C5E;&#x6027;&#x65F6;&#x4E0D;&#x62A5;&#x5F02;&#x5E38;</span></span><br><span class="line">        <span class="built_in">this</span>.configure(FAIL_ON_UNKNOWN_PROPERTIES, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x65F6;&#xFF0C;&#x5C5E;&#x6027;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x517C;&#x5BB9;&#x5904;&#x7406;</span></span><br><span class="line">        <span class="built_in">this</span>.getDeserializationConfig().withoutFeatures(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">SimpleModule</span> <span class="variable">simpleModule</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleModule</span>()</span><br><span class="line">                .addDeserializer(LocalDateTime.class, <span class="keyword">new</span> <span class="title class_">LocalDateTimeDeserializer</span>(DateTimeFormatter.ofPattern(DEFAULT_DATE_TIME_FORMAT)))</span><br><span class="line">                .addDeserializer(LocalDate.class, <span class="keyword">new</span> <span class="title class_">LocalDateDeserializer</span>(DateTimeFormatter.ofPattern(DEFAULT_DATE_FORMAT)))</span><br><span class="line">                .addDeserializer(LocalTime.class, <span class="keyword">new</span> <span class="title class_">LocalTimeDeserializer</span>(DateTimeFormatter.ofPattern(DEFAULT_TIME_FORMAT)))</span><br><span class="line"></span><br><span class="line">                .addSerializer(BigInteger.class, ToStringSerializer.instance)</span><br><span class="line">                .addSerializer(Long.class, ToStringSerializer.instance)</span><br><span class="line">                .addSerializer(LocalDateTime.class, <span class="keyword">new</span> <span class="title class_">LocalDateTimeSerializer</span>(DateTimeFormatter.ofPattern(DEFAULT_DATE_TIME_FORMAT)))</span><br><span class="line">                .addSerializer(LocalDate.class, <span class="keyword">new</span> <span class="title class_">LocalDateSerializer</span>(DateTimeFormatter.ofPattern(DEFAULT_DATE_FORMAT)))</span><br><span class="line">                .addSerializer(LocalTime.class, <span class="keyword">new</span> <span class="title class_">LocalTimeSerializer</span>(DateTimeFormatter.ofPattern(DEFAULT_TIME_FORMAT)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//&#x6CE8;&#x518C;&#x529F;&#x80FD;&#x6A21;&#x5757; &#x4F8B;&#x5982;&#xFF0C;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x5E8F;&#x5217;&#x5316;&#x5668;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;</span></span><br><span class="line">        <span class="built_in">this</span>.registerModule(simpleModule);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="&#x5728;WebConfig&#x4E2D;&#x914D;&#x7F6E;&#x6269;&#x5C55;mvc&#x7684;&#x6D88;&#x606F;&#x8F6C;&#x6362;&#x5668;"><a href="#&#x5728;WebConfig&#x4E2D;&#x914D;&#x7F6E;&#x6269;&#x5C55;mvc&#x7684;&#x6D88;&#x606F;&#x8F6C;&#x6362;&#x5668;" class="headerlink" title="&#x5728;WebConfig&#x4E2D;&#x914D;&#x7F6E;&#x6269;&#x5C55;mvc&#x7684;&#x6D88;&#x606F;&#x8F6C;&#x6362;&#x5668;"></a>&#x5728;WebConfig&#x4E2D;&#x914D;&#x7F6E;&#x6269;&#x5C55;mvc&#x7684;&#x6D88;&#x606F;&#x8F6C;&#x6362;&#x5668;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x6269;&#x5C55;mvc&#x6846;&#x67B6;&#x7684;&#x6D88;&#x606F;&#x6293;&#x6362;&#x5668;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> converters</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">extendMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> {</span><br><span class="line">    <span class="comment">// &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6D88;&#x606F;&#x8F6C;&#x6362;&#x5668;&#x5BF9;&#x8C61;</span></span><br><span class="line">    <span class="type">MappingJackson2HttpMessageConverter</span> <span class="variable">messageConverter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MappingJackson2HttpMessageConverter</span>();</span><br><span class="line">    <span class="comment">// &#x8BBE;&#x7F6E;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x5668;&#xFF0C;&#x5E95;&#x5C42;&#x4F7F;&#x7528;Jackson&#x5C06;java&#x5BF9;&#x8C61;&#x8F6C;&#x4E3A;json</span></span><br><span class="line">    messageConverter.setObjectMapper(<span class="keyword">new</span> <span class="title class_">JacksonObjectMapper</span>());</span><br><span class="line">    <span class="comment">//&#x5C06;&#x4E0A;&#x9762;&#x7684;&#x6D88;&#x606F;&#x8F6C;&#x5316;&#x5668;&#x5BF9;&#x8C61;&#x8FFD;&#x52A0;&#x5230;mvc&#x6846;&#x67B6;&#x7684;&#x8F6C;&#x6362;&#x5668;&#x4E2D;&#xFF0C;&#x4E0B;&#x6807;&#x8BBE;&#x7F6E;&#x4E3A;0&#x4FDD;&#x8BC1;&#x8F6C;&#x6362;&#x5668;&#x7684;&#x4F18;&#x5148;&#x5EA6;</span></span><br><span class="line">    converters.add(<span class="number">0</span>,messageConverter);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="&#x95EE;&#x9898;&#x89E3;&#x51B3;"><a href="#&#x95EE;&#x9898;&#x89E3;&#x51B3;" class="headerlink" title="&#x95EE;&#x9898;&#x89E3;&#x51B3;"></a>&#x95EE;&#x9898;&#x89E3;&#x51B3;</h2>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>后端</tag>
      </tags>
  </entry>
  <entry>
    <title>mybatis_plus</title>
    <url>/2023/02/05/mybatis-plus/</url>
    <content><![CDATA[<h3 id="&#xFF01;-&#x6CE8;-&#xFF01;-&#x7B14;&#x8BB0;&#x6765;&#x81EA;&#x54D4;&#x54E9;&#x54D4;&#x54E9;&#x7528;&#x6237;-&#x5E73;&#x5934;&#x54E5;&#x662F;&#x9B54;&#x9B3C;&#x554A;-&#xFF0C;&#x6B64;&#x9875;&#x9762;&#x4EC5;&#x4F9B;&#x4E2A;&#x4EBA;&#x67E5;&#x9605;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x65E0;&#x5546;&#x4E1A;&#x7528;&#x9014;&#xFF0C;&#x672A;&#x52A0;&#x5165;&#x6D4F;&#x89C8;&#x5668;&#x6536;&#x5F55;"><a href="#&#xFF01;-&#x6CE8;-&#xFF01;-&#x7B14;&#x8BB0;&#x6765;&#x81EA;&#x54D4;&#x54E9;&#x54D4;&#x54E9;&#x7528;&#x6237;-&#x5E73;&#x5934;&#x54E5;&#x662F;&#x9B54;&#x9B3C;&#x554A;-&#xFF0C;&#x6B64;&#x9875;&#x9762;&#x4EC5;&#x4F9B;&#x4E2A;&#x4EBA;&#x67E5;&#x9605;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x65E0;&#x5546;&#x4E1A;&#x7528;&#x9014;&#xFF0C;&#x672A;&#x52A0;&#x5165;&#x6D4F;&#x89C8;&#x5668;&#x6536;&#x5F55;" class="headerlink" title="&#xFF01; &#x6CE8; &#xFF01; &#x7B14;&#x8BB0;&#x6765;&#x81EA;&#x54D4;&#x54E9;&#x54D4;&#x54E9;&#x7528;&#x6237; &#x5E73;&#x5934;&#x54E5;&#x662F;&#x9B54;&#x9B3C;&#x554A; &#xFF0C;&#x6B64;&#x9875;&#x9762;&#x4EC5;&#x4F9B;&#x4E2A;&#x4EBA;&#x67E5;&#x9605;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x65E0;&#x5546;&#x4E1A;&#x7528;&#x9014;&#xFF0C;&#x672A;&#x52A0;&#x5165;&#x6D4F;&#x89C8;&#x5668;&#x6536;&#x5F55;"></a>&#xFF01; &#x6CE8; &#xFF01; &#x7B14;&#x8BB0;&#x6765;&#x81EA;&#x54D4;&#x54E9;&#x54D4;&#x54E9;&#x7528;&#x6237; <a href="https://space.bilibili.com/493771987">&#x5E73;&#x5934;&#x54E5;&#x662F;&#x9B54;&#x9B3C;&#x554A;</a> &#xFF0C;&#x6B64;&#x9875;&#x9762;&#x4EC5;&#x4F9B;&#x4E2A;&#x4EBA;&#x67E5;&#x9605;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x65E0;&#x5546;&#x4E1A;&#x7528;&#x9014;&#xFF0C;&#x672A;&#x52A0;&#x5165;&#x6D4F;&#x89C8;&#x5668;&#x6536;&#x5F55;</h3><h1 id="&#x4E00;&#x3001;MyBatis-Plus"><a href="#&#x4E00;&#x3001;MyBatis-Plus" class="headerlink" title="&#x4E00;&#x3001;MyBatis-Plus"></a>&#x4E00;&#x3001;MyBatis-Plus</h1><h2 id="1-&#x7B80;&#x4ECB;"><a href="#1-&#x7B80;&#x4ECB;" class="headerlink" title="1.&#x7B80;&#x4ECB;"></a>1.&#x7B80;&#x4ECB;</h2><p><a href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus (opens new window)</a>&#xFF08;&#x7B80;&#x79F0; MP&#xFF09;&#x662F;&#x4E00;&#x4E2A; <a href="https://www.mybatis.org/mybatis-3/">MyBatis (opens new window)</a>&#x7684;&#x589E;&#x5F3A;&#x5DE5;&#x5177;&#xFF0C;&#x5728; MyBatis &#x7684;&#x57FA;&#x7840;&#x4E0A;&#x53EA;&#x505A;&#x589E;&#x5F3A;&#x4E0D;&#x505A;&#x6539;&#x53D8;&#xFF0C;&#x4E3A;&#x7B80;&#x5316;&#x5F00;&#x53D1;&#x3001;&#x63D0;&#x9AD8;&#x6548;&#x7387;&#x800C;&#x751F;&#x3002;</p>
<blockquote>
<p>&#x6211;&#x4EEC;&#x7684;&#x613F;&#x666F;&#x662F;&#x6210;&#x4E3A; MyBatis &#x6700;&#x597D;&#x7684;&#x642D;&#x6863;&#xFF0C;&#x5C31;&#x50CF; <a href="https://baomidou.com/img/contra.jpg">&#x9B42;&#x6597;&#x7F57;</a> &#x4E2D;&#x7684; 1P&#x3001;2P&#xFF0C;&#x57FA;&#x53CB;&#x642D;&#x914D;&#xFF0C;&#x6548;&#x7387;&#x7FFB;&#x500D;&#x3002;</p>
</blockquote>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/relationship-with-mybatis.png" alt="img"></p>
<h2 id="2-&#x7279;&#x6027;"><a href="#2-&#x7279;&#x6027;" class="headerlink" title="2.&#x7279;&#x6027;"></a>2.&#x7279;&#x6027;</h2><ul>
<li><strong>&#x65E0;&#x4FB5;&#x5165;</strong>&#xFF1A;&#x53EA;&#x505A;&#x589E;&#x5F3A;&#x4E0D;&#x505A;&#x6539;&#x53D8;&#xFF0C;&#x5F15;&#x5165;&#x5B83;&#x4E0D;&#x4F1A;&#x5BF9;&#x73B0;&#x6709;&#x5DE5;&#x7A0B;&#x4EA7;&#x751F;&#x5F71;&#x54CD;&#xFF0C;&#x5982;&#x4E1D;&#x822C;&#x987A;&#x6ED1;</li>
<li><strong>&#x635F;&#x8017;&#x5C0F;</strong>&#xFF1A;&#x542F;&#x52A8;&#x5373;&#x4F1A;&#x81EA;&#x52A8;&#x6CE8;&#x5165;&#x57FA;&#x672C; CURD&#xFF0C;&#x6027;&#x80FD;&#x57FA;&#x672C;&#x65E0;&#x635F;&#x8017;&#xFF0C;&#x76F4;&#x63A5;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x64CD;&#x4F5C;</li>
<li><strong>&#x5F3A;&#x5927;&#x7684; CRUD &#x64CD;&#x4F5C;</strong>&#xFF1A;&#x5185;&#x7F6E;&#x901A;&#x7528; Mapper&#x3001;&#x901A;&#x7528; Service&#xFF0C;&#x4EC5;&#x4EC5;&#x901A;&#x8FC7;&#x5C11;&#x91CF;&#x914D;&#x7F6E;&#x5373;&#x53EF;&#x5B9E;&#x73B0;&#x5355;&#x8868;&#x5927;&#x90E8;&#x5206; CRUD &#x64CD;&#x4F5C;&#xFF0C;&#x66F4;&#x6709;&#x5F3A;&#x5927;&#x7684;&#x6761;&#x4EF6;&#x6784;&#x9020;&#x5668;&#xFF0C;&#x6EE1;&#x8DB3;&#x5404;&#x7C7B;&#x4F7F;&#x7528;&#x9700;&#x6C42;</li>
<li><strong>&#x652F;&#x6301; Lambda &#x5F62;&#x5F0F;&#x8C03;&#x7528;</strong>&#xFF1A;&#x901A;&#x8FC7; Lambda &#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x65B9;&#x4FBF;&#x7684;&#x7F16;&#x5199;&#x5404;&#x7C7B;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#xFF0C;&#x65E0;&#x9700;&#x518D;&#x62C5;&#x5FC3;&#x5B57;&#x6BB5;&#x5199;&#x9519;</li>
<li><strong>&#x652F;&#x6301;&#x4E3B;&#x952E;&#x81EA;&#x52A8;&#x751F;&#x6210;</strong>&#xFF1A;&#x652F;&#x6301;&#x591A;&#x8FBE; 4 &#x79CD;&#x4E3B;&#x952E;&#x7B56;&#x7565;&#xFF08;&#x5185;&#x542B;&#x5206;&#x5E03;&#x5F0F;&#x552F;&#x4E00; ID &#x751F;&#x6210;&#x5668; - Sequence&#xFF09;&#xFF0C;&#x53EF;&#x81EA;&#x7531;&#x914D;&#x7F6E;&#xFF0C;&#x5B8C;&#x7F8E;&#x89E3;&#x51B3;&#x4E3B;&#x952E;&#x95EE;&#x9898;</li>
<li><strong>&#x652F;&#x6301; ActiveRecord &#x6A21;&#x5F0F;</strong>&#xFF1A;&#x652F;&#x6301; ActiveRecord &#x5F62;&#x5F0F;&#x8C03;&#x7528;&#xFF0C;&#x5B9E;&#x4F53;&#x7C7B;&#x53EA;&#x9700;&#x7EE7;&#x627F; Model &#x7C7B;&#x5373;&#x53EF;&#x8FDB;&#x884C;&#x5F3A;&#x5927;&#x7684; CRUD &#x64CD;&#x4F5C;</li>
<li><strong>&#x652F;&#x6301;&#x81EA;&#x5B9A;&#x4E49;&#x5168;&#x5C40;&#x901A;&#x7528;&#x64CD;&#x4F5C;</strong>&#xFF1A;&#x652F;&#x6301;&#x5168;&#x5C40;&#x901A;&#x7528;&#x65B9;&#x6CD5;&#x6CE8;&#x5165;&#xFF08; Write once, use anywhere &#xFF09;</li>
<li><strong>&#x5185;&#x7F6E;&#x4EE3;&#x7801;&#x751F;&#x6210;&#x5668;</strong>&#xFF1A;&#x91C7;&#x7528;&#x4EE3;&#x7801;&#x6216;&#x8005; Maven &#x63D2;&#x4EF6;&#x53EF;&#x5FEB;&#x901F;&#x751F;&#x6210; Mapper &#x3001; Model &#x3001; Service &#x3001; Controller &#x5C42;&#x4EE3;&#x7801;&#xFF0C;&#x652F;&#x6301;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#xFF0C;&#x66F4;&#x6709;&#x8D85;&#x591A;&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#x7B49;&#x60A8;&#x6765;&#x4F7F;&#x7528;</li>
<li><strong>&#x5185;&#x7F6E;&#x5206;&#x9875;&#x63D2;&#x4EF6;</strong>&#xFF1A;&#x57FA;&#x4E8E; MyBatis &#x7269;&#x7406;&#x5206;&#x9875;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x65E0;&#x9700;&#x5173;&#x5FC3;&#x5177;&#x4F53;&#x64CD;&#x4F5C;&#xFF0C;&#x914D;&#x7F6E;&#x597D;&#x63D2;&#x4EF6;&#x4E4B;&#x540E;&#xFF0C;&#x5199;&#x5206;&#x9875;&#x7B49;&#x540C;&#x4E8E;&#x666E;&#x901A; List &#x67E5;&#x8BE2;</li>
<li><strong>&#x5206;&#x9875;&#x63D2;&#x4EF6;&#x652F;&#x6301;&#x591A;&#x79CD;&#x6570;&#x636E;&#x5E93;</strong>&#xFF1A;&#x652F;&#x6301; MySQL&#x3001;MariaDB&#x3001;Oracle&#x3001;DB2&#x3001;H2&#x3001;HSQL&#x3001;SQLite&#x3001;Postgre&#x3001;SQLServer &#x7B49;&#x591A;&#x79CD;&#x6570;&#x636E;&#x5E93;</li>
<li><strong>&#x5185;&#x7F6E;&#x6027;&#x80FD;&#x5206;&#x6790;&#x63D2;&#x4EF6;</strong>&#xFF1A;&#x53EF;&#x8F93;&#x51FA; SQL &#x8BED;&#x53E5;&#x4EE5;&#x53CA;&#x5176;&#x6267;&#x884C;&#x65F6;&#x95F4;&#xFF0C;&#x5EFA;&#x8BAE;&#x5F00;&#x53D1;&#x6D4B;&#x8BD5;&#x65F6;&#x542F;&#x7528;&#x8BE5;&#x529F;&#x80FD;&#xFF0C;&#x80FD;&#x5FEB;&#x901F;&#x63EA;&#x51FA;&#x6162;&#x67E5;&#x8BE2;</li>
<li><strong>&#x5185;&#x7F6E;&#x5168;&#x5C40;&#x62E6;&#x622A;&#x63D2;&#x4EF6;</strong>&#xFF1A;&#x63D0;&#x4F9B;&#x5168;&#x8868; delete &#x3001; update &#x64CD;&#x4F5C;&#x667A;&#x80FD;&#x5206;&#x6790;&#x963B;&#x65AD;&#xFF0C;&#x4E5F;&#x53EF;&#x81EA;&#x5B9A;&#x4E49;&#x62E6;&#x622A;&#x89C4;&#x5219;&#xFF0C;&#x9884;&#x9632;&#x8BEF;&#x64CD;&#x4F5C;</li>
</ul>
<h2 id="3-&#x652F;&#x6301;&#x6570;&#x636E;&#x5E93;"><a href="#3-&#x652F;&#x6301;&#x6570;&#x636E;&#x5E93;" class="headerlink" title="3.&#x652F;&#x6301;&#x6570;&#x636E;&#x5E93;"></a>3.&#x652F;&#x6301;&#x6570;&#x636E;&#x5E93;</h2><blockquote>
<p>&#x4EFB;&#x4F55;&#x80FD;&#x4F7F;&#x7528; <code>MyBatis</code> &#x8FDB;&#x884C; CRUD, &#x5E76;&#x4E14;&#x652F;&#x6301;&#x6807;&#x51C6; SQL &#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5177;&#x4F53;&#x652F;&#x6301;&#x60C5;&#x51B5;&#x5982;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x5728;&#x4E0B;&#x5217;&#x8868;&#x67E5;&#x770B;&#x5206;&#x9875;&#x90E8;&#x5206;&#x6559;&#x7A0B; PR &#x60A8;&#x7684;&#x652F;&#x6301;&#x3002;</p>
</blockquote>
<ul>
<li>MySQL&#xFF0C;Oracle&#xFF0C;DB2&#xFF0C;H2&#xFF0C;HSQL&#xFF0C;SQLite&#xFF0C;PostgreSQL&#xFF0C;SQLServer&#xFF0C;Phoenix&#xFF0C;Gauss &#xFF0C;ClickHouse&#xFF0C;Sybase&#xFF0C;OceanBase&#xFF0C;Firebird&#xFF0C;Cubrid&#xFF0C;Goldilocks&#xFF0C;csiidb</li>
<li>&#x8FBE;&#x68A6;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x865A;&#x8C37;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4EBA;&#x5927;&#x91D1;&#x4ED3;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5357;&#x5927;&#x901A;&#x7528;(&#x534E;&#x5E93;)&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5357;&#x5927;&#x901A;&#x7528;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x795E;&#x901A;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x701A;&#x9AD8;&#x6570;&#x636E;&#x5E93;</li>
</ul>
<h2 id="4-&#x6846;&#x67B6;&#x7ED3;&#x6784;"><a href="#4-&#x6846;&#x67B6;&#x7ED3;&#x6784;" class="headerlink" title="4.&#x6846;&#x67B6;&#x7ED3;&#x6784;"></a>4.&#x6846;&#x67B6;&#x7ED3;&#x6784;</h2><img src="https://baomidou.com/img/mybatis-plus-framework.jpg" alt="framework" style="zoom:50%;">



<h2 id="5-&#x5B98;&#x65B9;&#x5730;&#x5740;"><a href="#5-&#x5B98;&#x65B9;&#x5730;&#x5740;" class="headerlink" title="5.&#x5B98;&#x65B9;&#x5730;&#x5740;"></a>5.&#x5B98;&#x65B9;&#x5730;&#x5740;</h2><blockquote>
<p><strong>&#x5B98;&#x65B9;&#x7F51;&#x7AD9;&#xFF1A;</strong><a href="https://baomidou.com/">https://baomidou.com/</a></p>
<p><strong>&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;</strong><a href="https://baomidou.com/pages/24112f/">https://baomidou.com/pages/24112f/</a></p>
</blockquote>
<h1 id="&#x4E8C;&#x3001;&#x5165;&#x95E8;&#x6848;&#x4F8B;"><a href="#&#x4E8C;&#x3001;&#x5165;&#x95E8;&#x6848;&#x4F8B;" class="headerlink" title="&#x4E8C;&#x3001;&#x5165;&#x95E8;&#x6848;&#x4F8B;"></a>&#x4E8C;&#x3001;&#x5165;&#x95E8;&#x6848;&#x4F8B;</h1><h2 id="1-&#x5F00;&#x53D1;&#x73AF;&#x5883;"><a href="#1-&#x5F00;&#x53D1;&#x73AF;&#x5883;" class="headerlink" title="1.&#x5F00;&#x53D1;&#x73AF;&#x5883;"></a>1.&#x5F00;&#x53D1;&#x73AF;&#x5883;</h2><ul>
<li><strong>IDE&#xFF1A;IDEA 2019.3.5</strong></li>
<li><strong>JDK&#xFF1A;JDK8+</strong></li>
<li><strong>&#x6784;&#x5EFA;&#x5DE5;&#x5177;&#xFF1A;Maven 3.5.4</strong></li>
<li><strong>MySQL&#xFF1A;MySQL 8.0.24</strong></li>
<li><strong>Navicat&#xFF1A;Navicat Premium 15</strong></li>
<li><strong>Spring Boot&#xFF1A;2.6.7</strong></li>
<li><strong>MyBatis-Plus&#xFF1A;3.5.1</strong></li>
</ul>
<h2 id="2-&#x5EFA;&#x5E93;&#x5EFA;&#x8868;"><a href="#2-&#x5EFA;&#x5E93;&#x5EFA;&#x8868;" class="headerlink" title="2.&#x5EFA;&#x5E93;&#x5EFA;&#x8868;"></a>2.&#x5EFA;&#x5E93;&#x5EFA;&#x8868;</h2><ul>
<li><p><strong>&#x6253;&#x5F00;Navicat&#x8FD0;&#x884C;&#x4EE5;&#x4E0B;SQL&#x811A;&#x672C;&#x8FDB;&#x884C;&#x5EFA;&#x5E93;&#x5EFA;&#x8868;</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE `mybatis_plus` <span class="comment">/*!40100 DEFAULT CHARACTER SET utf8mb4 */</span>; </span><br><span class="line">use `mybatis_plus`; </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` ( </span><br><span class="line">    `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&apos;&#x4E3B;&#x952E;ID&apos;</span>, </span><br><span class="line">    `name` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&apos;&#x59D3;&#x540D;&apos;</span>, </span><br><span class="line">    `age` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&apos;&#x5E74;&#x9F84;&apos;</span>, </span><br><span class="line">    `email` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&apos;&#x90AE;&#x7BB1;&apos;</span>, </span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`) </span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x63D2;&#x5165;&#x51E0;&#x6761;&#x6D4B;&#x8BD5;&#x6570;&#x636E;</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> (id, name, age, email) <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1</span>, <span class="string">&apos;Jone&apos;</span>, <span class="number">18</span>, <span class="string">&apos;test1@baomidou.com&apos;</span>), </span><br><span class="line">(<span class="number">2</span>, <span class="string">&apos;Jack&apos;</span>, <span class="number">20</span>, <span class="string">&apos;test2@baomidou.com&apos;</span>), </span><br><span class="line">(<span class="number">3</span>, <span class="string">&apos;Tom&apos;</span>, <span class="number">28</span>, <span class="string">&apos;test3@baomidou.com&apos;</span>), </span><br><span class="line">(<span class="number">4</span>, <span class="string">&apos;Sandy&apos;</span>, <span class="number">21</span>, <span class="string">&apos;test4@baomidou.com&apos;</span>), </span><br><span class="line">(<span class="number">5</span>, <span class="string">&apos;Billie&apos;</span>, <span class="number">24</span>, <span class="string">&apos;test5@baomidou.com&apos;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-&#x521B;&#x5EFA;&#x5DE5;&#x7A0B;"><a href="#3-&#x521B;&#x5EFA;&#x5DE5;&#x7A0B;" class="headerlink" title="3.&#x521B;&#x5EFA;&#x5DE5;&#x7A0B;"></a>3.&#x521B;&#x5EFA;&#x5DE5;&#x7A0B;</h2><ul>
<li><p><strong>&#x4F7F;&#x7528;<code>Spring Initializer</code>&#x5FEB;&#x901F;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A; Spring Boot &#x5DE5;&#x7A0B;</strong></p>
<img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519140839640.png" alt="image-20220519140839640" style="zoom:80%;">

<img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519141335981.png" alt="image-20220519141335981" style="zoom:80%;">

<img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519141737405.png" alt="image-20220519141737405" style="zoom:80%;">

<img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519141849937.png" alt="image-20220519141849937" style="zoom:80%;">
</li>
<li><p><strong>&#x5F15;&#x5165;<code>MyBatis-Plus</code>&#x7684;&#x4F9D;&#x8D56;</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x5B89;&#x88C5;<code>Lombok</code>&#x63D2;&#x4EF6;</strong></p>
<img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519143257305.png" alt="image-20220519143257305" style="zoom:80%;"></li>
</ul>
<h2 id="4-&#x914D;&#x7F6E;&#x7F16;&#x7801;"><a href="#4-&#x914D;&#x7F6E;&#x7F16;&#x7801;" class="headerlink" title="4.&#x914D;&#x7F6E;&#x7F16;&#x7801;"></a>4.&#x914D;&#x7F6E;&#x7F16;&#x7801;</h2><ul>
<li><p><strong>&#x914D;&#x7F6E;<code>application.yml</code>&#x6587;&#x4EF6;</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#&#x914D;&#x7F6E;&#x7AEF;&#x53E3;</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment">#&#x914D;&#x7F6E;&#x6570;&#x636E;&#x6E90;</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="comment">#&#x914D;&#x7F6E;&#x6570;&#x636E;&#x6E90;&#x7C7B;&#x578B;</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="comment">#&#x914D;&#x7F6E;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4FE1;&#x606F;</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> {<span class="string">username</span>}</span><br><span class="line">    <span class="attr">password:</span> {<span class="string">password</span>}</span><br><span class="line"></span><br><span class="line"><span class="comment">#MyBatis-Plus&#x76F8;&#x5173;&#x914D;&#x7F6E;</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment">#&#x914D;&#x7F6E;&#x65E5;&#x5FD7;</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x5728; Spring Boot &#x542F;&#x52A8;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0; <code>@MapperScan</code> &#x6CE8;&#x89E3;&#xFF0C;&#x626B;&#x63CF; Mapper &#x6587;&#x4EF6;&#x5939;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;&#x6307;&#x5B9A;Mapper&#x63A5;&#x53E3;&#x6240;&#x5728;&#x7684;&#x5305;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusDemoApplication</span> {</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">		SpringApplication.run(MybatisPlusDemoApplication.class, args);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x7F16;&#x5199;&#x5B9E;&#x4F53;&#x7C7B; <code>User.java</code>&#xFF08;&#x6B64;&#x5904;&#x4F7F;&#x7528;&#x4E86; Lombok &#x7B80;&#x5316;&#x4EE3;&#x7801;&#xFF09;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> {</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x7F16;&#x5199; Mapper &#x5305;&#x4E0B;&#x7684; <code>UserMapper</code>&#x63A5;&#x53E3;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; {}</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="5-&#x6D4B;&#x8BD5;&#x67E5;&#x8BE2;"><a href="#5-&#x6D4B;&#x8BD5;&#x67E5;&#x8BE2;" class="headerlink" title="5.&#x6D4B;&#x8BD5;&#x67E5;&#x8BE2;"></a>5.&#x6D4B;&#x8BD5;&#x67E5;&#x8BE2;</h2><ul>
<li><p><strong>&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x7C7B;<code>MyBatisPlusTest.java</code></strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusTest</span> {</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#x6D4B;&#x8BD5;&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x6570;&#x636E;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSelectList</span><span class="params">()</span>{</span><br><span class="line">        <span class="comment">//&#x901A;&#x8FC7;&#x6761;&#x4EF6;&#x6784;&#x9020;&#x5668;&#x67E5;&#x8BE2;&#x4E00;&#x4E2A;list&#x96C6;&#x5408;&#xFF0C;&#x82E5;&#x6CA1;&#x6709;&#x6761;&#x4EF6;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;null&#x4E3A;&#x53C2;&#x6570;</span></span><br><span class="line">        List&lt;User&gt; users = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">        users.forEach(System.out::println);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x63A7;&#x5236;&#x53F0;&#x6253;&#x5370;&#x67E5;&#x8BE2;&#x7ED3;&#x679C;</strong></p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220519150454211.png" alt="image-20220519150454211"></p>
</li>
</ul>
<h1 id="&#x4E09;&#x3001;&#x589E;&#x5220;&#x6539;&#x67E5;"><a href="#&#x4E09;&#x3001;&#x589E;&#x5220;&#x6539;&#x67E5;" class="headerlink" title="&#x4E09;&#x3001;&#x589E;&#x5220;&#x6539;&#x67E5;"></a>&#x4E09;&#x3001;&#x589E;&#x5220;&#x6539;&#x67E5;</h1><h2 id="1-BaseMapper-lt-T-gt"><a href="#1-BaseMapper-lt-T-gt" class="headerlink" title="1.BaseMapper&lt;T&gt;"></a>1.BaseMapper&lt;T&gt;</h2><blockquote>
<p>&#x8BF4;&#x660E;:</p>
<ul>
<li>&#x901A;&#x7528; CRUD &#x5C01;&#x88C5;BaseMapper &#x63A5;&#x53E3;&#xFF0C;&#x4E3A; <code>Mybatis-Plus</code> &#x542F;&#x52A8;&#x65F6;&#x81EA;&#x52A8;&#x89E3;&#x6790;&#x5B9E;&#x4F53;&#x8868;&#x5173;&#x7CFB;&#x6620;&#x5C04;&#x8F6C;&#x6362;&#x4E3A; <code>Mybatis</code> &#x5185;&#x90E8;&#x5BF9;&#x8C61;&#x6CE8;&#x5165;&#x5BB9;&#x5668;</li>
<li>&#x6CDB;&#x578B; <code>T</code> &#x4E3A;&#x4EFB;&#x610F;&#x5B9E;&#x4F53;&#x5BF9;&#x8C61;</li>
<li>&#x53C2;&#x6570; <code>Serializable</code> &#x4E3A;&#x4EFB;&#x610F;&#x7C7B;&#x578B;&#x4E3B;&#x952E; <code>Mybatis-Plus</code> &#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x590D;&#x5408;&#x4E3B;&#x952E;&#x7EA6;&#x5B9A;&#x6BCF;&#x4E00;&#x5F20;&#x8868;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x552F;&#x4E00; <code>id</code> &#x4E3B;&#x952E;</li>
<li>&#x5BF9;&#x8C61; <code>Wrapper</code> &#x4E3A;&#x6761;&#x4EF6;&#x6784;&#x9020;&#x5668;</li>
</ul>
</blockquote>
<p>MyBatis-Plus&#x4E2D;&#x7684;&#x57FA;&#x672C;CRUD&#x5728;&#x5185;&#x7F6E;&#x7684;BaseMapper&#x4E2D;&#x90FD;&#x5DF2;&#x5F97;&#x5230;&#x4E86;&#x5B9E;&#x73B0;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x7EE7;&#x627F;&#x8BE5;&#x63A5;&#x53E3;&#x4EE5;&#x540E;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x672C;&#x6B21;&#x6F14;&#x793A;&#x7684;CRUD&#x64CD;&#x4F5C;&#x4E0D;&#x5305;&#x542B;&#x53C2;&#x6570;&#x5E26;&#x6709;&#x6761;&#x4EF6;&#x6784;&#x9020;&#x5668;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5173;&#x4E8E;&#x6761;&#x4EF6;&#x6784;&#x9020;&#x5668;&#x5C06;&#x5355;&#x72EC;&#x5728;&#x4E00;&#x4E2A;&#x7AE0;&#x8282;&#x8FDB;&#x884C;&#x6F14;&#x793A;&#x3002;</p>
<hr>
<blockquote>
<p><strong>BaseMapper&#x4E2D;&#x63D0;&#x4F9B;&#x7684;CRUD&#x65B9;&#x6CD5;&#xFF1A;</strong></p>
</blockquote>
<ul>
<li><p><strong>&#x589E;&#x52A0;&#xFF1A;Insert</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x63D2;&#x5165;&#x4E00;&#x6761;&#x8BB0;&#x5F55;</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">insert</span><span class="params">(T entity)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x5220;&#x9664;&#xFF1A;Delete</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x6839;&#x636E; entity &#x6761;&#x4EF6;&#xFF0C;&#x5220;&#x9664;&#x8BB0;&#x5F55;</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">delete</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; wrapper)</span>;</span><br><span class="line"><span class="comment">// &#x5220;&#x9664;&#xFF08;&#x6839;&#x636E;ID &#x6279;&#x91CF;&#x5220;&#x9664;&#xFF09;</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteBatchIds</span><span class="params">(<span class="meta">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; ID &#x5220;&#x9664;</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; columnMap &#x6761;&#x4EF6;&#xFF0C;&#x5220;&#x9664;&#x8BB0;&#x5F55;</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteByMap</span><span class="params">(<span class="meta">@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x4FEE;&#x6539;&#xFF1A;Update</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x6839;&#x636E; whereWrapper &#x6761;&#x4EF6;&#xFF0C;&#x66F4;&#x65B0;&#x8BB0;&#x5F55;</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">update</span><span class="params">(<span class="meta">@Param(Constants.ENTITY)</span> T updateEntity, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; whereWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; ID &#x4FEE;&#x6539;</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">updateById</span><span class="params">(<span class="meta">@Param(Constants.ENTITY)</span> T entity)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x67E5;&#x8BE2;&#xFF1A;Selete</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x6839;&#x636E; ID &#x67E5;&#x8BE2;</span></span><br><span class="line">T <span class="title function_">selectById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; entity &#x6761;&#x4EF6;&#xFF0C;&#x67E5;&#x8BE2;&#x4E00;&#x6761;&#x8BB0;&#x5F55;</span></span><br><span class="line">T <span class="title function_">selectOne</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x67E5;&#x8BE2;&#xFF08;&#x6839;&#x636E;ID &#x6279;&#x91CF;&#x67E5;&#x8BE2;&#xFF09;</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">selectBatchIds</span><span class="params">(<span class="meta">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; entity &#x6761;&#x4EF6;&#xFF0C;&#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x8BB0;&#x5F55;</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">selectList</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x67E5;&#x8BE2;&#xFF08;&#x6839;&#x636E; columnMap &#x6761;&#x4EF6;&#xFF09;</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">selectByMap</span><span class="params">(<span class="meta">@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper &#x6761;&#x4EF6;&#xFF0C;&#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x8BB0;&#x5F55;</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">selectMaps</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper &#x6761;&#x4EF6;&#xFF0C;&#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x8BB0;&#x5F55;&#x3002;&#x6CE8;&#x610F;&#xFF1A; &#x53EA;&#x8FD4;&#x56DE;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x503C;</span></span><br><span class="line">List&lt;Object&gt; <span class="title function_">selectObjs</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x6839;&#x636E; entity &#x6761;&#x4EF6;&#xFF0C;&#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x8BB0;&#x5F55;&#xFF08;&#x5E76;&#x7FFB;&#x9875;&#xFF09;</span></span><br><span class="line">IPage&lt;T&gt; <span class="title function_">selectPage</span><span class="params">(IPage&lt;T&gt; page, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper &#x6761;&#x4EF6;&#xFF0C;&#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x8BB0;&#x5F55;&#xFF08;&#x5E76;&#x7FFB;&#x9875;&#xFF09;</span></span><br><span class="line">IPage&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">selectMapsPage</span><span class="params">(IPage&lt;T&gt; page, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper &#x6761;&#x4EF6;&#xFF0C;&#x67E5;&#x8BE2;&#x603B;&#x8BB0;&#x5F55;&#x6570;</span></span><br><span class="line">Integer <span class="title function_">selectCount</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-&#x8C03;&#x7528;Mapper&#x5C42;&#x5B9E;&#x73B0;CRUD"><a href="#2-&#x8C03;&#x7528;Mapper&#x5C42;&#x5B9E;&#x73B0;CRUD" class="headerlink" title="2.&#x8C03;&#x7528;Mapper&#x5C42;&#x5B9E;&#x73B0;CRUD"></a>2.&#x8C03;&#x7528;Mapper&#x5C42;&#x5B9E;&#x73B0;CRUD</h2><h3 id="2-1&#x63D2;&#x5165;"><a href="#2-1&#x63D2;&#x5165;" class="headerlink" title="2.1	&#x63D2;&#x5165;"></a>2.1	&#x63D2;&#x5165;</h3><hr>
<blockquote>
<p><strong>&#x6700;&#x7EC8;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x6240;&#x83B7;&#x53D6;&#x7684;id&#x4E3A;1527206783590903810</strong></p>
<p><strong>&#x8FD9;&#x662F;&#x56E0;&#x4E3A;MyBatis-Plus&#x5728;&#x5B9E;&#x73B0;&#x63D2;&#x5165;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x4F1A;&#x9ED8;&#x8BA4;&#x57FA;&#x4E8E;&#x96EA;&#x82B1;&#x7B97;&#x6CD5;&#x7684;&#x7B56;&#x7565;&#x751F;&#x6210;id</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * &#x6D4B;&#x8BD5;&#x63D2;&#x5165;&#x4E00;&#x6761;&#x6570;&#x636E;</span></span><br><span class="line"><span class="comment">  * MyBatis-Plus&#x5728;&#x5B9E;&#x73B0;&#x63D2;&#x5165;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x4F1A;&#x9ED8;&#x8BA4;&#x57FA;&#x4E8E;&#x96EA;&#x82B1;&#x7B97;&#x6CD5;&#x7684;&#x7B56;&#x7565;&#x751F;&#x6210;id</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setName(<span class="string">&quot;Vz&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">21</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;vz@oz6.cn&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.insert(user);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;&#x6DFB;&#x52A0;&#x6210;&#x529F;&#xFF01;&quot;</span> : <span class="string">&quot;&#x6DFB;&#x52A0;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x53D7;&#x5F71;&#x54CD;&#x7684;&#x884C;&#x6570;&#x4E3A;&#xFF1A;&quot;</span> + result);</span><br><span class="line">    <span class="comment">//1527206783590903810&#xFF08;&#x5F53;&#x524D; id &#x4E3A;&#x96EA;&#x82B1;&#x7B97;&#x6CD5;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;id&#xFF09;</span></span><br><span class="line">    System.out.println(<span class="string">&quot;id&#x81EA;&#x52A8;&#x83B7;&#x53D6;&quot;</span> + user.getId());</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h3 id="2-2&#x5220;&#x9664;"><a href="#2-2&#x5220;&#x9664;" class="headerlink" title="2.2	&#x5220;&#x9664;"></a>2.2	&#x5220;&#x9664;</h3><hr>
<h4 id="a&#x3001;&#x6839;&#x636E;ID&#x5220;&#x9664;&#x6570;&#x636E;"><a href="#a&#x3001;&#x6839;&#x636E;ID&#x5220;&#x9664;&#x6570;&#x636E;" class="headerlink" title="a&#x3001;&#x6839;&#x636E;ID&#x5220;&#x9664;&#x6570;&#x636E;"></a>a&#x3001;&#x6839;&#x636E;ID&#x5220;&#x9664;&#x6570;&#x636E;</h4><blockquote>
<p><strong>&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;int deleteById(Serializable id);</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * &#x6D4B;&#x8BD5;&#x6839;&#x636E;id&#x5220;&#x9664;&#x4E00;&#x6761;&#x6570;&#x636E;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteById</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.deleteById(<span class="number">1527206783590903810L</span>);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;&#x5220;&#x9664;&#x6210;&#x529F;&#xFF01;&quot;</span> : <span class="string">&quot;&#x5220;&#x9664;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x53D7;&#x5F71;&#x54CD;&#x7684;&#x884C;&#x6570;&#x4E3A;&#xFF1A;&quot;</span> + result);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h4 id="b&#x3001;&#x6839;&#x636E;ID&#x6279;&#x91CF;&#x5220;&#x9664;&#x6570;&#x636E;"><a href="#b&#x3001;&#x6839;&#x636E;ID&#x6279;&#x91CF;&#x5220;&#x9664;&#x6570;&#x636E;" class="headerlink" title="b&#x3001;&#x6839;&#x636E;ID&#x6279;&#x91CF;&#x5220;&#x9664;&#x6570;&#x636E;"></a>b&#x3001;&#x6839;&#x636E;ID&#x6279;&#x91CF;&#x5220;&#x9664;&#x6570;&#x636E;</h4><blockquote>
<p><strong>&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;int deleteBatchIds(@Param(Constants.COLLECTION) Collection&lt;? extends Serializable&gt; idList);</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * &#x6D4B;&#x8BD5;&#x901A;&#x8FC7;id&#x6279;&#x91CF;&#x5220;&#x9664;&#x6570;&#x636E;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteBatchIds</span><span class="params">()</span>{</span><br><span class="line">    List&lt;Long&gt; ids = Arrays.asList(<span class="number">6L</span>,<span class="number">7L</span>,<span class="number">8L</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.deleteBatchIds(ids);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;&#x5220;&#x9664;&#x6210;&#x529F;&#xFF01;&quot;</span> : <span class="string">&quot;&#x5220;&#x9664;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x53D7;&#x5F71;&#x54CD;&#x7684;&#x884C;&#x6570;&#x4E3A;&#xFF1A;&quot;</span> + result);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h4 id="c&#x3001;&#x6839;&#x636E;Map&#x6761;&#x4EF6;&#x5220;&#x9664;&#x6570;&#x636E;"><a href="#c&#x3001;&#x6839;&#x636E;Map&#x6761;&#x4EF6;&#x5220;&#x9664;&#x6570;&#x636E;" class="headerlink" title="c&#x3001;&#x6839;&#x636E;Map&#x6761;&#x4EF6;&#x5220;&#x9664;&#x6570;&#x636E;"></a>c&#x3001;&#x6839;&#x636E;Map&#x6761;&#x4EF6;&#x5220;&#x9664;&#x6570;&#x636E;</h4><blockquote>
<p><strong>&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;int deleteByMap(@Param(Constants.COLUMN_MAP) Map&lt;String, Object&gt; columnMap);</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * &#x6D4B;&#x8BD5;&#x6839;&#x636E;Map&#x96C6;&#x5408;&#x4E2D;&#x6240;&#x8BBE;&#x7F6E;&#x7684;&#x6761;&#x4EF6;&#x5220;&#x9664;&#x6570;&#x636E;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteByMap</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x5F53;&#x524D;&#x6F14;&#x793A;&#x4E3A;&#x6839;&#x636E;name&#x548C;age&#x5220;&#x9664;&#x6570;&#x636E;</span></span><br><span class="line">    <span class="comment">//&#x6267;&#x884C;SQL&#x4E3A;&#xFF1A;DELETE FROM user WHERE name = ? AND age = ?</span></span><br><span class="line">    Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;Vz&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;age&quot;</span>,<span class="number">21</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.deleteByMap(map);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;&#x5220;&#x9664;&#x6210;&#x529F;&#xFF01;&quot;</span> : <span class="string">&quot;&#x5220;&#x9664;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x53D7;&#x5F71;&#x54CD;&#x7684;&#x884C;&#x6570;&#x4E3A;&#xFF1A;&quot;</span> + result);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h3 id="2-3&#x4FEE;&#x6539;"><a href="#2-3&#x4FEE;&#x6539;" class="headerlink" title="2.3	&#x4FEE;&#x6539;"></a>2.3	&#x4FEE;&#x6539;</h3><blockquote>
<p><strong>&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;int updateById(@Param(Constants.ENTITY) T entity);</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * &#x6D4B;&#x8BD5;&#x6839;&#x636E;id&#x4FEE;&#x6539;&#x7528;&#x6237;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateById</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x6267;&#x884C;SQL&#x4E3A;&#xFF1A; UPDATE user SET name=?, age=?, email=? WHERE id=?</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setId(<span class="number">6L</span>);</span><br><span class="line">    user.setName(<span class="string">&quot;VzUpdate&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;Vz@sina.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.updateById(user);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;&#x4FEE;&#x6539;&#x6210;&#x529F;&#xFF01;&quot;</span> : <span class="string">&quot;&#x4FEE;&#x6539;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x53D7;&#x5F71;&#x54CD;&#x7684;&#x884C;&#x6570;&#x4E3A;&#xFF1A;&quot;</span> + result);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h3 id="2-4&#x67E5;&#x8BE2;"><a href="#2-4&#x67E5;&#x8BE2;" class="headerlink" title="2.4	&#x67E5;&#x8BE2;"></a>2.4	&#x67E5;&#x8BE2;</h3><hr>
<h4 id="a&#x3001;&#x6839;&#x636E;ID&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x4FE1;&#x606F;"><a href="#a&#x3001;&#x6839;&#x636E;ID&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x4FE1;&#x606F;" class="headerlink" title="a&#x3001;&#x6839;&#x636E;ID&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x4FE1;&#x606F;"></a>a&#x3001;&#x6839;&#x636E;ID&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x4FE1;&#x606F;</h4><blockquote>
<p><strong>&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;T selectById(Serializable id);</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * &#x6D4B;&#x8BD5;&#x6839;&#x636E;id&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x6570;&#x636E;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h4 id="b&#x3001;&#x6839;&#x636E;&#x591A;&#x4E2A;ID&#x67E5;&#x8BE2;&#x591A;&#x4E2A;&#x7528;&#x6237;&#x4FE1;&#x606F;"><a href="#b&#x3001;&#x6839;&#x636E;&#x591A;&#x4E2A;ID&#x67E5;&#x8BE2;&#x591A;&#x4E2A;&#x7528;&#x6237;&#x4FE1;&#x606F;" class="headerlink" title="b&#x3001;&#x6839;&#x636E;&#x591A;&#x4E2A;ID&#x67E5;&#x8BE2;&#x591A;&#x4E2A;&#x7528;&#x6237;&#x4FE1;&#x606F;"></a>b&#x3001;&#x6839;&#x636E;&#x591A;&#x4E2A;ID&#x67E5;&#x8BE2;&#x591A;&#x4E2A;&#x7528;&#x6237;&#x4FE1;&#x606F;</h4><blockquote>
<p><strong>&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;List<T> selectBatchIds(@Param(Constants.COLLECTION) Collection&lt;? extends Serializable&gt; idList);</T></strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * &#x6839;&#x636E;&#x591A;&#x4E2A;id&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x6570;&#x636E;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectBatchIds</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x6267;&#x884C;SQL&#x4E3A;&#xFF1A;SELECT id,name,age,email FROM user WHERE id IN ( ? , ? , ? )</span></span><br><span class="line">    List&lt;Long&gt; ids = Arrays.asList(<span class="number">1L</span>,<span class="number">2L</span>,<span class="number">3L</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectBatchIds(ids);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>





<h4 id="c&#x3001;&#x6839;&#x636E;Map&#x6761;&#x4EF6;&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x4FE1;&#x606F;"><a href="#c&#x3001;&#x6839;&#x636E;Map&#x6761;&#x4EF6;&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x4FE1;&#x606F;" class="headerlink" title="c&#x3001;&#x6839;&#x636E;Map&#x6761;&#x4EF6;&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x4FE1;&#x606F;"></a>c&#x3001;&#x6839;&#x636E;Map&#x6761;&#x4EF6;&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x4FE1;&#x606F;</h4><blockquote>
<p><strong>&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;List<T> selectByMap(@Param(Constants.COLUMN_MAP) Map&lt;String, Object&gt; columnMap);</T></strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * &#x6839;&#x636E;Map&#x6240;&#x8BBE;&#x7F6E;&#x7684;&#x6761;&#x4EF6;&#x67E5;&#x8BE2;&#x7528;&#x6237;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByMap</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x6267;&#x884C;SQL&#x4E3A;&#xFF1A;SELECT id,name,age,email FROM user WHERE age = ?</span></span><br><span class="line">    Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;age&quot;</span>,<span class="number">18</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectByMap(map);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h4 id="d&#x3001;&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x7528;&#x6237;&#x4FE1;&#x606F;"><a href="#d&#x3001;&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x7528;&#x6237;&#x4FE1;&#x606F;" class="headerlink" title="d&#x3001;&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x7528;&#x6237;&#x4FE1;&#x606F;"></a>d&#x3001;&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x7528;&#x6237;&#x4FE1;&#x606F;</h4><blockquote>
<p><strong>&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;List<T> selectList(@Param(Constants.WRAPPER) Wrapper<T> queryWrapper);</T></T></strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * &#x6D4B;&#x8BD5;&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x6570;&#x636E;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSelectList</span><span class="params">()</span>{</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h2 id="3-&#x901A;&#x7528;Service"><a href="#3-&#x901A;&#x7528;Service" class="headerlink" title="3.&#x901A;&#x7528;Service"></a>3.&#x901A;&#x7528;Service</h2><blockquote>
<p>&#x8BF4;&#x660E;:</p>
<ul>
<li>&#x901A;&#x7528; Service CRUD &#x5C01;&#x88C5;<code>IService</code>&#x63A5;&#x53E3;&#xFF0C;&#x8FDB;&#x4E00;&#x6B65;&#x5C01;&#x88C5; CRUD &#x91C7;&#x7528; <code>get &#x67E5;&#x8BE2;&#x5355;&#x884C;</code> <code>remove &#x5220;&#x9664;</code> <code>list &#x67E5;&#x8BE2;&#x96C6;&#x5408;</code> <code>page &#x5206;&#x9875;</code> &#x524D;&#x7F00;&#x547D;&#x540D;&#x65B9;&#x5F0F;&#x533A;&#x5206; <code>Mapper</code> &#x5C42;&#x907F;&#x514D;&#x6DF7;&#x6DC6;&#xFF0C;</li>
<li>&#x6CDB;&#x578B; <code>T</code> &#x4E3A;&#x4EFB;&#x610F;&#x5B9E;&#x4F53;&#x5BF9;&#x8C61;</li>
<li>&#x5EFA;&#x8BAE;&#x5982;&#x679C;&#x5B58;&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x901A;&#x7528; Service &#x65B9;&#x6CD5;&#x7684;&#x53EF;&#x80FD;&#xFF0C;&#x8BF7;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684; <code>IBaseService</code> &#x7EE7;&#x627F; <code>Mybatis-Plus</code> &#x63D0;&#x4F9B;&#x7684;&#x57FA;&#x7C7B;</li>
<li>&#x5BF9;&#x8C61; <code>Wrapper</code> &#x4E3A; &#x6761;&#x4EF6;&#x6784;&#x9020;&#x5668;</li>
</ul>
</blockquote>
<p>MyBatis-Plus&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x63A5;&#x53E3; **<code>IService</code>**&#x548C;&#x5176;&#x5B9E;&#x73B0;&#x7C7B; **<code>ServiceImpl</code>**&#xFF0C;&#x5C01;&#x88C5;&#x4E86;&#x5E38;&#x89C1;&#x7684;&#x4E1A;&#x52A1;&#x5C42;&#x903B;&#x8F91;&#xFF0C;&#x8BE6;&#x60C5;&#x67E5;&#x770B;&#x6E90;&#x7801;IService&#x548C;ServiceImpl</p>
<p>&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;&#x4EC5;&#x9700;&#x5728;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x7684;**<code>Service</code><strong>&#x63A5;&#x53E3;&#x4E2D;&#x7EE7;&#x627F;</strong><code>IService</code><strong>&#x63A5;&#x53E3;&#xFF0C;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x4E2D;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;Service&#x5E76;&#x7EE7;&#x627F;</strong><code>ServiceImpl</code>**&#x5373;&#x53EF;</p>
<hr>
<blockquote>
<p><strong>IService&#x4E2D;&#x7684;CRUD&#x65B9;&#x6CD5;</strong></p>
</blockquote>
<ul>
<li><p><strong>&#x589E;&#x52A0;&#xFF1A;Save&#x3001;SaveOrUpdate</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x63D2;&#x5165;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF08;&#x9009;&#x62E9;&#x5B57;&#x6BB5;&#xFF0C;&#x7B56;&#x7565;&#x63D2;&#x5165;&#xFF09;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">save</span><span class="params">(T entity)</span>;</span><br><span class="line"><span class="comment">// &#x63D2;&#x5165;&#xFF08;&#x6279;&#x91CF;&#xFF09;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList)</span>;</span><br><span class="line"><span class="comment">// &#x63D2;&#x5165;&#xFF08;&#x6279;&#x91CF;&#xFF09;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TableId &#x6CE8;&#x89E3;&#x5B58;&#x5728;&#x66F4;&#x65B0;&#x8BB0;&#x5F55;&#xFF0C;&#x5426;&#x63D2;&#x5165;&#x4E00;&#x6761;&#x8BB0;&#x5F55;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveOrUpdate</span><span class="params">(T entity)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E;updateWrapper&#x5C1D;&#x8BD5;&#x66F4;&#x65B0;&#xFF0C;&#x5426;&#x7EE7;&#x7EED;&#x6267;&#x884C;saveOrUpdate(T)&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveOrUpdate</span><span class="params">(T entity, Wrapper&lt;T&gt; updateWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x6279;&#x91CF;&#x4FEE;&#x6539;&#x63D2;&#x5165;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveOrUpdateBatch</span><span class="params">(Collection&lt;T&gt; entityList)</span>;</span><br><span class="line"><span class="comment">// &#x6279;&#x91CF;&#x4FEE;&#x6539;&#x63D2;&#x5165;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">saveOrUpdateBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x5220;&#x9664;&#xFF1A;Remove</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x6839;&#x636E; entity &#x6761;&#x4EF6;&#xFF0C;&#x5220;&#x9664;&#x8BB0;&#x5F55;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; ID &#x5220;&#x9664;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">removeById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; columnMap &#x6761;&#x4EF6;&#xFF0C;&#x5220;&#x9664;&#x8BB0;&#x5F55;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">removeByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class="line"><span class="comment">// &#x5220;&#x9664;&#xFF08;&#x6839;&#x636E;ID &#x6279;&#x91CF;&#x5220;&#x9664;&#xFF09;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">removeByIds</span><span class="params">(Collection&lt;? extends Serializable&gt; idList)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x4FEE;&#x6539;&#xFF1A;Update</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x6839;&#x636E; UpdateWrapper &#x6761;&#x4EF6;&#xFF0C;&#x66F4;&#x65B0;&#x8BB0;&#x5F55; &#x9700;&#x8981;&#x8BBE;&#x7F6E;sqlset</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">update</span><span class="params">(Wrapper&lt;T&gt; updateWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; whereWrapper &#x6761;&#x4EF6;&#xFF0C;&#x66F4;&#x65B0;&#x8BB0;&#x5F55;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">update</span><span class="params">(T updateEntity, Wrapper&lt;T&gt; whereWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; ID &#x9009;&#x62E9;&#x4FEE;&#x6539;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">updateById</span><span class="params">(T entity)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E;ID &#x6279;&#x91CF;&#x66F4;&#x65B0;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">updateBatchById</span><span class="params">(Collection&lt;T&gt; entityList)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E;ID &#x6279;&#x91CF;&#x66F4;&#x65B0;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">updateBatchById</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x67E5;&#x8BE2;&#xFF1A;Get&#x3001;List&#x3001;Count</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x6839;&#x636E; ID &#x67E5;&#x8BE2;</span></span><br><span class="line">T <span class="title function_">getById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper&#xFF0C;&#x67E5;&#x8BE2;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#x3002;&#x7ED3;&#x679C;&#x96C6;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x591A;&#x4E2A;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x968F;&#x673A;&#x53D6;&#x4E00;&#x6761;&#x52A0;&#x4E0A;&#x9650;&#x5236;&#x6761;&#x4EF6; wrapper.last(&quot;LIMIT 1&quot;)</span></span><br><span class="line">T <span class="title function_">getOne</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper&#xFF0C;&#x67E5;&#x8BE2;&#x4E00;&#x6761;&#x8BB0;&#x5F55;</span></span><br><span class="line">T <span class="title function_">getOne</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, <span class="type">boolean</span> throwEx)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper&#xFF0C;&#x67E5;&#x8BE2;&#x4E00;&#x6761;&#x8BB0;&#x5F55;</span></span><br><span class="line">Map&lt;String, Object&gt; <span class="title function_">getMap</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper&#xFF0C;&#x67E5;&#x8BE2;&#x4E00;&#x6761;&#x8BB0;&#x5F55;</span></span><br><span class="line">&lt;V&gt; V <span class="title function_">getObj</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x67E5;&#x8BE2;&#x6240;&#x6709;</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">list</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// &#x67E5;&#x8BE2;&#x5217;&#x8868;</span></span><br><span class="line">List&lt;T&gt; <span class="title function_">list</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x67E5;&#x8BE2;&#xFF08;&#x6839;&#x636E;ID &#x6279;&#x91CF;&#x67E5;&#x8BE2;&#xFF09;</span></span><br><span class="line">Collection&lt;T&gt; <span class="title function_">listByIds</span><span class="params">(Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"><span class="comment">// &#x67E5;&#x8BE2;&#xFF08;&#x6839;&#x636E; columnMap &#x6761;&#x4EF6;&#xFF09;</span></span><br><span class="line">Collection&lt;T&gt; <span class="title function_">listByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap)</span>;</span><br><span class="line"><span class="comment">// &#x67E5;&#x8BE2;&#x6240;&#x6709;&#x5217;&#x8868;</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// &#x67E5;&#x8BE2;&#x5217;&#x8868;</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x8BB0;&#x5F55;</span></span><br><span class="line">List&lt;Object&gt; <span class="title function_">listObjs</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// &#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x8BB0;&#x5F55;</span></span><br><span class="line">&lt;V&gt; List&lt;V&gt; <span class="title function_">listObjs</span><span class="params">(Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper &#x6761;&#x4EF6;&#xFF0C;&#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x8BB0;&#x5F55;</span></span><br><span class="line">List&lt;Object&gt; <span class="title function_">listObjs</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper &#x6761;&#x4EF6;&#xFF0C;&#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x8BB0;&#x5F55;</span></span><br><span class="line">&lt;V&gt; List&lt;V&gt; <span class="title function_">listObjs</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x67E5;&#x8BE2;&#x603B;&#x8BB0;&#x5F55;&#x6570;</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">count</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper &#x6761;&#x4EF6;&#xFF0C;&#x67E5;&#x8BE2;&#x603B;&#x8BB0;&#x5F55;&#x6570;</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">count</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x5206;&#x9875;&#xFF1A;Page</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x6839;&#x636E; ID &#x67E5;&#x8BE2;</span></span><br><span class="line">T <span class="title function_">getById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper&#xFF0C;&#x67E5;&#x8BE2;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#x3002;&#x7ED3;&#x679C;&#x96C6;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x591A;&#x4E2A;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x968F;&#x673A;&#x53D6;&#x4E00;&#x6761;&#x52A0;&#x4E0A;&#x9650;&#x5236;&#x6761;&#x4EF6; wrapper.last(&quot;LIMIT 1&quot;)</span></span><br><span class="line">T <span class="title function_">getOne</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper&#xFF0C;&#x67E5;&#x8BE2;&#x4E00;&#x6761;&#x8BB0;&#x5F55;</span></span><br><span class="line">T <span class="title function_">getOne</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, <span class="type">boolean</span> throwEx)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper&#xFF0C;&#x67E5;&#x8BE2;&#x4E00;&#x6761;&#x8BB0;&#x5F55;</span></span><br><span class="line">Map&lt;String, Object&gt; <span class="title function_">getMap</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"><span class="comment">// &#x6839;&#x636E; Wrapper&#xFF0C;&#x67E5;&#x8BE2;&#x4E00;&#x6761;&#x8BB0;&#x5F55;</span></span><br><span class="line">&lt;V&gt; V <span class="title function_">getObj</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="4-&#x8C03;&#x7528;Service&#x5C42;&#x64CD;&#x4F5C;&#x6570;&#x636E;"><a href="#4-&#x8C03;&#x7528;Service&#x5C42;&#x64CD;&#x4F5C;&#x6570;&#x636E;" class="headerlink" title="4.&#x8C03;&#x7528;Service&#x5C42;&#x64CD;&#x4F5C;&#x6570;&#x636E;"></a>4.&#x8C03;&#x7528;Service&#x5C42;&#x64CD;&#x4F5C;&#x6570;&#x636E;</h2><blockquote>
<p>&#x6211;&#x4EEC;&#x5728;&#x81EA;&#x5DF1;&#x7684;Service&#x63A5;&#x53E3;&#x4E2D;&#x901A;&#x8FC7;&#x7EE7;&#x627F;MyBatis-Plus&#x63D0;&#x4F9B;&#x7684;IService&#x63A5;&#x53E3;&#xFF0C;&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x83B7;&#x5F97;&#x5176;&#x63D0;&#x4F9B;&#x7684;CRUD&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x81EA;&#x8EAB;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
</blockquote>
<ul>
<li><p><strong>&#x521B;&#x5EFA;<code>UserService</code>&#x5E76;&#x7EE7;&#x627F;<code>IService</code></strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * UserService&#x7EE7;&#x627F;IService&#x6A21;&#x677F;&#x63D0;&#x4F9B;&#x7684;&#x57FA;&#x7840;&#x529F;&#x80FD; </span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; {}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x521B;&#x5EFA;<code>UserService</code>&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x5E76;&#x7EE7;&#x627F;<code>ServiceImpl</code></strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * ServiceImpl&#x5B9E;&#x73B0;&#x4E86;IService&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;IService&#x4E2D;&#x57FA;&#x7840;&#x529F;&#x80FD;&#x7684;&#x5B9E;&#x73B0; </span></span><br><span class="line"><span class="comment">  * &#x82E5;ServiceImpl&#x65E0;&#x6CD5;&#x6EE1;&#x8DB3;&#x4E1A;&#x52A1;&#x9700;&#x6C42;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x7684;UserService&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x5728;&#x5B9E;&#x73B0;&#x7C7B;&#x4E2D;&#x5B9E;&#x73B0;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper,User&gt; <span class="keyword">implements</span> <span class="title class_">UserService</span>{}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x6D4B;&#x8BD5;&#x67E5;&#x8BE2;&#x8BB0;&#x5F55;&#x6570;</strong></p>
<blockquote>
<p><strong>&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;int count();</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetCount</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x67E5;&#x8BE2;&#x603B;&#x8BB0;&#x5F55;&#x6570;</span></span><br><span class="line">    <span class="comment">//&#x6267;&#x884C;&#x7684;SQL&#x4E3A;&#xFF1A;SELECT COUNT( * ) FROM user</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> userService.count();</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x603B;&#x8BB0;&#x5F55;&#x6570;&#xFF1A;&quot;</span> + count);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x6D4B;&#x8BD5;&#x6279;&#x91CF;&#x63D2;&#x5165;&#x6570;&#x636E;</strong></p>
<blockquote>
<p><strong>&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#xFF1A;boolean saveBatch(Collection<T> entityList);</T></strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>{</span><br><span class="line">    List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) {</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setName(<span class="string">&quot;Vz&quot;</span>+i);</span><br><span class="line">        user.setAge(<span class="number">20</span>+i);</span><br><span class="line">        list.add(user);</span><br><span class="line">    }</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> userService.saveBatch(list);</span><br><span class="line">    System.out.println(b ? <span class="string">&quot;&#x6DFB;&#x52A0;&#x6210;&#x529F;&#xFF01;&quot;</span> : <span class="string">&quot;&#x6DFB;&#x52A0;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="&#x56DB;&#x3001;&#x5E38;&#x7528;&#x6CE8;&#x89E3;"><a href="#&#x56DB;&#x3001;&#x5E38;&#x7528;&#x6CE8;&#x89E3;" class="headerlink" title="&#x56DB;&#x3001;&#x5E38;&#x7528;&#x6CE8;&#x89E3;"></a>&#x56DB;&#x3001;&#x5E38;&#x7528;&#x6CE8;&#x89E3;</h1><blockquote>
<p>MyBatis-Plus&#x63D0;&#x4F9B;&#x7684;&#x6CE8;&#x89E3;&#x53EF;&#x4EE5;&#x5E2E;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#x5E93;&#x4E0E;&#x5B9E;&#x4F53;&#x4E4B;&#x95F4;&#x76F8;&#x4E92;&#x6620;&#x5C04;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
</blockquote>
<h2 id="1-TableName"><a href="#1-TableName" class="headerlink" title="1.@TableName"></a>1.@TableName</h2><blockquote>
<p>&#x7ECF;&#x8FC7;&#x4EE5;&#x4E0A;&#x7684;&#x6D4B;&#x8BD5;&#xFF0C;&#x5728;&#x4F7F;&#x7528;MyBatis-Plus&#x5B9E;&#x73B0;&#x57FA;&#x672C;&#x7684;CRUD&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5E76;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x8981;&#x64CD;&#x4F5C;&#x7684;&#x8868;&#xFF0C;&#x53EA;&#x662F;&#x5728;Mapper&#x63A5;&#x53E3;&#x7EE7;&#x627F;BaseMapper&#x65F6;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E86;&#x6CDB;&#x578B;User&#xFF0C;&#x800C;&#x64CD;&#x4F5C;&#x7684;&#x8868;&#x4E3A;user&#x8868;&#xFF0C;&#x7531;&#x6B64;&#x5F97;&#x51FA;&#x7ED3;&#x8BBA;&#xFF0C;MyBatis-Plus&#x5728;&#x786E;&#x5B9A;&#x64CD;&#x4F5C;&#x7684;&#x8868;&#x65F6;&#xFF0C;&#x7531;BaseMapper&#x7684;&#x6CDB;&#x578B;&#x51B3;&#x5B9A;&#xFF0C;&#x5373;&#x5B9E;&#x4F53;&#x7C7B;&#x578B;&#x51B3;&#x5B9A;&#xFF0C;&#x4E14;&#x9ED8;&#x8BA4;&#x64CD;&#x4F5C;&#x7684;&#x8868;&#x540D;&#x548C;&#x5B9E;&#x4F53;&#x7C7B;&#x578B;&#x7684;&#x7C7B;&#x540D;&#x4E00;&#x81F4;&#x3002;</p>
</blockquote>
<h3 id="1-1&#x5F15;&#x51FA;&#x95EE;&#x9898;"><a href="#1-1&#x5F15;&#x51FA;&#x95EE;&#x9898;" class="headerlink" title="1.1	&#x5F15;&#x51FA;&#x95EE;&#x9898;"></a>1.1	&#x5F15;&#x51FA;&#x95EE;&#x9898;</h3><hr>
<blockquote>
<p><strong>&#x82E5;&#x5B9E;&#x4F53;&#x7C7B;&#x7C7B;&#x578B;&#x7684;&#x7C7B;&#x540D;&#x548C;&#x8981;&#x64CD;&#x4F5C;&#x7684;&#x8868;&#x7684;&#x8868;&#x540D;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x4F1A;&#x51FA;&#x73B0;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;</strong></p>
</blockquote>
<ul>
<li><p>&#x6211;&#x4EEC;&#x5C06;&#x8868;<code>user</code>&#x66F4;&#x540D;&#x4E3A;<code>t_user</code>&#xFF0C;&#x6D4B;&#x8BD5;&#x67E5;&#x8BE2;&#x529F;&#x80FD;</p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520093844842.png" alt="image-20220520093844842"></p>
</li>
<li><p>&#x7A0B;&#x5E8F;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;<strong>Table &#x2018;mybatis_plus.user&#x2019; doesn&#x2019;t exist</strong>&#xFF0C;&#x56E0;&#x4E3A;&#x73B0;&#x5728;&#x7684;&#x8868;&#x540D;&#x4E3A;<code>t_user</code>&#xFF0C;&#x800C;&#x9ED8;&#x8BA4;&#x64CD;&#x4F5C;&#x7684;&#x8868;&#x540D;&#x548C;&#x5B9E;&#x4F53;&#x7C7B;&#x578B;&#x7684;&#x7C7B;&#x540D;&#x4E00;&#x81F4;&#xFF0C;&#x5373;<code>user</code>&#x8868;</p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520094126411.png" alt="image-20220520094126411"></p>
</li>
</ul>
<h3 id="1-2&#x89E3;&#x51B3;&#x95EE;&#x9898;"><a href="#1-2&#x89E3;&#x51B3;&#x95EE;&#x9898;" class="headerlink" title="1.2	&#x89E3;&#x51B3;&#x95EE;&#x9898;"></a>1.2	&#x89E3;&#x51B3;&#x95EE;&#x9898;</h3><hr>
<h4 id="a&#x3001;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x89E3;&#x51B3;&#x95EE;&#x9898;"><a href="#a&#x3001;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x89E3;&#x51B3;&#x95EE;&#x9898;" class="headerlink" title="a&#x3001;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x89E3;&#x51B3;&#x95EE;&#x9898;"></a>a&#x3001;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x89E3;&#x51B3;&#x95EE;&#x9898;</h4><blockquote>
<p><strong>&#x5728;&#x5B9E;&#x4F53;&#x7C7B;&#x7C7B;&#x578B;&#x4E0A;&#x6DFB;&#x52A0;<code>@TableName(&quot;t_user&quot;)</code>&#xFF0C;&#x6807;&#x8BC6;&#x5B9E;&#x4F53;&#x7C7B;&#x5BF9;&#x5E94;&#x7684;&#x8868;&#xFF0C;&#x5373;&#x53EF;&#x6210;&#x529F;&#x6267;&#x884C;SQL&#x8BED;&#x53E5;</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;t_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> {</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h4 id="b&#x3001;&#x4F7F;&#x7528;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x89E3;&#x51B3;&#x95EE;&#x9898;"><a href="#b&#x3001;&#x4F7F;&#x7528;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x89E3;&#x51B3;&#x95EE;&#x9898;" class="headerlink" title="b&#x3001;&#x4F7F;&#x7528;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x89E3;&#x51B3;&#x95EE;&#x9898;"></a>b&#x3001;&#x4F7F;&#x7528;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x89E3;&#x51B3;&#x95EE;&#x9898;</h4><blockquote>
<p><strong>&#x5728;&#x5F00;&#x53D1;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x9047;&#x5230;&#x4EE5;&#x4E0A;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5373;&#x5B9E;&#x4F53;&#x7C7B;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x8868;&#x90FD;&#x6709;&#x56FA;&#x5B9A;&#x7684;&#x524D;&#x7F00;&#xFF0C;&#x4F8B;&#x5982; <code>t_</code> &#x6216; <code>tbl_</code> &#x6B64;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;MyBatis-Plus&#x63D0;&#x4F9B;&#x7684;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#xFF0C;&#x4E3A;&#x5B9E;&#x4F53;&#x7C7B;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x8868;&#x540D;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x7684;&#x524D;&#x7F00;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x5728;&#x6BCF;&#x4E2A;&#x5B9E;&#x4F53;&#x7C7B;&#x4E0A;&#x901A;&#x8FC7;@TableName&#x6807;&#x8BC6;&#x5B9E;&#x4F53;&#x7C7B;&#x5BF9;&#x5E94;&#x7684;&#x8868;</strong></p>
</blockquote>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment"># &#x8BBE;&#x7F6E;&#x5B9E;&#x4F53;&#x7C7B;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x8868;&#x7684;&#x7EDF;&#x4E00;&#x524D;&#x7F00;</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">t_</span></span><br></pre></td></tr></table></figure>





<h2 id="2-TableId"><a href="#2-TableId" class="headerlink" title="2.@TableId"></a>2.@TableId</h2><blockquote>
<p><strong>&#x7ECF;&#x8FC7;&#x4EE5;&#x4E0A;&#x7684;&#x6D4B;&#x8BD5;&#xFF0C;MyBatis-Plus&#x5728;&#x5B9E;&#x73B0;CRUD&#x65F6;&#xFF0C;&#x4F1A;&#x9ED8;&#x8BA4;&#x5C06;id&#x4F5C;&#x4E3A;&#x4E3B;&#x952E;&#x5217;&#xFF0C;&#x5E76;&#x5728;&#x63D2;&#x5165;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x57FA;&#x4E8E;&#x96EA;&#x82B1;&#x7B97;&#x6CD5;&#x7684;&#x7B56;&#x7565;&#x751F;&#x6210;id</strong></p>
</blockquote>
<h3 id="2-1&#x5F15;&#x51FA;&#x95EE;&#x9898;"><a href="#2-1&#x5F15;&#x51FA;&#x95EE;&#x9898;" class="headerlink" title="2.1	&#x5F15;&#x51FA;&#x95EE;&#x9898;"></a>2.1	&#x5F15;&#x51FA;&#x95EE;&#x9898;</h3><hr>
<blockquote>
<p><strong>&#x82E5;&#x5B9E;&#x4F53;&#x7C7B;&#x548C;&#x8868;&#x4E2D;&#x8868;&#x793A;&#x4E3B;&#x952E;&#x7684;&#x4E0D;&#x662F;id&#xFF0C;&#x800C;&#x662F;&#x5176;&#x4ED6;&#x5B57;&#x6BB5;&#xFF0C;&#x4F8B;&#x5982;uid&#xFF0C;MyBatis-Plus&#x4F1A;&#x81EA;&#x52A8;&#x8BC6;&#x522B;uid&#x4E3A;&#x4E3B;&#x952E;&#x5217;&#x5417;&#xFF1F;</strong></p>
</blockquote>
<ul>
<li><p>&#x6211;&#x4EEC;&#x5B9E;&#x4F53;&#x7C7B;&#x4E2D;&#x7684;&#x5C5E;&#x6027;<code>id</code>&#x6539;&#x4E3A;<code>uid</code>&#xFF0C;&#x5C06;&#x8868;&#x4E2D;&#x7684;&#x5B57;&#x6BB5;<code>id</code>&#x4E5F;&#x6539;&#x4E3A;<code>uid</code>&#xFF0C;&#x6D4B;&#x8BD5;&#x6DFB;&#x52A0;&#x529F;&#x80FD;</p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520100939157.png" alt="image-20220520100939157"></p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520100715109.png" alt="image-20220520100715109"></p>
</li>
<li><p>&#x7A0B;&#x5E8F;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;<strong>Field &#x2018;uid&#x2019; doesn&#x2019;t have a default value</strong>&#xFF0C;&#x8BF4;&#x660E;MyBatis-Plus&#x6CA1;&#x6709;&#x5C06;<code>uid</code>&#x4F5C;&#x4E3A;&#x4E3B;&#x952E;&#x8D4B;&#x503C;</p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520101317761.png" alt="image-20220520101317761"></p>
</li>
</ul>
<h3 id="2-2&#x89E3;&#x51B3;&#x95EE;&#x9898;"><a href="#2-2&#x89E3;&#x51B3;&#x95EE;&#x9898;" class="headerlink" title="2.2	&#x89E3;&#x51B3;&#x95EE;&#x9898;"></a>2.2	&#x89E3;&#x51B3;&#x95EE;&#x9898;</h3><hr>
<blockquote>
<p><strong>&#x5728;&#x5B9E;&#x4F53;&#x7C7B;&#x4E2D;uid&#x5C5E;&#x6027;&#x4E0A;&#x901A;&#x8FC7;<code>@TableId</code>&#x5C06;&#x5176;&#x6807;&#x8BC6;&#x4E3A;&#x4E3B;&#x952E;&#xFF0C;&#x5373;&#x53EF;&#x6210;&#x529F;&#x6267;&#x884C;SQL&#x8BED;&#x53E5;</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Date</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> {</span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long uid;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h3 id="2-3-TableId&#x7684;value&#x5C5E;&#x6027;"><a href="#2-3-TableId&#x7684;value&#x5C5E;&#x6027;" class="headerlink" title="2.3	@TableId&#x7684;value&#x5C5E;&#x6027;"></a>2.3	@TableId&#x7684;value&#x5C5E;&#x6027;</h3><hr>
<blockquote>
<p>&#x82E5;&#x5B9E;&#x4F53;&#x7C7B;&#x4E2D;&#x4E3B;&#x952E;&#x5BF9;&#x5E94;&#x7684;&#x5C5E;&#x6027;&#x4E3A;id&#xFF0C;&#x800C;&#x8868;&#x4E2D;&#x8868;&#x793A;&#x4E3B;&#x952E;&#x7684;&#x5B57;&#x6BB5;&#x4E3A;uid&#xFF0C;&#x6B64;&#x65F6;&#x82E5;&#x53EA;&#x5728;&#x5C5E;&#x6027;id&#x4E0A;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3;@TableId&#xFF0C;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;**Unknown column &#x2018;id&#x2019; in &#x2018;field list&#x2019;**&#xFF0C;&#x5373;MyBatis-Plus&#x4ECD;&#x7136;&#x4F1A;&#x5C06;id&#x4F5C;&#x4E3A;&#x8868;&#x7684;&#x4E3B;&#x952E;&#x64CD;&#x4F5C;&#xFF0C;&#x800C;&#x8868;&#x4E2D;&#x8868;&#x793A;&#x4E3B;&#x952E;&#x7684;&#x662F;&#x5B57;&#x6BB5;uid&#x6B64;&#x65F6;&#x9700;&#x8981;&#x901A;&#x8FC7;@TableId&#x6CE8;&#x89E3;&#x7684;value&#x5C5E;&#x6027;&#xFF0C;&#x6307;&#x5B9A;&#x8868;&#x4E2D;&#x7684;&#x4E3B;&#x952E;&#x5B57;&#x6BB5;&#xFF0C;<code>@TableId(&quot;uid&quot;)</code>&#x6216;<code>@TableId(value=&quot;uid&quot;)</code></p>
</blockquote>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520103030977.png" alt="image-20220520103030977"></p>
<h3 id="2-4-TableId&#x7684;type&#x5C5E;&#x6027;"><a href="#2-4-TableId&#x7684;type&#x5C5E;&#x6027;" class="headerlink" title="2.4	@TableId&#x7684;type&#x5C5E;&#x6027;"></a>2.4	@TableId&#x7684;type&#x5C5E;&#x6027;</h3><hr>
<blockquote>
<p><strong>type&#x5C5E;&#x6027;&#x7528;&#x6765;&#x5B9A;&#x4E49;&#x4E3B;&#x952E;&#x7B56;&#x7565;&#xFF1A;&#x9ED8;&#x8BA4;&#x96EA;&#x82B1;&#x7B97;&#x6CD5;</strong></p>
</blockquote>
<p><strong>&#x5E38;&#x7528;&#x7684;&#x4E3B;&#x952E;&#x7B56;&#x7565;&#xFF1A;</strong></p>
<table>
<thead>
<tr>
<th align="center">&#x503C;</th>
<th align="center">&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody><tr>
<td align="center">IdType.ASSIGN_ID&#xFF08;&#x9ED8;&#x8BA4;&#xFF09;</td>
<td align="center">&#x57FA;&#x4E8E;&#x96EA;&#x82B1;&#x7B97;&#x6CD5;&#x7684;&#x7B56;&#x7565;&#x751F;&#x6210;&#x6570;&#x636E;id&#xFF0C;&#x4E0E;&#x6570;&#x636E;&#x5E93;id&#x662F;&#x5426;&#x8BBE;&#x7F6E;&#x81EA;&#x589E;&#x65E0;&#x5173;</td>
</tr>
<tr>
<td align="center">IdType.AUTO</td>
<td align="center">&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5E93;&#x7684;&#x81EA;&#x589E;&#x7B56;&#x7565;&#xFF0C;&#x6CE8;&#x610F;&#xFF0C;&#x8BE5;&#x7C7B;&#x578B;&#x8BF7;&#x786E;&#x4FDD;&#x6570;&#x636E;&#x5E93;&#x8BBE;&#x7F6E;&#x4E86;id&#x81EA;&#x589E;&#xFF0C;</td>
</tr>
</tbody></table>
<p><strong>&#x914D;&#x7F6E;&#x5168;&#x5C40;&#x4E3B;&#x952E;&#x7B56;&#x7565;&#xFF1A;</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#MyBatis-Plus&#x76F8;&#x5173;&#x914D;&#x7F6E;</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment">#&#x914D;&#x7F6E;&#x65E5;&#x5FD7;</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment">#&#x914D;&#x7F6E;mp&#x7684;&#x4E3B;&#x952E;&#x7B56;&#x7565;&#x4E3A;&#x81EA;&#x589E;</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line">      <span class="comment"># &#x8BBE;&#x7F6E;&#x5B9E;&#x4F53;&#x7C7B;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x8868;&#x7684;&#x7EDF;&#x4E00;&#x524D;&#x7F00;</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">t_</span></span><br></pre></td></tr></table></figure>



<h2 id="3-TbaleField"><a href="#3-TbaleField" class="headerlink" title="3.@TbaleField"></a>3.@TbaleField</h2><blockquote>
<p>&#x7ECF;&#x8FC7;&#x4EE5;&#x4E0A;&#x7684;&#x6D4B;&#x8BD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;MyBatis-Plus&#x5728;&#x6267;&#x884C;SQL&#x8BED;&#x53E5;&#x65F6;&#xFF0C;&#x8981;&#x4FDD;&#x8BC1;&#x5B9E;&#x4F53;&#x7C7B;&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#x540D;&#x548C;&#x8868;&#x4E2D;&#x7684;&#x5B57;&#x6BB5;&#x540D;&#x4E00;&#x81F4;</p>
<p>&#x5982;&#x679C;&#x5B9E;&#x4F53;&#x7C7B;&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#x540D;&#x548C;&#x5B57;&#x6BB5;&#x540D;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4F1A;&#x51FA;&#x73B0;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x5462;&#xFF1F;</p>
</blockquote>
<h3 id="3-1&#x60C5;&#x51B5;&#x4E00;"><a href="#3-1&#x60C5;&#x51B5;&#x4E00;" class="headerlink" title="3.1	&#x60C5;&#x51B5;&#x4E00;"></a>3.1	&#x60C5;&#x51B5;&#x4E00;</h3><hr>
<p>&#x82E5;&#x5B9E;&#x4F53;&#x7C7B;&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x9A7C;&#x5CF0;&#x547D;&#x540D;&#x98CE;&#x683C;&#xFF0C;&#x800C;&#x8868;&#x4E2D;&#x7684;&#x5B57;&#x6BB5;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x4E0B;&#x5212;&#x7EBF;&#x547D;&#x540D;&#x98CE;&#x683C;</p>
<p>&#x4F8B;&#x5982;&#x5B9E;&#x4F53;&#x7C7B;&#x5C5E;&#x6027;<code>userName</code>&#xFF0C;&#x8868;&#x4E2D;&#x5B57;&#x6BB5;<code>user_name</code></p>
<p>&#x6B64;&#x65F6;MyBatis-Plus&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x4E0B;&#x5212;&#x7EBF;&#x547D;&#x540D;&#x98CE;&#x683C;&#x8F6C;&#x5316;&#x4E3A;&#x9A7C;&#x5CF0;&#x547D;&#x540D;&#x98CE;&#x683C;</p>
<p>&#x76F8;&#x5F53;&#x4E8E;&#x5728;MyBatis&#x4E2D;&#x914D;&#x7F6E;</p>
<h3 id="3-2&#x60C5;&#x51B5;&#x4E8C;"><a href="#3-2&#x60C5;&#x51B5;&#x4E8C;" class="headerlink" title="3.2	&#x60C5;&#x51B5;&#x4E8C;"></a>3.2	&#x60C5;&#x51B5;&#x4E8C;</h3><hr>
<blockquote>
<p>&#x82E5;&#x5B9E;&#x4F53;&#x7C7B;&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x8868;&#x4E2D;&#x7684;&#x5B57;&#x6BB5;&#x4E0D;&#x6EE1;&#x8DB3;&#x60C5;&#x51B5;1</p>
<p>&#x4F8B;&#x5982;&#x5B9E;&#x4F53;&#x7C7B;&#x5C5E;&#x6027;<code>name</code>&#xFF0C;&#x8868;&#x4E2D;&#x5B57;&#x6BB5;<code>username</code></p>
<p>&#x6B64;&#x65F6;&#x9700;&#x8981;&#x5728;&#x5B9E;&#x4F53;&#x7C7B;&#x5C5E;&#x6027;&#x4E0A;&#x4F7F;&#x7528;<code>@TableField(&quot;username&quot;)</code>&#x8BBE;&#x7F6E;&#x5C5E;&#x6027;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x5B57;&#x6BB5;&#x540D;</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> {</span><br><span class="line">    <span class="meta">@TableId(&quot;uid&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@TableField(&quot;username&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h2 id="4-TableLogic"><a href="#4-TableLogic" class="headerlink" title="4.@TableLogic"></a>4.@TableLogic</h2><h3 id="4-1&#x903B;&#x8F91;&#x5220;&#x9664;"><a href="#4-1&#x903B;&#x8F91;&#x5220;&#x9664;" class="headerlink" title="4.1	&#x903B;&#x8F91;&#x5220;&#x9664;"></a>4.1	&#x903B;&#x8F91;&#x5220;&#x9664;</h3><hr>
<blockquote>
<p>&#x7269;&#x7406;&#x5220;&#x9664;&#xFF1A;&#x771F;&#x5B9E;&#x5220;&#x9664;&#xFF0C;&#x5C06;&#x5BF9;&#x5E94;&#x6570;&#x636E;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x5220;&#x9664;&#xFF0C;&#x4E4B;&#x540E;&#x67E5;&#x8BE2;&#x4E0D;&#x5230;&#x6B64;&#x6761;&#x88AB;&#x5220;&#x9664;&#x7684;&#x6570;&#x636E;</p>
<p>&#x903B;&#x8F91;&#x5220;&#x9664;&#xFF1A;&#x5047;&#x5220;&#x9664;&#xFF0C;&#x5C06;&#x5BF9;&#x5E94;&#x6570;&#x636E;&#x4E2D;&#x4EE3;&#x8868;&#x662F;&#x5426;&#x88AB;&#x5220;&#x9664;&#x5B57;&#x6BB5;&#x7684;&#x72B6;&#x6001;&#x4FEE;&#x6539;&#x4E3A;&#x201C;&#x88AB;&#x5220;&#x9664;&#x72B6;&#x6001;&#x201D;&#xFF0C;&#x4E4B;&#x540E;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x4ECD;&#x65E7;&#x80FD;&#x770B;&#x5230;&#x6B64;&#x6761;&#x6570;&#x636E;&#x8BB0;&#x5F55;</p>
<p>&#x4F7F;&#x7528;&#x573A;&#x666F;&#xFF1A;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x6062;&#x590D;</p>
</blockquote>
<h3 id="4-2&#x5B9E;&#x73B0;&#x903B;&#x8F91;&#x5220;&#x9664;"><a href="#4-2&#x5B9E;&#x73B0;&#x903B;&#x8F91;&#x5220;&#x9664;" class="headerlink" title="4.2	&#x5B9E;&#x73B0;&#x903B;&#x8F91;&#x5220;&#x9664;"></a>4.2	&#x5B9E;&#x73B0;&#x903B;&#x8F91;&#x5220;&#x9664;</h3><hr>
<ul>
<li><p><strong>&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x521B;&#x5EFA;&#x903B;&#x8F91;&#x5220;&#x9664;&#x72B6;&#x6001;&#x5217;&#xFF0C;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;0</strong></p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520134529809.png" alt="image-20220520134529809"></p>
</li>
<li><p><strong>&#x5B9E;&#x4F53;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x903B;&#x8F91;&#x5220;&#x9664;&#x5C5E;&#x6027;</strong></p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520134636112.png" alt="image-20220520134636112"></p>
</li>
<li><p><strong>&#x6D4B;&#x8BD5;&#x5220;&#x9664;&#x529F;&#x80FD;&#xFF0C;&#x771F;&#x6B63;&#x6267;&#x884C;&#x7684;&#x662F;&#x4FEE;&#x6539;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteById</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.deleteById(<span class="number">1527472864163348482L</span>);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;&#x5220;&#x9664;&#x6210;&#x529F;&#xFF01;&quot;</span> : <span class="string">&quot;&#x5220;&#x9664;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x53D7;&#x5F71;&#x54CD;&#x7684;&#x884C;&#x6570;&#x4E3A;&#xFF1A;&quot;</span> + result);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520135637388.png" alt="image-20220520135637388"></p>
</li>
<li><p><strong>&#x6B64;&#x65F6;&#x6267;&#x884C;&#x67E5;&#x8BE2;&#x65B9;&#x6CD5;&#xFF0C;&#x67E5;&#x8BE2;&#x7684;&#x7ED3;&#x679C;&#x4E3A;&#x81EA;&#x52A8;&#x6DFB;&#x52A0;&#x6761;&#x4EF6;<code>is_deleted=0</code></strong></p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220520140036445.png" alt="image-20220520140036445"></p>
</li>
</ul>
<h1 id="&#x4E94;&#x3001;&#x6761;&#x4EF6;&#x6784;&#x9020;&#x5668;"><a href="#&#x4E94;&#x3001;&#x6761;&#x4EF6;&#x6784;&#x9020;&#x5668;" class="headerlink" title="&#x4E94;&#x3001;&#x6761;&#x4EF6;&#x6784;&#x9020;&#x5668;"></a>&#x4E94;&#x3001;&#x6761;&#x4EF6;&#x6784;&#x9020;&#x5668;</h1><h2 id="1-Wrapper&#x4ECB;&#x7ECD;"><a href="#1-Wrapper&#x4ECB;&#x7ECD;" class="headerlink" title="1.Wrapper&#x4ECB;&#x7ECD;"></a>1.Wrapper&#x4ECB;&#x7ECD;</h2><p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220521092812125.png" alt="image-20220521092812125"></p>
<ul>
<li><p><code>Wrapper</code> &#xFF1A; &#x6761;&#x4EF6;&#x6784;&#x9020;&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x6700;&#x9876;&#x7AEF;&#x7236;&#x7C7B;</p>
<ul>
<li><p><code>AbstractWrapper </code>&#xFF1A; &#x7528;&#x4E8E;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#x5C01;&#x88C5;&#xFF0C;&#x751F;&#x6210; sql &#x7684; where &#x6761;&#x4EF6;</p>
<ul>
<li><p><code>QueryWrapper </code>&#xFF1A; &#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#x5C01;&#x88C5;</p>
</li>
<li><p><code>UpdateWrapper </code>&#xFF1A; Update &#x6761;&#x4EF6;&#x5C01;&#x88C5;</p>
</li>
<li><p><code>AbstractLambdaWrapper </code>&#xFF1A; &#x4F7F;&#x7528;Lambda &#x8BED;&#x6CD5;</p>
<ul>
<li><p><code>LambdaQueryWrapper </code>&#xFF1A;&#x7528;&#x4E8E;Lambda&#x8BED;&#x6CD5;&#x4F7F;&#x7528;&#x7684;&#x67E5;&#x8BE2;Wrapper</p>
</li>
<li><p><code>LambdaUpdateWrapper </code>&#xFF1A; Lambda &#x66F4;&#x65B0;&#x5C01;&#x88C5;Wrapper</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2-QueryWrapper"><a href="#2-QueryWrapper" class="headerlink" title="2.QueryWrapper"></a>2.QueryWrapper</h2><ul>
<li><p><strong>&#x7EC4;&#x88C5;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;</strong></p>
<blockquote>
<p><strong>&#x6267;&#x884C;SQL&#xFF1A;</strong>SELECT uid AS id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 AND (username LIKE ? AND age BETWEEN ? AND ? AND email IS NOT NULL)</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x540D;&#x5305;&#x542B;a&#xFF0C;&#x5E74;&#x9F84;&#x5728;20&#x5230;30&#x4E4B;&#x95F4;&#xFF0C;&#x90AE;&#x7BB1;&#x4FE1;&#x606F;&#x4E0D;&#x4E3A;null&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.like(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;a&quot;</span>).between(<span class="string">&quot;age&quot;</span>,<span class="number">20</span>,<span class="number">30</span>).isNotNull(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x7EC4;&#x88C5;&#x6392;&#x5E8F;&#x6761;&#x4EF6;</strong></p>
<blockquote>
<p><strong>&#x6267;&#x884C;SQL&#xFF1A;</strong>SELECT uid AS id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 ORDER BY age DESC,id ASC</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x4FE1;&#x606F;&#xFF0C;&#x6309;&#x7167;&#x5E74;&#x9F84;&#x7684;&#x964D;&#x5E8F;&#x6392;&#x5E8F;&#xFF0C;&#x82E5;&#x5E74;&#x9F84;&#x76F8;&#x540C;&#xFF0C;&#x5219;&#x6309;&#x7167;id&#x5347;&#x5E8F;&#x6392;&#x5E8F;</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.orderByDesc(<span class="string">&quot;age&quot;</span>).orderByAsc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x7EC4;&#x88C5;&#x5220;&#x9664;&#x6761;&#x4EF6;</strong></p>
<blockquote>
<p><strong>&#x6267;&#x884C;SQL&#xFF1A;</strong>UPDATE t_user SET is_deleted=1 WHERE is_deleted=0 AND (email IS NULL)</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test03</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x5220;&#x9664;&#x90AE;&#x7BB1;&#x5730;&#x5740;&#x4E3A;null&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.isNull(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.delete(queryWrapper);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;&#x5220;&#x9664;&#x6210;&#x529F;&#xFF01;&quot;</span> : <span class="string">&quot;&#x5220;&#x9664;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x53D7;&#x5F71;&#x54CD;&#x7684;&#x884C;&#x6570;&#x4E3A;&#xFF1A;&quot;</span> + result);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x6761;&#x4EF6;&#x7684;&#x4F18;&#x5148;&#x7EA7;</strong></p>
<blockquote>
<p><strong>&#x6267;&#x884C;SQL&#xFF1A;</strong>UPDATE t_user SET user_name=?, email=? WHERE is_deleted=0 AND (age &gt; ? AND user_name LIKE ? OR email IS NULL)</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test04</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x5C06;&#xFF08;&#x5E74;&#x9F84;&#x5927;&#x4E8E;20&#x5E76;&#x4E14;&#x7528;&#x6237;&#x540D;&#x4E2D;&#x5305;&#x542B;&#x6709;a&#xFF09;&#x6216;&#x90AE;&#x7BB1;&#x4E3A;null&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x4FEE;&#x6539;</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;&gt;();</span><br><span class="line">    updateWrapper.gt(<span class="string">&quot;age&quot;</span>,<span class="number">20</span>).like(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;a&quot;</span>).or().isNull(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setName(<span class="string">&quot;Oz&quot;</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;test@oz6.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(user, updateWrapper);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;&#x4FEE;&#x6539;&#x6210;&#x529F;&#xFF01;&quot;</span> : <span class="string">&quot;&#x4FEE;&#x6539;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x53D7;&#x5F71;&#x54CD;&#x7684;&#x884C;&#x6570;&#x4E3A;&#xFF1A;&quot;</span> + result);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>&#x6267;&#x884C;SQL&#xFF1A;</strong>UPDATE t_user SET username=?, email=? WHERE is_deleted=0 AND (username LIKE ? AND (age &gt; ? OR email IS NULL))</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test05</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x5C06;&#x7528;&#x6237;&#x540D;&#x4E2D;&#x5305;&#x542B;&#x6709;a&#x5E76;&#x4E14;&#xFF08;&#x5E74;&#x9F84;&#x5927;&#x4E8E;20&#x6216;&#x90AE;&#x7BB1;&#x4E3A;null&#xFF09;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x4FEE;&#x6539;</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;&gt;();</span><br><span class="line">    updateWrapper.like(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;a&quot;</span>).and(i-&gt;i.gt(<span class="string">&quot;age&quot;</span>,<span class="number">20</span>).or().isNull(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setName(<span class="string">&quot;Vz7797&quot;</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;test@ss8o.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(user, updateWrapper);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;&#x4FEE;&#x6539;&#x6210;&#x529F;&#xFF01;&quot;</span> : <span class="string">&quot;&#x4FEE;&#x6539;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x53D7;&#x5F71;&#x54CD;&#x7684;&#x884C;&#x6570;&#x4E3A;&#xFF1A;&quot;</span> + result);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x7EC4;&#x88C5;select&#x5B50;&#x53E5;</strong></p>
<blockquote>
<p><strong>&#x6267;&#x884C;SQL&#xFF1A;</strong>SELECT username,age,email FROM t_user WHERE is_deleted=0</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test06</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x7684;&#x7528;&#x6237;&#x540D;&#x3001;&#x5E74;&#x9F84;&#x3001;&#x90AE;&#x7BB1;&#x4FE1;&#x606F;</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.select(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;age&quot;</span>,<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(queryWrapper);</span><br><span class="line">    maps.forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x5B9E;&#x73B0;&#x5B50;&#x67E5;&#x8BE2;</strong></p>
<blockquote>
<p><strong>&#x6267;&#x884C;SQL&#xFF1A;</strong>SELECT uid AS id,user_name AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 AND (uid IN (select uid from t_user where uid &lt;= 100))</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test07</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x67E5;&#x8BE2;id&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;100&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.inSql(<span class="string">&quot;uid&quot;</span>, <span class="string">&quot;select uid from t_user where uid &lt;= 100&quot;</span>);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-UpdateWrapper"><a href="#3-UpdateWrapper" class="headerlink" title="3.UpdateWrapper"></a>3.UpdateWrapper</h2><blockquote>
<p>UpdateWrapper&#x4E0D;&#x4EC5;&#x62E5;&#x6709;QueryWrapper&#x7684;&#x7EC4;&#x88C5;&#x6761;&#x4EF6;&#x529F;&#x80FD;&#xFF0C;&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;set&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x5BF9;&#x5E94;&#x6761;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4FE1;&#x606F;</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test08</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x5C06;&#x7528;&#x6237;&#x540D;&#x4E2D;&#x5305;&#x542B;&#x6709;a&#x5E76;&#x4E14;&#xFF08;&#x5E74;&#x9F84;&#x5927;&#x4E8E;20&#x6216;&#x90AE;&#x7BB1;&#x4E3A;null&#xFF09;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x4FEE;&#x6539;</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;&gt;();</span><br><span class="line">    updateWrapper.like(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;a&quot;</span>).and( i -&gt; i.gt(<span class="string">&quot;age&quot;</span>,<span class="number">20</span>).or().isNull(<span class="string">&quot;email&quot;</span>)).set(<span class="string">&quot;email&quot;</span>,<span class="string">&quot;svip@qq.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(<span class="literal">null</span>, updateWrapper);</span><br><span class="line">    System.out.println(result &gt; <span class="number">0</span> ? <span class="string">&quot;&#x4FEE;&#x6539;&#x6210;&#x529F;&#xFF01;&quot;</span> : <span class="string">&quot;&#x4FEE;&#x6539;&#x5931;&#x8D25;&#xFF01;&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x53D7;&#x5F71;&#x54CD;&#x7684;&#x884C;&#x6570;&#x4E3A;&#xFF1A;&quot;</span> + result);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h2 id="4-condition"><a href="#4-condition" class="headerlink" title="4.condition"></a>4.condition</h2><blockquote>
<p>&#x5728;&#x771F;&#x6B63;&#x5F00;&#x53D1;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x7EC4;&#x88C5;&#x6761;&#x4EF6;&#x662F;&#x5E38;&#x89C1;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x800C;&#x8FD9;&#x4E9B;&#x6761;&#x4EF6;&#x6570;&#x636E;&#x6765;&#x6E90;&#x4E8E;&#x7528;&#x6237;&#x8F93;&#x5165;&#xFF0C;&#x662F;&#x53EF;&#x9009;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x5728;&#x7EC4;&#x88C5;&#x8FD9;&#x4E9B;&#x6761;&#x4EF6;&#x65F6;&#xFF0C;&#x5FC5;&#x987B;&#x5148;&#x5224;&#x65AD;&#x7528;&#x6237;&#x662F;&#x5426;&#x9009;&#x62E9;&#x4E86;&#x8FD9;&#x4E9B;&#x6761;&#x4EF6;&#xFF0C;&#x82E5;&#x9009;&#x62E9;&#x5219;&#x9700;&#x8981;&#x7EC4;&#x88C5;&#x8BE5;&#x6761;&#x4EF6;&#xFF0C;&#x82E5;&#x6CA1;&#x6709;&#x9009;&#x62E9;&#x5219;&#x4E00;&#x5B9A;&#x4E0D;&#x80FD;&#x7EC4;&#x88C5;&#xFF0C;&#x4EE5;&#x514D;&#x5F71;&#x54CD;SQL&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;</p>
</blockquote>
<ul>
<li><p><strong>&#x601D;&#x8DEF;&#x4E00;</strong></p>
<blockquote>
<p><strong>&#x6267;&#x884C;SQL&#xFF1A;</strong>SELECT uid AS id,user_name AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 AND (user_name LIKE ? AND age &lt;= ?)</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test09</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageBegin</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageEnd</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span>(StringUtils.isNotBlank(username)){</span><br><span class="line">        <span class="comment">//isNotBlank&#x5224;&#x65AD;&#x67D0;&#x4E2A;&#x5B57;&#x7B26;&#x521B;&#x662F;&#x5426;&#x4E0D;&#x4E3A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x3001;&#x4E0D;&#x4E3A;null&#x3001;&#x4E0D;&#x4E3A;&#x7A7A;&#x767D;&#x7B26;</span></span><br><span class="line">        queryWrapper.like(<span class="string">&quot;user_name&quot;</span>, username);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(ageBegin != <span class="literal">null</span>){</span><br><span class="line">        queryWrapper.ge(<span class="string">&quot;age&quot;</span>, ageBegin);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(ageEnd != <span class="literal">null</span>){</span><br><span class="line">        queryWrapper.le(<span class="string">&quot;age&quot;</span>, ageEnd);</span><br><span class="line">    }</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x601D;&#x8DEF;&#x4E8C;</strong></p>
<blockquote>
<p>&#x4E0A;&#x9762;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6848;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x4EE3;&#x7801;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5E26;condition&#x53C2;&#x6570;&#x7684;&#x91CD;&#x8F7D;&#x65B9;&#x6CD5;&#x6784;&#x5EFA;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#xFF0C;&#x7B80;&#x5316;&#x4EE3;&#x7801;&#x7684;&#x7F16;&#x5199;</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test10</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageBegin</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageEnd</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.like(StringUtils.isNotBlank(username), <span class="string">&quot;user_name&quot;</span>, username)</span><br><span class="line">        .ge(ageBegin != <span class="literal">null</span>, <span class="string">&quot;age&quot;</span>, ageBegin)</span><br><span class="line">        .le(ageEnd != <span class="literal">null</span>, <span class="string">&quot;age&quot;</span>, ageEnd);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="5-LambdaQueryWrapper"><a href="#5-LambdaQueryWrapper" class="headerlink" title="5.LambdaQueryWrapper"></a>5.LambdaQueryWrapper</h2><blockquote>
<p>&#x529F;&#x80FD;&#x7B49;&#x540C;&#x4E8E;QueryWrapper&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;Lambda&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x8BED;&#x6CD5;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x586B;&#x9519;&#x5217;&#x540D;&#x3002;</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test11</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageBegin</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">ageEnd</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">    LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.like(StringUtils.isNotBlank(username), User::getName, username)</span><br><span class="line">        .ge(ageBegin != <span class="literal">null</span>, User::getAge, ageBegin)</span><br><span class="line">        .le(ageEnd != <span class="literal">null</span>, User::getAge, ageEnd);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h2 id="6-LambdaUpdateWrapper"><a href="#6-LambdaUpdateWrapper" class="headerlink" title="6.LambdaUpdateWrapper"></a>6.LambdaUpdateWrapper</h2><blockquote>
<p>&#x529F;&#x80FD;&#x7B49;&#x540C;&#x4E8E;UpdateWrapper&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;Lambda&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x8BED;&#x6CD5;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x586B;&#x9519;&#x5217;&#x540D;&#x3002;</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test12</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//&#x5C06;&#x7528;&#x6237;&#x540D;&#x4E2D;&#x5305;&#x542B;&#x6709;a&#x5E76;&#x4E14;&#xFF08;&#x5E74;&#x9F84;&#x5927;&#x4E8E;20&#x6216;&#x90AE;&#x7BB1;&#x4E3A;null&#xFF09;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x4FEE;&#x6539;</span></span><br><span class="line">    LambdaUpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">LambdaUpdateWrapper</span>&lt;&gt;();</span><br><span class="line">    updateWrapper.like(User::getName, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">        .and(i -&gt; i.gt(User::getAge, <span class="number">20</span>).or().isNull(User::getEmail));</span><br><span class="line">    updateWrapper.set(User::getName, <span class="string">&quot;&#x5C0F;&#x9ED1;&quot;</span>).set(User::getEmail,<span class="string">&quot;abc@atguigu.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(<span class="literal">null</span>, updateWrapper);</span><br><span class="line">    System.out.println(<span class="string">&quot;result&#xFF1A;&quot;</span>+result);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<h1 id="&#x516D;&#x3001;&#x5E38;&#x7528;&#x63D2;&#x4EF6;"><a href="#&#x516D;&#x3001;&#x5E38;&#x7528;&#x63D2;&#x4EF6;" class="headerlink" title="&#x516D;&#x3001;&#x5E38;&#x7528;&#x63D2;&#x4EF6;"></a>&#x516D;&#x3001;&#x5E38;&#x7528;&#x63D2;&#x4EF6;</h1><h2 id="1-&#x5206;&#x9875;&#x63D2;&#x4EF6;"><a href="#1-&#x5206;&#x9875;&#x63D2;&#x4EF6;" class="headerlink" title="1.&#x5206;&#x9875;&#x63D2;&#x4EF6;"></a>1.&#x5206;&#x9875;&#x63D2;&#x4EF6;</h2><blockquote>
<p>MyBatis Plus&#x81EA;&#x5E26;&#x5206;&#x9875;&#x63D2;&#x4EF6;&#xFF0C;&#x53EA;&#x8981;&#x7B80;&#x5355;&#x7684;&#x914D;&#x7F6E;&#x5373;&#x53EF;&#x5B9E;&#x73B0;&#x5206;&#x9875;&#x529F;&#x80FD;</p>
</blockquote>
<ul>
<li><p><strong>&#x6DFB;&#x52A0;&#x914D;&#x7F6E;&#x7C7B;<code>MyBatisPlusConfig</code></strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.mybatisplus.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusConfig</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">//&#x6DFB;&#x52A0;&#x5206;&#x9875;&#x63D2;&#x4EF6;</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPage</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//new Page()&#x4E2D;&#x7684;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x5206;&#x522B;&#x662F;&#x5F53;&#x524D;&#x9875;&#x7801;&#xFF0C;&#x6BCF;&#x9875;&#x663E;&#x793A;&#x6570;&#x91CF;</span></span><br><span class="line">    Page&lt;User&gt; page = userMapper.selectPage(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">1</span>, <span class="number">2</span>), <span class="literal">null</span>);</span><br><span class="line">    List&lt;User&gt; users = page.getRecords();</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-&#x81EA;&#x5B9A;&#x4E49;&#x5206;&#x9875;"><a href="#2-&#x81EA;&#x5B9A;&#x4E49;&#x5206;&#x9875;" class="headerlink" title="2.&#x81EA;&#x5B9A;&#x4E49;&#x5206;&#x9875;"></a>2.&#x81EA;&#x5B9A;&#x4E49;&#x5206;&#x9875;</h2><blockquote>
<p>&#x4E0A;&#x9762;&#x8C03;&#x7528;&#x7684;&#x662F;MyBatis-Plus&#x63D0;&#x4F9B;&#x7684;&#x5E26;&#x6709;&#x5206;&#x9875;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x5206;&#x9875;&#x5462;&#xFF1F;</p>
</blockquote>
<ul>
<li><p><strong>&#x5728;<code>UserMapper</code>&#x63A5;&#x53E3;&#x4E2D;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * &#x6839;&#x636E;&#x5E74;&#x9F84;&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x5217;&#x8868;&#xFF0C;&#x5206;&#x9875;&#x663E;&#x793A; </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> page &#x5206;&#x9875;&#x5BF9;&#x8C61;,xml&#x4E2D;&#x53EF;&#x4EE5;&#x4ECE;&#x91CC;&#x9762;&#x8FDB;&#x884C;&#x53D6;&#x503C;,&#x4F20;&#x9012;&#x53C2;&#x6570; Page &#x5373;&#x81EA;&#x52A8;&#x5206;&#x9875;,&#x5FC5;&#x987B;&#x653E;&#x5728;&#x7B2C;&#x4E00;&#x4F4D; </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> age &#x5E74;&#x9F84; </span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span> </span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">Page&lt;User&gt; <span class="title function_">selectPageVo</span><span class="params">(<span class="meta">@Param(&quot;page&quot;)</span> Page&lt;User&gt; page,<span class="meta">@Param(&quot;age&quot;)</span> Integer age)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x5728;<code>UserMapper.xml</code>&#x4E2D;&#x7F16;&#x5199;SQL&#x5B9E;&#x73B0;&#x8BE5;&#x65B9;&#x6CD5;</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectPageVo&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    select id,username as name,age,email from t_user where age &gt; #{age}</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPageVo</span><span class="params">()</span>{</span><br><span class="line">    Page&lt;User&gt; page = userMapper.selectPageVo(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;User&gt;(<span class="number">1</span>,<span class="number">2</span>), <span class="number">20</span>);</span><br><span class="line">    List&lt;User&gt; users = page.getRecords();</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-&#x4E50;&#x89C2;&#x9501;"><a href="#3-&#x4E50;&#x89C2;&#x9501;" class="headerlink" title="3.&#x4E50;&#x89C2;&#x9501;"></a>3.&#x4E50;&#x89C2;&#x9501;</h2><blockquote>
<p><strong>&#x4F5C;&#x7528;&#xFF1A;&#x5F53;&#x8981;&#x66F4;&#x65B0;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5E0C;&#x671B;&#x8FD9;&#x6761;&#x8BB0;&#x5F55;&#x6CA1;&#x6709;&#x88AB;&#x522B;&#x4EBA;&#x66F4;&#x65B0;</strong></p>
</blockquote>
<p>&#x4E50;&#x89C2;&#x9501;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#xFF1A;</p>
<ul>
<li>&#x53D6;&#x51FA;&#x8BB0;&#x5F55;&#x65F6;&#xFF0C;&#x83B7;&#x53D6;&#x5F53;&#x524D; version</li>
<li>&#x66F4;&#x65B0;&#x65F6;&#xFF0C;&#x5E26;&#x4E0A;&#x8FD9;&#x4E2A; version</li>
<li>&#x6267;&#x884C;&#x66F4;&#x65B0;&#x65F6;&#xFF0C; set version = newVersion where version = oldVersion</li>
<li>&#x5982;&#x679C; version &#x4E0D;&#x5BF9;&#xFF0C;&#x5C31;&#x66F4;&#x65B0;&#x5931;&#x8D25;</li>
</ul>
<h3 id="3-1&#x573A;&#x666F;"><a href="#3-1&#x573A;&#x666F;" class="headerlink" title="3.1	&#x573A;&#x666F;"></a>3.1	&#x573A;&#x666F;</h3><hr>
<ul>
<li>&#x4E00;&#x4EF6;&#x5546;&#x54C1;&#xFF0C;&#x6210;&#x672C;&#x4EF7;&#x662F;80&#x5143;&#xFF0C;&#x552E;&#x4EF7;&#x662F;100&#x5143;&#x3002;&#x8001;&#x677F;&#x5148;&#x662F;&#x901A;&#x77E5;&#x5C0F;&#x674E;&#xFF0C;&#x8BF4;&#x4F60;&#x53BB;&#x628A;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#x589E;&#x52A0;50&#x5143;&#x3002;&#x5C0F;&#x674E;&#x6B63;&#x5728;&#x73A9;&#x6E38;&#x620F;&#xFF0C;&#x803D;&#x6401;&#x4E86;&#x4E00;&#x4E2A;&#x5C0F;&#x65F6;&#x3002;&#x6B63;&#x597D;&#x4E00;&#x4E2A;&#x5C0F;&#x65F6;&#x540E;&#xFF0C;&#x8001;&#x677F;&#x89C9;&#x5F97;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#x589E;&#x52A0;&#x5230;150&#x5143;&#xFF0C;&#x4EF7;&#x683C;&#x592A;&#x9AD8;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5F71;&#x54CD;&#x9500;&#x91CF;&#x3002;&#x53C8;&#x901A;&#x77E5;&#x5C0F;&#x738B;&#xFF0C;&#x4F60;&#x628A;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#x964D;&#x4F4E;30&#x5143;&#x3002;</li>
<li>&#x6B64;&#x65F6;&#xFF0C;&#x5C0F;&#x674E;&#x548C;&#x5C0F;&#x738B;&#x540C;&#x65F6;&#x64CD;&#x4F5C;&#x5546;&#x54C1;&#x540E;&#x53F0;&#x7CFB;&#x7EDF;&#x3002;&#x5C0F;&#x674E;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7CFB;&#x7EDF;&#x5148;&#x53D6;&#x51FA;&#x5546;&#x54C1;&#x4EF7;&#x683C;100&#x5143;&#xFF1B;&#x5C0F;&#x738B;&#x4E5F;&#x5728;&#x64CD;&#x4F5C;&#xFF0C;&#x53D6;&#x51FA;&#x7684;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#x4E5F;&#x662F;100&#x5143;&#x3002;&#x5C0F;&#x674E;&#x5C06;&#x4EF7;&#x683C;&#x52A0;&#x4E86;50&#x5143;&#xFF0C;&#x5E76;&#x5C06;100+50=150&#x5143;&#x5B58;&#x5165;&#x4E86;&#x6570;&#x636E;&#x5E93;&#xFF1B;&#x5C0F;&#x738B;&#x5C06;&#x5546;&#x54C1;&#x51CF;&#x4E86;30&#x5143;&#xFF0C;&#x5E76;&#x5C06;100-30=70&#x5143;&#x5B58;&#x5165;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x3002;&#x662F;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x9501;&#xFF0C;&#x5C0F;&#x674E;&#x7684;&#x64CD;&#x4F5C;&#x5C31;&#x5B8C;&#x5168;&#x88AB;&#x5C0F;&#x738B;&#x7684;&#x8986;&#x76D6;&#x4E86;&#x3002;</li>
<li>&#x73B0;&#x5728;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#x662F;70&#x5143;&#xFF0C;&#x6BD4;&#x6210;&#x672C;&#x4EF7;&#x4F4E;10&#x5143;&#x3002;&#x51E0;&#x5206;&#x949F;&#x540E;&#xFF0C;&#x8FD9;&#x4E2A;&#x5546;&#x54C1;&#x5F88;&#x5FEB;&#x51FA;&#x552E;&#x4E86;1&#x5343;&#x591A;&#x4EF6;&#x5546;&#x54C1;&#xFF0C;&#x8001;&#x677F;&#x4E8F;1&#x4E07;&#x591A;&#x3002;</li>
</ul>
<h3 id="3-2&#x4E50;&#x89C2;&#x9501;&#x4E0E;&#x60B2;&#x89C2;&#x9501;"><a href="#3-2&#x4E50;&#x89C2;&#x9501;&#x4E0E;&#x60B2;&#x89C2;&#x9501;" class="headerlink" title="3.2	&#x4E50;&#x89C2;&#x9501;&#x4E0E;&#x60B2;&#x89C2;&#x9501;"></a>3.2	&#x4E50;&#x89C2;&#x9501;&#x4E0E;&#x60B2;&#x89C2;&#x9501;</h3><hr>
<ul>
<li>&#x4E0A;&#x9762;&#x7684;&#x6545;&#x4E8B;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x4E50;&#x89C2;&#x9501;&#xFF0C;&#x5C0F;&#x738B;&#x4FDD;&#x5B58;&#x4EF7;&#x683C;&#x524D;&#xFF0C;&#x4F1A;&#x68C0;&#x67E5;&#x4E0B;&#x4EF7;&#x683C;&#x662F;&#x5426;&#x88AB;&#x4EBA;&#x4FEE;&#x6539;&#x8FC7;&#x4E86;&#x3002;&#x5982;&#x679C;&#x88AB;&#x4FEE;&#x6539;&#x8FC7;&#x4E86;&#xFF0C;&#x5219;&#x91CD;&#x65B0;&#x53D6;&#x51FA;&#x7684;&#x88AB;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x4EF7;&#x683C;&#xFF0C;150&#x5143;&#xFF0C;&#x8FD9;&#x6837;&#x4ED6;&#x4F1A;&#x5C06;120&#x5143;&#x5B58;&#x5165;&#x6570;&#x636E;&#x5E93;&#x3002;</li>
<li>&#x5982;&#x679C;&#x662F;&#x60B2;&#x89C2;&#x9501;&#xFF0C;&#x5C0F;&#x674E;&#x53D6;&#x51FA;&#x6570;&#x636E;&#x540E;&#xFF0C;&#x5C0F;&#x738B;&#x53EA;&#x80FD;&#x7B49;&#x5C0F;&#x674E;&#x64CD;&#x4F5C;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x624D;&#x80FD;&#x5BF9;&#x4EF7;&#x683C;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x4E5F;&#x4F1A;&#x4FDD;&#x8BC1;&#x6700;&#x7EC8;&#x7684;&#x4EF7;&#x683C;&#x662F;120&#x5143;&#x3002;</li>
</ul>
<h3 id="3-3&#x6A21;&#x62DF;&#x4FEE;&#x6539;&#x51B2;&#x7A81;"><a href="#3-3&#x6A21;&#x62DF;&#x4FEE;&#x6539;&#x51B2;&#x7A81;" class="headerlink" title="3.3	&#x6A21;&#x62DF;&#x4FEE;&#x6539;&#x51B2;&#x7A81;"></a>3.3	&#x6A21;&#x62DF;&#x4FEE;&#x6539;&#x51B2;&#x7A81;</h3><hr>
<ul>
<li><p><strong>&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x589E;&#x52A0;&#x5546;&#x54C1;&#x8868;</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_product ( </span><br><span class="line">    id <span class="type">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&apos;&#x4E3B;&#x952E;ID&apos;</span>, </span><br><span class="line">    NAME <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&apos;&#x5546;&#x54C1;&#x540D;&#x79F0;&apos;</span>, </span><br><span class="line">    price <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&apos;&#x4EF7;&#x683C;&apos;</span>, </span><br><span class="line">    VERSION <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&apos;&#x4E50;&#x89C2;&#x9501;&#x7248;&#x672C;&#x53F7;&apos;</span>, </span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (id) </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x6DFB;&#x52A0;&#x4E00;&#x6761;&#x6570;&#x636E;</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_product (id, NAME, price) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&apos;&#x5916;&#x661F;&#x4EBA;&#x7B14;&#x8BB0;&#x672C;&apos;</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5B9E;&#x4F53;&#x7C7B;<code>Product</code></strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> {</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;Mapper&#x63A5;&#x53E3;<code>ProductMapper</code></strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProductMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Product&gt; {}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testProduct01</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//1.&#x5C0F;&#x674E;&#x83B7;&#x53D6;&#x5546;&#x54C1;&#x4EF7;&#x683C;</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">productLi</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x5C0F;&#x674E;&#x83B7;&#x53D6;&#x7684;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#x4E3A;&#xFF1A;&quot;</span> + productLi.getPrice());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.&#x5C0F;&#x738B;&#x83B7;&#x53D6;&#x5546;&#x54C1;&#x4EF7;&#x683C;</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">productWang</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x5C0F;&#x674E;&#x83B7;&#x53D6;&#x7684;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#x4E3A;&#xFF1A;&quot;</span> + productWang.getPrice());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.&#x5C0F;&#x674E;&#x4FEE;&#x6539;&#x5546;&#x54C1;&#x4EF7;&#x683C;+50</span></span><br><span class="line">    productLi.setPrice(productLi.getPrice()+<span class="number">50</span>);</span><br><span class="line">    productMapper.updateById(productLi);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.&#x5C0F;&#x738B;&#x4FEE;&#x6539;&#x5546;&#x54C1;&#x4EF7;&#x683C;-30</span></span><br><span class="line">    productWang.setPrice(productWang.getPrice()-<span class="number">30</span>);</span><br><span class="line">    productMapper.updateById(productWang);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5.&#x8001;&#x677F;&#x67E5;&#x8BE2;&#x5546;&#x54C1;&#x4EF7;&#x683C;</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">productBoss</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x8001;&#x677F;&#x83B7;&#x53D6;&#x7684;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#x4E3A;&#xFF1A;&quot;</span> + productBoss.getPrice());</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x6267;&#x884C;&#x7ED3;&#x679C;</strong></p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220521225803162.png" alt="image-20220521225803162"></p>
</li>
</ul>
<h3 id="3-4&#x4E50;&#x89C2;&#x9501;&#x89E3;&#x51B3;&#x95EE;&#x9898;"><a href="#3-4&#x4E50;&#x89C2;&#x9501;&#x89E3;&#x51B3;&#x95EE;&#x9898;" class="headerlink" title="3.4	&#x4E50;&#x89C2;&#x9501;&#x89E3;&#x51B3;&#x95EE;&#x9898;"></a>3.4	&#x4E50;&#x89C2;&#x9501;&#x89E3;&#x51B3;&#x95EE;&#x9898;</h3><hr>
<ul>
<li><p><strong>&#x5B9E;&#x4F53;&#x7C7B;<code>version</code>&#x5B57;&#x6BB5;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3;<code>@Version</code></strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> {</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="meta">@Version</span></span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x6DFB;&#x52A0;&#x4E50;&#x89C2;&#x9501;&#x63D2;&#x4EF6;&#x914D;&#x7F6E;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">    <span class="comment">//&#x6DFB;&#x52A0;&#x5206;&#x9875;&#x63D2;&#x4EF6;</span></span><br><span class="line">    interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">    <span class="comment">//&#x6DFB;&#x52A0;&#x4E50;&#x89C2;&#x9501;&#x63D2;&#x4EF6;</span></span><br><span class="line">    interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">OptimisticLockerInnerInterceptor</span>());</span><br><span class="line">    <span class="keyword">return</span> interceptor;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x518D;&#x6B21;&#x6267;&#x884C;&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;</strong></p>
<blockquote>
<p>&#x5C0F;&#x674E;&#x67E5;&#x8BE2;&#x5546;&#x54C1;&#x4FE1;&#x606F;&#xFF1A;</p>
<p>&#x200B;	SELECT id,name,price,version FROM t_product WHERE id=?</p>
<p>&#x5C0F;&#x738B;&#x67E5;&#x8BE2;&#x5546;&#x54C1;&#x4FE1;&#x606F;&#xFF1A;</p>
<p>&#x200B;	SELECT id,name,price,version FROM t_product WHERE id=?</p>
<p>&#x5C0F;&#x674E;&#x4FEE;&#x6539;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#xFF0C;&#x81EA;&#x52A8;&#x5C06;version+1</p>
<p>&#x200B;	UPDATE t_product SET name=?, price=?, version=? WHERE id=? AND version=?</p>
<p>&#x200B;	Parameters: &#x5916;&#x661F;&#x4EBA;&#x7B14;&#x8BB0;&#x672C;(String), 150(Integer), 1(Integer), 1(Long), 0(Integer)</p>
<p>&#x5C0F;&#x738B;&#x4FEE;&#x6539;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#xFF0C;&#x6B64;&#x65F6;version&#x5DF2;&#x66F4;&#x65B0;&#xFF0C;&#x6761;&#x4EF6;&#x4E0D;&#x6210;&#x7ACB;&#xFF0C;&#x4FEE;&#x6539;&#x5931;&#x8D25;</p>
<p>&#x200B;	UPDATE t_product SET name=?, price=?, version=? WHERE id=? AND version=?</p>
<p>&#x200B;	Parameters: &#x5916;&#x661F;&#x4EBA;&#x7B14;&#x8BB0;&#x672C;(String), 70(Integer), 1(Integer), 1(Long), 0(Integer)</p>
<p>&#x6700;&#x7EC8;&#xFF0C;&#x5C0F;&#x738B;&#x4FEE;&#x6539;&#x5931;&#x8D25;&#xFF0C;&#x67E5;&#x8BE2;&#x4EF7;&#x683C;&#xFF1A;150</p>
<p>&#x200B;	SELECT id,name,price,version FROM t_product WHERE id=?</p>
</blockquote>
</li>
<li><p><strong>&#x4F18;&#x5316;&#x6267;&#x884C;&#x6D41;&#x7A0B;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testProduct01</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">//1.&#x5C0F;&#x674E;&#x83B7;&#x53D6;&#x5546;&#x54C1;&#x4EF7;&#x683C;</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">productLi</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x5C0F;&#x674E;&#x83B7;&#x53D6;&#x7684;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#x4E3A;&#xFF1A;&quot;</span> + productLi.getPrice());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.&#x5C0F;&#x738B;&#x83B7;&#x53D6;&#x5546;&#x54C1;&#x4EF7;&#x683C;</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">productWang</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x5C0F;&#x674E;&#x83B7;&#x53D6;&#x7684;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#x4E3A;&#xFF1A;&quot;</span> + productWang.getPrice());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.&#x5C0F;&#x674E;&#x4FEE;&#x6539;&#x5546;&#x54C1;&#x4EF7;&#x683C;+50</span></span><br><span class="line">    productLi.setPrice(productLi.getPrice()+<span class="number">50</span>);</span><br><span class="line">    productMapper.updateById(productLi);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.&#x5C0F;&#x738B;&#x4FEE;&#x6539;&#x5546;&#x54C1;&#x4EF7;&#x683C;-30</span></span><br><span class="line">    productWang.setPrice(productWang.getPrice()-<span class="number">30</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> productMapper.updateById(productWang);</span><br><span class="line">    <span class="keyword">if</span>(result == <span class="number">0</span>){</span><br><span class="line">        <span class="comment">//&#x64CD;&#x4F5C;&#x5931;&#x8D25;&#xFF0C;&#x91CD;&#x8BD5;</span></span><br><span class="line">        <span class="type">Product</span> <span class="variable">productNew</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">        productNew.setPrice(productNew.getPrice()-<span class="number">30</span>);</span><br><span class="line">        productMapper.updateById(productNew);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5.&#x8001;&#x677F;&#x67E5;&#x8BE2;&#x5546;&#x54C1;&#x4EF7;&#x683C;</span></span><br><span class="line">    <span class="type">Product</span> <span class="variable">productBoss</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&#x8001;&#x677F;&#x83B7;&#x53D6;&#x7684;&#x5546;&#x54C1;&#x4EF7;&#x683C;&#x4E3A;&#xFF1A;&quot;</span> + productBoss.getPrice());</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220521230448577.png" alt="image-20220521230448577"></p>
</li>
</ul>
<h1 id="&#x4E03;&#x3001;&#x901A;&#x7528;&#x679A;&#x4E3E;"><a href="#&#x4E03;&#x3001;&#x901A;&#x7528;&#x679A;&#x4E3E;" class="headerlink" title="&#x4E03;&#x3001;&#x901A;&#x7528;&#x679A;&#x4E3E;"></a>&#x4E03;&#x3001;&#x901A;&#x7528;&#x679A;&#x4E3E;</h1><blockquote>
<p>&#x8868;&#x4E2D;&#x7684;&#x6709;&#x4E9B;&#x5B57;&#x6BB5;&#x503C;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x4F8B;&#x5982;&#x6027;&#x522B;&#xFF08;&#x7537;&#x6216;&#x5973;&#xFF09;&#xFF0C;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;MyBatis-Plus&#x7684;&#x901A;&#x7528;&#x679A;&#x4E3E;&#x6765;&#x5B9E;&#x73B0;</p>
</blockquote>
<ul>
<li><p><strong>&#x6570;&#x636E;&#x5E93;&#x8868;&#x6DFB;&#x52A0;&#x5B57;&#x6BB5;<code>sex</code></strong></p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220521231317777.png" alt="image-20220521231317777"></p>
</li>
<li><p><strong>&#x521B;&#x5EFA;&#x901A;&#x7528;&#x679A;&#x4E3E;&#x7C7B;&#x578B;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">SexEnum</span> {</span><br><span class="line">    MALE(<span class="number">1</span>, <span class="string">&quot;&#x7537;&quot;</span>),</span><br><span class="line">    FEMALE(<span class="number">2</span>, <span class="string">&quot;&#x5973;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@EnumValue</span> <span class="comment">//&#x5C06;&#x6CE8;&#x89E3;&#x6240;&#x6807;&#x8BC6;&#x7684;&#x5C5E;&#x6027;&#x7684;&#x503C;&#x5B58;&#x50A8;&#x5230;&#x6570;&#x636E;&#x5E93;&#x4E2D;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> sex;</span><br><span class="line">    <span class="keyword">private</span> String sexName;</span><br><span class="line"></span><br><span class="line">    SexEnum(Integer sex, String sexName) {</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">        <span class="built_in">this</span>.sexName = sexName;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>User&#x5B9E;&#x4F53;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x5C5E;&#x6027;sex</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> {</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@TableField(&quot;username&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableLogic</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> isDeleted;  <span class="comment">//&#x903B;&#x8F91;&#x5220;&#x9664;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SexEnum sex;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x914D;&#x7F6E;&#x626B;&#x63CF;&#x901A;&#x7528;&#x679A;&#x4E3E;</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#MyBatis-Plus&#x76F8;&#x5173;&#x914D;&#x7F6E;</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="comment">#&#x6307;&#x5B9A;mapper&#x6587;&#x4EF6;&#x6240;&#x5728;&#x7684;&#x5730;&#x5740;</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment">#&#x914D;&#x7F6E;&#x65E5;&#x5FD7;</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">banner:</span> <span class="string">off</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment">#&#x914D;&#x7F6E;mp&#x7684;&#x4E3B;&#x952E;&#x7B56;&#x7565;&#x4E3A;&#x81EA;&#x589E;</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line">      <span class="comment"># &#x8BBE;&#x7F6E;&#x5B9E;&#x4F53;&#x7C7B;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x8868;&#x7684;&#x7EDF;&#x4E00;&#x524D;&#x7F00;</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">t_</span></span><br><span class="line">  <span class="comment">#&#x914D;&#x7F6E;&#x7C7B;&#x578B;&#x522B;&#x540D;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x5305;</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.atguigu.mybatisplus.pojo</span></span><br><span class="line">  <span class="comment"># &#x626B;&#x63CF;&#x901A;&#x7528;&#x679A;&#x4E3E;&#x7684;&#x5305;</span></span><br><span class="line">  <span class="attr">type-enums-package:</span> <span class="string">com.atguigu.mybatisplus.enums</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x6267;&#x884C;&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setName(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">33</span>);</span><br><span class="line">    user.setSex(SexEnum.MALE);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.insert(user);</span><br><span class="line">    System.out.println(<span class="string">&quot;result:&quot;</span>+result);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="&#x516B;&#x3001;&#x591A;&#x6570;&#x636E;&#x6E90;"><a href="#&#x516B;&#x3001;&#x591A;&#x6570;&#x636E;&#x6E90;" class="headerlink" title="&#x516B;&#x3001;&#x591A;&#x6570;&#x636E;&#x6E90;"></a>&#x516B;&#x3001;&#x591A;&#x6570;&#x636E;&#x6E90;</h1><blockquote>
<p>&#x9002;&#x7528;&#x4E8E;&#x591A;&#x79CD;&#x573A;&#x666F;&#xFF1A;&#x7EAF;&#x7CB9;&#x591A;&#x5E93;&#x3001; &#x8BFB;&#x5199;&#x5206;&#x79BB;&#x3001; &#x4E00;&#x4E3B;&#x591A;&#x4ECE;&#x3001; &#x6DF7;&#x5408;&#x6A21;&#x5F0F;&#x7B49;</p>
</blockquote>
<p>&#x573A;&#x666F;&#x8BF4;&#x660E;&#xFF1A;</p>
<p>&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x5E93;&#xFF0C;&#x5206;&#x522B;&#x4E3A;&#xFF1A;<code>mybatis_plus</code>&#xFF08;&#x4EE5;&#x524D;&#x7684;&#x5E93;&#x4E0D;&#x52A8;&#xFF09;&#x4E0E;<code>mybatis_plus_1</code>&#xFF08;&#x65B0;&#x5EFA;&#xFF09;&#xFF0C;&#x5C06;mybatis_plus&#x5E93;&#x7684;<code>product</code>&#x8868;&#x79FB;&#x52A8;&#x5230;mybatis_plus_1&#x5E93;&#xFF0C;&#x8FD9;&#x6837;&#x6BCF;&#x4E2A;&#x5E93;&#x4E00;&#x5F20;&#x8868;&#xFF0C;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x5206;&#x522B;&#x83B7;&#x53D6;&#x7528;&#x6237;&#x6570;&#x636E;&#x4E0E;&#x5546;&#x54C1;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x679C;&#x83B7;&#x53D6;&#x5230;&#x8BF4;&#x660E;&#x591A;&#x5E93;&#x6A21;&#x62DF;&#x6210;&#x529F;</p>
<h2 id="1-&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x53CA;&#x8868;"><a href="#1-&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x53CA;&#x8868;" class="headerlink" title="1.&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x53CA;&#x8868;"></a>1.&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x53CA;&#x8868;</h2><ul>
<li><p><strong>&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;<code>mybatis_plus_1</code>&#x548C;&#x8868;`product</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE `mybatis_plus_1` <span class="comment">/*!40100 DEFAULT CHARACTER SET utf8mb4 */</span>;</span><br><span class="line">use `mybatis_plus_1`; </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> product ( </span><br><span class="line">    id <span class="type">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&apos;&#x4E3B;&#x952E;ID&apos;</span>, </span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&apos;&#x5546;&#x54C1;&#x540D;&#x79F0;&apos;</span>, </span><br><span class="line">    price <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&apos;&#x4EF7;&#x683C;&apos;</span>, </span><br><span class="line">    version <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&apos;&#x4E50;&#x89C2;&#x9501;&#x7248;&#x672C;&#x53F7;&apos;</span>, </span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (id) </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x6DFB;&#x52A0;&#x6D4B;&#x8BD5;&#x6570;&#x636E;</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> product (id, NAME, price) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&apos;&#x5916;&#x661F;&#x4EBA;&#x7B14;&#x8BB0;&#x672C;&apos;</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>&#x5220;&#x9664;<code>mybatis_plus</code>&#x5E93;&#x4E2D;&#x7684;<code>product</code>&#x8868;</strong> </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">use mybatis_plus; </span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> product;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-&#x65B0;&#x5EFA;&#x5DE5;&#x7A0B;&#x5F15;&#x5165;&#x4F9D;&#x8D56;"><a href="#2-&#x65B0;&#x5EFA;&#x5DE5;&#x7A0B;&#x5F15;&#x5165;&#x4F9D;&#x8D56;" class="headerlink" title="2.&#x65B0;&#x5EFA;&#x5DE5;&#x7A0B;&#x5F15;&#x5165;&#x4F9D;&#x8D56;"></a>2.&#x65B0;&#x5EFA;&#x5DE5;&#x7A0B;&#x5F15;&#x5165;&#x4F9D;&#x8D56;</h2><blockquote>
<p><strong>&#x81EA;&#x884C;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;Spring Boot&#x5DE5;&#x7A0B;&#x5E76;&#x9009;&#x62E9;MySQL&#x9A71;&#x52A8;&#x53CA;Lombok&#x4F9D;&#x8D56;</strong></p>
</blockquote>
<p><strong>&#x5F15;&#x5165;MyBaits-Plus&#x7684;&#x4F9D;&#x8D56;&#x53CA;&#x591A;&#x6570;&#x636E;&#x6E90;&#x7684;&#x4F9D;&#x8D56;</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="3-&#x7F16;&#x5199;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#3-&#x7F16;&#x5199;&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="3.&#x7F16;&#x5199;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>3.&#x7F16;&#x5199;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># &#x914D;&#x7F6E;&#x6570;&#x636E;&#x6E90;&#x4FE1;&#x606F;</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">dynamic:</span></span><br><span class="line">      <span class="comment"># &#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x7684;&#x6570;&#x636E;&#x6E90;&#x6216;&#x8005;&#x6570;&#x636E;&#x6E90;&#x7EC4;,&#x9ED8;&#x8BA4;&#x503C;&#x5373;&#x4E3A;master</span></span><br><span class="line">      <span class="attr">primary:</span> <span class="string">master</span></span><br><span class="line">      <span class="comment"># &#x4E25;&#x683C;&#x5339;&#x914D;&#x6570;&#x636E;&#x6E90;,&#x9ED8;&#x8BA4;false.true&#x672A;&#x5339;&#x914D;&#x5230;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x6E90;&#x65F6;&#x629B;&#x5F02;&#x5E38;,false&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x6570;&#x636E;&#x6E90;</span></span><br><span class="line">      <span class="attr">strict:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">datasource:</span></span><br><span class="line">        <span class="attr">master:</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">          <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">          <span class="attr">password:</span> <span class="number">132537</span></span><br><span class="line">        <span class="attr">slave_1:</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus_1?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">          <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">          <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">          <span class="attr">password:</span> <span class="number">132537</span></span><br></pre></td></tr></table></figure>



<h2 id="4-&#x521B;&#x5EFA;&#x5B9E;&#x4F53;&#x7C7B;"><a href="#4-&#x521B;&#x5EFA;&#x5B9E;&#x4F53;&#x7C7B;" class="headerlink" title="4.&#x521B;&#x5EFA;&#x5B9E;&#x4F53;&#x7C7B;"></a>4.&#x521B;&#x5EFA;&#x5B9E;&#x4F53;&#x7C7B;</h2><ul>
<li><p>&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;<code>User</code>&#x5B9E;&#x4F53;&#x7C7B;&#xFF08;&#x5982;&#x679C;&#x6570;&#x636E;&#x5E93;&#x8868;&#x540D;&#x6709;t_&#x524D;&#x7F00;&#x8BB0;&#x5F97;&#x914D;&#x7F6E;&#xFF09;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> {</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x5B9E;&#x4F53;&#x7C7B;<code>Product</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> {</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="5-&#x521B;&#x5EFA;Mapper&#x53CA;Service"><a href="#5-&#x521B;&#x5EFA;Mapper&#x53CA;Service" class="headerlink" title="5.&#x521B;&#x5EFA;Mapper&#x53CA;Service"></a>5.&#x521B;&#x5EFA;Mapper&#x53CA;Service</h2><ul>
<li><p>&#x65B0;&#x5EFA;&#x63A5;&#x53E3;<code>UserMapper</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; {}</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x65B0;&#x5EFA;&#x63A5;&#x53E3;<code>ProductMapper</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProductMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Product&gt; {}</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x65B0;&#x5EFA;Service&#x63A5;&#x53E3;<code>UserService</code>&#x6307;&#x5B9A;&#x64CD;&#x4F5C;&#x7684;&#x6570;&#x636E;&#x6E90;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@DS(&quot;master&quot;)</span> <span class="comment">//&#x6307;&#x5B9A;&#x64CD;&#x4F5C;&#x7684;&#x6570;&#x636E;&#x6E90;&#xFF0C;master&#x4E3A;user&#x8868;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; {}</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x65B0;&#x5EFA;Service&#x63A5;&#x53E3;<code>ProductService</code>&#x6307;&#x5B9A;&#x64CD;&#x4F5C;&#x7684;&#x6570;&#x636E;&#x6E90;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@DS(&quot;slave_1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ProductService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;Product&gt; {}</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x81EA;&#x884C;&#x5EFA;&#x7ACB;Service&#x7684;&#x5B9E;&#x73B0;&#x7C7B;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">...</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="6-&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;"><a href="#6-&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;" class="headerlink" title="6.&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;"></a>6.&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;</h2><blockquote>
<p><strong>&#x8BB0;&#x5F97;&#x5728;&#x542F;&#x52A8;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3;<code>@MapperScan()</code></strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TestDatasourceApplicationTests</span> {</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	UserService userService;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	ProductService productService;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> {</span><br><span class="line">		<span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(<span class="number">1L</span>);</span><br><span class="line">		<span class="type">Product</span> <span class="variable">product</span> <span class="operator">=</span> productService.getById(<span class="number">1L</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;User = &quot;</span> + user);</span><br><span class="line">		System.out.println(<span class="string">&quot;Product = &quot;</span> + product);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522113049945.png" alt="image-20220522113049945"></p>
<h1 id="&#x4E5D;&#x3001;MyBatisX&#x63D2;&#x4EF6;"><a href="#&#x4E5D;&#x3001;MyBatisX&#x63D2;&#x4EF6;" class="headerlink" title="&#x4E5D;&#x3001;MyBatisX&#x63D2;&#x4EF6;"></a>&#x4E5D;&#x3001;MyBatisX&#x63D2;&#x4EF6;</h1><blockquote>
<p>MyBatis-Plus&#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x5F3A;&#x5927;&#x7684;mapper&#x548C;service&#x6A21;&#x677F;&#xFF0C;&#x80FD;&#x591F;&#x5927;&#x5927;&#x7684;&#x63D0;&#x9AD8;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x5728;&#x771F;&#x6B63;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;MyBatis-Plus&#x5E76;&#x4E0D;&#x80FD;&#x4E3A;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x6240;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x4F8B;&#x5982;&#x4E00;&#x4E9B;&#x590D;&#x6742;&#x7684;SQL&#xFF0C;&#x591A;&#x8868;&#x8054;&#x67E5;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x53BB;&#x7F16;&#x5199;&#x4EE3;&#x7801;&#x548C;SQL&#x8BED;&#x53E5;&#xFF0C;&#x6211;&#x4EEC;&#x8BE5;&#x5982;&#x4F55;&#x5FEB;&#x901F;&#x7684;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5462;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;MyBatisX&#x63D2;&#x4EF6;&#x3002;</p>
<p>MyBatisX&#x4E00;&#x6B3E;&#x57FA;&#x4E8E; IDEA &#x7684;&#x5FEB;&#x901F;&#x5F00;&#x53D1;&#x63D2;&#x4EF6;&#xFF0C;&#x4E3A;&#x6548;&#x7387;&#x800C;&#x751F;&#x3002;</p>
</blockquote>
<h2 id="1-&#x5B89;&#x88C5;MyBatisX&#x63D2;&#x4EF6;"><a href="#1-&#x5B89;&#x88C5;MyBatisX&#x63D2;&#x4EF6;" class="headerlink" title="1.&#x5B89;&#x88C5;MyBatisX&#x63D2;&#x4EF6;"></a>1.&#x5B89;&#x88C5;MyBatisX&#x63D2;&#x4EF6;</h2><blockquote>
<p><strong>&#x6253;&#x5F00;IDEA&#xFF0C;File-&gt; Setteings-&gt;Plugins-&gt;MyBatisX&#xFF0C;&#x641C;&#x7D22;&#x680F;&#x641C;&#x7D22;MyBatisX&#x7136;&#x540E;&#x5B89;&#x88C5;&#x3002;</strong></p>
</blockquote>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522115718361.png" alt="image-20220522115718361"></p>
<h2 id="2-&#x5FEB;&#x901F;&#x751F;&#x6210;&#x4EE3;&#x7801;"><a href="#2-&#x5FEB;&#x901F;&#x751F;&#x6210;&#x4EE3;&#x7801;" class="headerlink" title="2.&#x5FEB;&#x901F;&#x751F;&#x6210;&#x4EE3;&#x7801;"></a>2.&#x5FEB;&#x901F;&#x751F;&#x6210;&#x4EE3;&#x7801;</h2><ul>
<li><p>&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;Spring Boot&#x9879;&#x76EE;&#x5F15;&#x5165;&#x4F9D;&#x8D56;&#xFF08;&#x521B;&#x5EFA;&#x5DE5;&#x7A0B;&#x65F6;&#x8BB0;&#x5F97;&#x52FE;&#x9009;lombok&#x53CA;mysql&#x9A71;&#x52A8;&#xFF09;</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x914D;&#x7F6E;&#x6570;&#x636E;&#x6E90;&#x4FE1;&#x606F;</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">132537</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x5728;IDEA&#x4E2D;&#x4E0E;&#x6570;&#x636E;&#x5E93;&#x5EFA;&#x7ACB;&#x94FE;&#x63A5;</p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522120758740.png" alt="image-20220522120758740"></p>
</li>
<li><p>&#x586B;&#x5199;&#x6570;&#x636E;&#x5E93;&#x4FE1;&#x606F;&#x5E76;&#x4FDD;&#x5B58;</p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522121434468.png" alt="image-20220522121434468"></p>
</li>
<li><p>&#x627E;&#x5230;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x751F;&#x6210;&#x7684;&#x8868;&#x70B9;&#x51FB;&#x53F3;&#x952E;</p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522121613909.png" alt="image-20220522121613909"></p>
</li>
<li><p>&#x586B;&#x5199;&#x5B8C;&#x4FE1;&#x606F;&#x4EE5;&#x540E;&#x4E0B;&#x4E00;&#x6B65;</p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522122127649.png" alt="image-20220522122127649"></p>
</li>
<li><p>&#x7EE7;&#x7EED;&#x586B;&#x5199;&#x4FE1;&#x606F;</p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522122525598.png" alt="image-20220522122525598"></p>
</li>
<li><p><strong>&#x5927;&#x529F;&#x544A;&#x6210;&#xFF08;&#x771F;&#x7279;&#x4E48;&#x597D;&#x7528;yyds&#xFF09;</strong></p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522122612334.png" alt="image-20220522122612334"></p>
</li>
</ul>
<h2 id="3-&#x5FEB;&#x901F;&#x751F;&#x6210;CRUD"><a href="#3-&#x5FEB;&#x901F;&#x751F;&#x6210;CRUD" class="headerlink" title="3.&#x5FEB;&#x901F;&#x751F;&#x6210;CRUD"></a>3.&#x5FEB;&#x901F;&#x751F;&#x6210;CRUD</h2><blockquote>
<p>MyBaitsX&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x6211;&#x4EEC;&#x5728;Mapper&#x63A5;&#x53E3;&#x4E2D;&#x8F93;&#x5165;&#x7684;&#x65B9;&#x6CD5;&#x540D;&#x5FEB;&#x901F;&#x5E2E;&#x6211;&#x4EEC;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684;sql&#x8BED;&#x53E5;</p>
</blockquote>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522123143852.png" alt="image-20220522123143852"></p>
<p><img src="https://image-bed-vz.oss-cn-hangzhou.aliyuncs.com/MyBatis-Plus/image-20220522123202310.png" alt="image-20220522123202310"></p>
]]></content>
      <categories>
        <category>mybatis</category>
      </categories>
      <tags>
        <tag>mybatis_plus</tag>
      </tags>
  </entry>
  <entry>
    <title>springboot引入druid后sql监控与防火墙失效</title>
    <url>/2023/02/03/druidconfig/</url>
    <content><![CDATA[<h2 id="&#x8BB0;&#x5F55;&#x4E00;&#x6B21;&#x914D;&#x7F6E;druid-yaml&#x4E2D;sql&#x76D1;&#x63A7;&#x4E0E;&#x9632;&#x706B;&#x5899;&#x5931;&#x6548;"><a href="#&#x8BB0;&#x5F55;&#x4E00;&#x6B21;&#x914D;&#x7F6E;druid-yaml&#x4E2D;sql&#x76D1;&#x63A7;&#x4E0E;&#x9632;&#x706B;&#x5899;&#x5931;&#x6548;" class="headerlink" title="&#x8BB0;&#x5F55;&#x4E00;&#x6B21;&#x914D;&#x7F6E;druid yaml&#x4E2D;sql&#x76D1;&#x63A7;&#x4E0E;&#x9632;&#x706B;&#x5899;&#x5931;&#x6548;"></a>&#x8BB0;&#x5F55;&#x4E00;&#x6B21;&#x914D;&#x7F6E;druid yaml&#x4E2D;sql&#x76D1;&#x63A7;&#x4E0E;&#x9632;&#x706B;&#x5899;&#x5931;&#x6548;</h2><h3 id="1&#xFF0C;&#x6B63;&#x5E38;&#x5F15;&#x5165;druid-starter&#x540E;yaml&#x4E2D;&#x914D;&#x7F6E;"><a href="#1&#xFF0C;&#x6B63;&#x5E38;&#x5F15;&#x5165;druid-starter&#x540E;yaml&#x4E2D;&#x914D;&#x7F6E;" class="headerlink" title="1&#xFF0C;&#x6B63;&#x5E38;&#x5F15;&#x5165;druid-starter&#x540E;yaml&#x4E2D;&#x914D;&#x7F6E;"></a>1&#xFF0C;&#x6B63;&#x5E38;&#x5F15;&#x5165;druid-starter&#x540E;yaml&#x4E2D;&#x914D;&#x7F6E;</h3><p>sql&#x76D1;&#x63A7;&#x4E0E;&#x9632;&#x706B;&#x5899;&#x662F;&#x4EE5;&#x4E0B;&#x65B9;&#x5F0F;</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/test</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123123</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">aop-patterns:</span> <span class="string">com.ren.admin.*</span></span><br><span class="line">      <span class="attr">filters:</span> <span class="string">wall,stat</span>  <span class="comment"># &#x6B64;&#x5904;&#x5F15;&#x5165;sql&#x76D1;&#x63A7;&#x4E0E;&#x9632;&#x706B;&#x5899;</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">stat-view-servlet:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">login-username:</span> <span class="number">123</span></span><br><span class="line">        <span class="attr">login-password:</span> <span class="number">123123</span></span><br><span class="line">        <span class="attr">reset-enable:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">web-stat-filter:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">url-pattern:</span> <span class="string">/*</span></span><br><span class="line">        <span class="attr">exclusions:</span> <span class="string">&apos;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&apos;</span></span><br><span class="line">        </span><br><span class="line">      <span class="comment"># &#x6B64;&#x5904;&#x8FDB;&#x884C;&#x8BE6;&#x7EC6;&#x914D;&#x7F6E;  </span></span><br><span class="line">      <span class="attr">filter:</span></span><br><span class="line">        <span class="attr">stat:</span></span><br><span class="line">          <span class="attr">log-slow-sql:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">slow-sql-millis:</span> <span class="number">1</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">wall:</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">config:</span></span><br><span class="line">          <span class="attr">drop-table-allow:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h3 id="2&#xFF0C;&#x542F;&#x52A8;&#x540E;&#x6267;&#x884C;sql&#x9632;&#x706B;&#x5899;&#x4E0E;sql&#x76D1;&#x63A7;&#x9875;&#x5747;&#x4E3A;&#x7A7A;&#x767D;"><a href="#2&#xFF0C;&#x542F;&#x52A8;&#x540E;&#x6267;&#x884C;sql&#x9632;&#x706B;&#x5899;&#x4E0E;sql&#x76D1;&#x63A7;&#x9875;&#x5747;&#x4E3A;&#x7A7A;&#x767D;" class="headerlink" title="2&#xFF0C;&#x542F;&#x52A8;&#x540E;&#x6267;&#x884C;sql&#x9632;&#x706B;&#x5899;&#x4E0E;sql&#x76D1;&#x63A7;&#x9875;&#x5747;&#x4E3A;&#x7A7A;&#x767D;"></a>2&#xFF0C;&#x542F;&#x52A8;&#x540E;&#x6267;&#x884C;sql&#x9632;&#x706B;&#x5899;&#x4E0E;sql&#x76D1;&#x63A7;&#x9875;&#x5747;&#x4E3A;&#x7A7A;&#x767D;</h3><img src="/2023/02/03/druidconfig/image-20230203184149173.png" alt="image-20230203184149173" style="zoom:40%;">

<img src="/2023/02/03/druidconfig/image-20230203184225319.png" alt="image-20230203184225319" style="zoom:36%;">

<h3 id="3&#xFF0C;&#x68C0;&#x67E5;&#x6570;&#x636E;&#x6E90;&#x540E;&#x53D1;&#x73B0;filter&#x7C7B;&#x540D;&#x4E3A;&#x7A7A;&#x7684;&#x73B0;&#x8C61;"><a href="#3&#xFF0C;&#x68C0;&#x67E5;&#x6570;&#x636E;&#x6E90;&#x540E;&#x53D1;&#x73B0;filter&#x7C7B;&#x540D;&#x4E3A;&#x7A7A;&#x7684;&#x73B0;&#x8C61;" class="headerlink" title="3&#xFF0C;&#x68C0;&#x67E5;&#x6570;&#x636E;&#x6E90;&#x540E;&#x53D1;&#x73B0;filter&#x7C7B;&#x540D;&#x4E3A;&#x7A7A;&#x7684;&#x73B0;&#x8C61;"></a>3&#xFF0C;&#x68C0;&#x67E5;&#x6570;&#x636E;&#x6E90;&#x540E;&#x53D1;&#x73B0;filter&#x7C7B;&#x540D;&#x4E3A;&#x7A7A;&#x7684;&#x73B0;&#x8C61;</h3><img src="/2023/02/03/druidconfig/image-20230203184342462.png" alt="image-20230203184342462" style="zoom:37%;">

<h3 id="4&#xFF0C;&#x89E3;&#x51B3;&#x65B9;&#x6848;"><a href="#4&#xFF0C;&#x89E3;&#x51B3;&#x65B9;&#x6848;" class="headerlink" title="4&#xFF0C;&#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>4&#xFF0C;&#x89E3;&#x51B3;&#x65B9;&#x6848;</h3><p>&#x5C06;yaml&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;filters&#x79FB;&#x5230;datasource&#x4E0B;</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/test</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123123</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">filters:</span> <span class="string">wall,stat</span></span><br><span class="line">    <span class="attr">filter:</span></span><br><span class="line">      <span class="attr">stat:</span></span><br><span class="line">        <span class="attr">log-slow-sql:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">slow-sql-millis:</span> <span class="number">1</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">wall:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">config:</span></span><br><span class="line">          <span class="attr">drop-table-allow:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">aop-patterns:</span> <span class="string">com.ren.admin.*</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">stat-view-servlet:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">login-username:</span> <span class="number">123</span></span><br><span class="line">        <span class="attr">login-password:</span> <span class="number">123123</span></span><br><span class="line">        <span class="attr">reset-enable:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">web-stat-filter:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">url-pattern:</span> <span class="string">/*</span></span><br><span class="line">        <span class="attr">exclusions:</span> <span class="string">&apos;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&apos;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5&#xFF0C;&#x6210;&#x529F;&#x89E3;&#x51B3;&#x95EE;&#x9898;"><a href="#5&#xFF0C;&#x6210;&#x529F;&#x89E3;&#x51B3;&#x95EE;&#x9898;" class="headerlink" title="5&#xFF0C;&#x6210;&#x529F;&#x89E3;&#x51B3;&#x95EE;&#x9898;"></a>5&#xFF0C;&#x6210;&#x529F;&#x89E3;&#x51B3;&#x95EE;&#x9898;</h3><img src="/2023/02/03/druidconfig/image-20230203184637278.png" alt="image-20230203184637278" style="zoom:33%;">
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
        <tag>后端</tag>
      </tags>
  </entry>
  <entry>
    <title>文件上传</title>
    <url>/2023/01/28/FileUp/</url>
    <content><![CDATA[<h3 id="1&#xFF0C;&#x9875;&#x9762;&#x8868;&#x5355;"><a href="#1&#xFF0C;&#x9875;&#x9762;&#x8868;&#x5355;" class="headerlink" title="1&#xFF0C;&#x9875;&#x9762;&#x8868;&#x5355;"></a>1&#xFF0C;&#x9875;&#x9762;&#x8868;&#x5355;</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">role</span>=<span class="string">&quot;form&quot;</span> <span class="attr">th:action</span>=<span class="string">&quot;@{/upload}&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span>  <span class="comment">&lt;!-- &#x4E66;&#x5199;enctype&#x8868;&#x793A;&#x6B64;&#x8868;&#x5355;&#x4E3A;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x8868;&#x5355; --&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputEmail1&quot;</span>&gt;</span>Email address<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleInputEmail1&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Enter email&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleUsername&quot;</span>&gt;</span>&#x59D3;&#x540D;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleUsername&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputFile&quot;</span>&gt;</span>&#x5934;&#x50CF;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;headerImg&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleInputFile&quot;</span>&gt;</span>   <span class="comment">&lt;!-- &#x6B64;&#x65F6;&#x4E3A;&#x5355;&#x6587;&#x4EF6;&#x4E0A;&#x4F20; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputPhotos&quot;</span>&gt;</span>&#x751F;&#x6D3B;&#x7167;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;photos&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleInputPhotos&quot;</span> <span class="attr">multiple</span>&gt;</span>  <span class="comment">&lt;!-- &#x52A0;&#x4E0A;multiple&#x540E;&#xFF0C;&#x6B64;&#x65F6;&#x4E3A;&#x591A;&#x6587;&#x4EF6;&#x4E0A;&#x4F20; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>

<h3 id="2&#xFF0C;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4EE3;&#x7801;-&#x5C06;&#x524D;&#x53F0;&#x4F20;&#x8FC7;&#x6765;&#x7684;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x5728;&#x670D;&#x52A1;&#x5668;&#x672C;&#x5730;"><a href="#2&#xFF0C;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4EE3;&#x7801;-&#x5C06;&#x524D;&#x53F0;&#x4F20;&#x8FC7;&#x6765;&#x7684;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x5728;&#x670D;&#x52A1;&#x5668;&#x672C;&#x5730;" class="headerlink" title="2&#xFF0C;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4EE3;&#x7801;(&#x5C06;&#x524D;&#x53F0;&#x4F20;&#x8FC7;&#x6765;&#x7684;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x5728;&#x670D;&#x52A1;&#x5668;&#x672C;&#x5730;)"></a>2&#xFF0C;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x4EE3;&#x7801;(&#x5C06;&#x524D;&#x53F0;&#x4F20;&#x8FC7;&#x6765;&#x7684;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x5728;&#x670D;&#x52A1;&#x5668;&#x672C;&#x5730;)</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// MultipartFile &#x81EA;&#x52A8;&#x5C01;&#x88C5;&#x4E0A;&#x4F20;&#x8FC7;&#x6765;&#x7684;&#x6587;&#x4EF6;</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">upLoad</span><span class="params">(<span class="meta">@RequestParam(&quot;email&quot;)</span> String email,</span></span><br><span class="line"><span class="params">                     <span class="meta">@RequestParam(&quot;username&quot;)</span> String username,</span></span><br><span class="line"><span class="params">                     <span class="meta">@RequestPart(&quot;headerImg&quot;)</span> MultipartFile headerImg,  // &#x4F7F;&#x7528; <span class="meta">@RequestPart</span> &#x5BF9;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#x6CE8;&#x89E3;</span></span><br><span class="line"><span class="params">                     <span class="meta">@RequestPart(&quot;photos&quot;)</span> MultipartFile[] photos)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">/* &#x6CE8;&#x610F;&#x5728;application.properties&#x4E2D;&#x914D;&#x7F6E;&#x6700;&#x5927;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#xFF0C;&#x907F;&#x514D;&#x4E0A;&#x4F20;&#x5931;&#x8D25; */</span></span><br><span class="line">    log.info(<span class="string">&quot;&#x4E0A;&#x4F20;&#x7684;&#x4FE1;&#x606F;&#xFF1A;email={}, username={}. headerImg={}, photos={}&quot;</span>,</span><br><span class="line">            email, username, headerImg.getSize(), photos.length);</span><br><span class="line">    <span class="comment">// &#x5982;&#x679C;&#x6587;&#x4EF6;&#x4E0D;&#x4E3A;&#x7A7A;</span></span><br><span class="line">    <span class="keyword">if</span>(!headerImg.isEmpty()){</span><br><span class="line">        <span class="comment">// &#x4FDD;&#x5B58;&#x5230;&#x6587;&#x4EF6;&#x670D;&#x52A1;&#x5668;&#xFF0C;OSS&#x670D;&#x52A1;&#x5668;</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> headerImg.getOriginalFilename();<span class="comment">// &#x539F;&#x59CB;&#x7684;&#x6587;&#x4EF6;&#x540D;</span></span><br><span class="line">        headerImg.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\RenComp\\ehcache\\upload\\&quot;</span>+originalFilename));  <span class="comment">// &#x5229;&#x7528;transferTo&#x5C06;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x5728;&#x5BF9;&#x5E94;&#x8DEF;&#x5F84;</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (photos.length &gt; <span class="number">0</span>){</span><br><span class="line">        <span class="comment">// &#x904D;&#x5386;&#x6587;&#x4EF6;&#xFF0C;&#x5BF9;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x4FDD;&#x5B58;</span></span><br><span class="line">        <span class="keyword">for</span> (MultipartFile photo : photos) {</span><br><span class="line">            <span class="keyword">if</span> (!photo.isEmpty()){</span><br><span class="line">                <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> photo.getOriginalFilename();</span><br><span class="line">                photo.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\RenComp\\ehcache\\upload\\&quot;</span>+originalFilename));</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/index.html&quot;</span>;  <span class="comment">// &#x4ECE;post&#x9700;&#x8981;&#x91CD;&#x5B9A;&#x5411;&#x5230;index.html &#x5426;&#x5219;&#x4F1A;&#x56E0;&#x4E3A;&#x5730;&#x5740;&#x680F;&#x7684;/upload&#x62A5;&#x9519;&#x4E0D;&#x652F;&#x6301;GET&#x65B9;&#x5F0F;&#x8BF7;&#x6C42;</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><br><img src="/2023/01/28/FileUp/uppt.png" style="zoom:80%;"></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>后端</tag>
        <tag>Java</tag>
        <tag>Html</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot登录拦截器配置</title>
    <url>/2023/01/28/LoginInterceptor/</url>
    <content><![CDATA[<h4 id="1&#xFF0C;&#x62E6;&#x622A;&#x5668;"><a href="#1&#xFF0C;&#x62E6;&#x622A;&#x5668;" class="headerlink" title="1&#xFF0C;&#x62E6;&#x622A;&#x5668;"></a>1&#xFF0C;&#x62E6;&#x622A;&#x5668;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="comment">// &#x68C0;&#x67E5;&#x767B;&#x5F55;&#x903B;&#x8F91;</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">loginUser</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;loginUser&quot;</span>);  <span class="comment">// &#x901A;&#x8FC7;session&#x5C5E;&#x6027;&#x7684;loginUser&#x8FDB;&#x884C;&#x5224;&#x65AD;&#x662F;&#x5426;&#x767B;&#x5F55;</span></span><br><span class="line">        <span class="keyword">if</span> (loginUser != <span class="literal">null</span>){</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        }<span class="keyword">else</span> {</span><br><span class="line">            request.setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;&#x8BF7;&#x767B;&#x9646;&#x540E;&#x8BBF;&#x95EE;&quot;</span>);</span><br><span class="line">            <span class="comment">// response.sendRedirect(&quot;/login&quot;); </span></span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;/login&quot;</span>).forward(request,response); <span class="comment">// &#x4F7F;&#x7528;&#x91CD;&#x5B9A;&#x5411;&#x643A;&#x5E26;req res&#x8FDB;&#x884C;&#x8DF3;&#x8F6C;</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="2&#xFF0C;&#x6CE8;&#x518C;&#x62E6;&#x622A;&#x5668;"><a href="#2&#xFF0C;&#x6CE8;&#x518C;&#x62E6;&#x622A;&#x5668;" class="headerlink" title="2&#xFF0C;&#x6CE8;&#x518C;&#x62E6;&#x622A;&#x5668;"></a>2&#xFF0C;&#x6CE8;&#x518C;&#x62E6;&#x622A;&#x5668;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x5C06;&#x7C7B;&#x8868;&#x793A;&#x4E3A;&#x914D;&#x7F6E;&#x7C7B;</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// &#x5F00;&#x542F;mvc&#x7684;&#x6CE8;&#x89E3;&#x9A71;&#x52A8;</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> {</span><br><span class="line">    <span class="comment">// &#x62E6;&#x622A;&#x5668;  &#x62E6;&#x622A;&#x6240;&#x6709;&#x8DEF;&#x5F84;&#xFF0C;&#x653E;&#x884C;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x4E0E;&#x767B;&#x5F55;&#x9875;&#xFF0C;&#x9519;&#x8BEF;&#x9875;</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> {</span><br><span class="line">        <span class="type">LoginInterceptor</span> <span class="variable">loginInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LoginInterceptor</span>();</span><br><span class="line">        <span class="type">InterceptorRegistration</span> <span class="variable">ir</span> <span class="operator">=</span> registry.addInterceptor(loginInterceptor);</span><br><span class="line">        ir.addPathPatterns(<span class="string">&quot;/**&quot;</span>);  </span><br><span class="line">        ir.excludePathPatterns(<span class="string">&quot;/login&quot;</span>,<span class="string">&quot;/js/**&quot;</span>,<span class="string">&quot;/css/**&quot;</span>,<span class="string">&quot;/images/**&quot;</span>,<span class="string">&quot;/fonts/**&quot;</span>,<span class="string">&quot;/html/**&quot;</span>,<span class="string">&quot;/error&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="3&#xFF0C;Controller&#x4E2D;&#x914D;&#x7F6E;&#x8BBF;&#x95EE;&#x767B;&#x5F55;&#x9875;&#x7684;&#x8DEF;&#x5F84;&#x53CA;&#x65B9;&#x6CD5;"><a href="#3&#xFF0C;Controller&#x4E2D;&#x914D;&#x7F6E;&#x8BBF;&#x95EE;&#x767B;&#x5F55;&#x9875;&#x7684;&#x8DEF;&#x5F84;&#x53CA;&#x65B9;&#x6CD5;" class="headerlink" title="3&#xFF0C;Controller&#x4E2D;&#x914D;&#x7F6E;&#x8BBF;&#x95EE;&#x767B;&#x5F55;&#x9875;&#x7684;&#x8DEF;&#x5F84;&#x53CA;&#x65B9;&#x6CD5;"></a>3&#xFF0C;Controller&#x4E2D;&#x914D;&#x7F6E;&#x8BBF;&#x95EE;&#x767B;&#x5F55;&#x9875;&#x7684;&#x8DEF;&#x5F84;&#x53CA;&#x65B9;&#x6CD5;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * &#x6765;&#x767B;&#x5F55;&#x9875;</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> login</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@GetMapping(value = {&quot;/login&quot;,&quot;/&quot;})</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">loginPage</span><span class="params">(HttpSession session)</span>{</span><br><span class="line">      <span class="comment">// &#x518D;&#x6B21;&#x8BBF;&#x95EE;login&#x9875;&#x9762;&#x5373;&#x89C6;&#x4E3A;&#x9000;&#x51FA;&#x767B;&#x5F55;</span></span><br><span class="line">      session.setAttribute(<span class="string">&quot;loginUser&quot;</span>,<span class="literal">null</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">  }</span><br></pre></td></tr></table></figure>

<h4 id="4&#xFF0C;&#x82E5;&#x6B64;&#x65F6;&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x767B;&#x5F55;&#x62E6;&#x622A;&#x5668;&#x751F;&#x6548;&#xFF0C;&#x4F46;&#x653E;&#x884C;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x4ECD;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x5230;&#xFF0C;&#x5728;WebConfig&#x4E2D;&#x914D;&#x7F6E;"><a href="#4&#xFF0C;&#x82E5;&#x6B64;&#x65F6;&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x767B;&#x5F55;&#x62E6;&#x622A;&#x5668;&#x751F;&#x6548;&#xFF0C;&#x4F46;&#x653E;&#x884C;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x4ECD;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x5230;&#xFF0C;&#x5728;WebConfig&#x4E2D;&#x914D;&#x7F6E;" class="headerlink" title="4&#xFF0C;&#x82E5;&#x6B64;&#x65F6;&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x767B;&#x5F55;&#x62E6;&#x622A;&#x5668;&#x751F;&#x6548;&#xFF0C;&#x4F46;&#x653E;&#x884C;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x4ECD;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x5230;&#xFF0C;&#x5728;WebConfig&#x4E2D;&#x914D;&#x7F6E;"></a>4&#xFF0C;&#x82E5;&#x6B64;&#x65F6;&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x767B;&#x5F55;&#x62E6;&#x622A;&#x5668;&#x751F;&#x6548;&#xFF0C;&#x4F46;&#x653E;&#x884C;&#x7684;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x4ECD;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x5230;&#xFF0C;&#x5728;WebConfig&#x4E2D;&#x914D;&#x7F6E;</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] CLASSPATH_RESOURCE_LOCATIONS = {</span><br><span class="line">        <span class="string">&quot;classpath:/META-INF/resources/&quot;</span>, <span class="string">&quot;classpath:/resources/&quot;</span>,</span><br><span class="line">        <span class="string">&quot;classpath:/static/&quot;</span>, <span class="string">&quot;classpath:/public/&quot;</span> };</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> {</span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">&quot;/webjars/**&quot;</span>)) {</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/webjars/**&quot;</span>).addResourceLocations(</span><br><span class="line">                <span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">&quot;/**&quot;</span>)) {</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/**&quot;</span>).addResourceLocations(</span><br><span class="line">                CLASSPATH_RESOURCE_LOCATIONS);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h5 id="&#x5B8C;&#x6574;&#x7684;&#x62E6;&#x622A;&#x5668;&#x6CE8;&#x518C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#&#x5B8C;&#x6574;&#x7684;&#x62E6;&#x622A;&#x5668;&#x6CE8;&#x518C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="&#x5B8C;&#x6574;&#x7684;&#x62E6;&#x622A;&#x5668;&#x6CE8;&#x518C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>&#x5B8C;&#x6574;&#x7684;&#x62E6;&#x622A;&#x5668;&#x6CE8;&#x518C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &#x5C06;&#x7C7B;&#x8868;&#x793A;&#x4E3A;&#x914D;&#x7F6E;&#x7C7B;</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// &#x5F00;&#x542F;mvc&#x7684;&#x6CE8;&#x89E3;&#x9A71;&#x52A8;</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x62E6;&#x622A;&#x5668;</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> {</span><br><span class="line">        <span class="type">LoginInterceptor</span> <span class="variable">loginInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LoginInterceptor</span>();</span><br><span class="line">        <span class="type">InterceptorRegistration</span> <span class="variable">ir</span> <span class="operator">=</span> registry.addInterceptor(loginInterceptor);</span><br><span class="line">        ir.addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">        ir.excludePathPatterns(<span class="string">&quot;/login&quot;</span>,<span class="string">&quot;/js/**&quot;</span>,<span class="string">&quot;/css/**&quot;</span>,<span class="string">&quot;/images/**&quot;</span>,<span class="string">&quot;/fonts/**&quot;</span>,<span class="string">&quot;/html/**&quot;</span>,<span class="string">&quot;/error&quot;</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x5F02;&#x5E38;&#x89E3;&#x6790;&#x5668;</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureHandlerExceptionResolvers</span><span class="params">(List&lt;HandlerExceptionResolver&gt; resolvers)</span> {</span><br><span class="line">        <span class="type">SimpleMappingExceptionResolver</span> <span class="variable">exceptionResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMappingExceptionResolver</span>();</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        prop.setProperty(<span class="string">&quot;java.lang.ArithmeticException&quot;</span>, <span class="string">&quot;error&quot;</span>);</span><br><span class="line">        exceptionResolver.setExceptionAttribute(<span class="string">&quot;ex&quot;</span>);</span><br><span class="line">        resolvers.add(exceptionResolver);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] CLASSPATH_RESOURCE_LOCATIONS = {</span><br><span class="line">            <span class="string">&quot;classpath:/META-INF/resources/&quot;</span>, <span class="string">&quot;classpath:/resources/&quot;</span>,</span><br><span class="line">            <span class="string">&quot;classpath:/static/&quot;</span>, <span class="string">&quot;classpath:/public/&quot;</span> };</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> {</span><br><span class="line">        <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">&quot;/webjars/**&quot;</span>)) {</span><br><span class="line">            registry.addResourceHandler(<span class="string">&quot;/webjars/**&quot;</span>).addResourceLocations(</span><br><span class="line">                    <span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">&quot;/**&quot;</span>)) {</span><br><span class="line">            registry.addResourceHandler(<span class="string">&quot;/**&quot;</span>).addResourceLocations(</span><br><span class="line">                    CLASSPATH_RESOURCE_LOCATIONS);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
        <tag>后端</tag>
        <tag>Java</tag>
        <tag>开发技巧</tag>
      </tags>
  </entry>
  <entry>
    <title>thymeleaf模板抽取</title>
    <url>/2023/01/26/thymeleafskills/</url>
    <content><![CDATA[<p><strong>&#x5F53;&#x4F7F;&#x7528;</strong> <strong>th:fragment</strong> <strong>&#x65F6;</strong></p>
<p>&#x516C;&#x5171;&#x6A21;&#x677F;&#x4E2D;&#xFF1A;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;footer th:fragment=<span class="string">&quot;copy&quot;</span>&gt;      </span><br><span class="line">    footer&#x4E2D;&#x7684;&#x516C;&#x5171;&#x5185;&#x5BB9; </span><br><span class="line">&lt;/footer&gt;</span><br><span class="line">      </span><br><span class="line">&lt;footer id=<span class="string">&quot;copysection&quot;</span>&gt;   </span><br><span class="line">    footer&#x4E2D;&#x7684;&#x516C;&#x5171;&#x5185;&#x5BB9; </span><br><span class="line">&lt;/footer&gt;  </span><br></pre></td></tr></table></figure>

<p>&#x4F7F;&#x7528;&#x516C;&#x5171;&#x6A21;&#x677F;&#x7684;&#x9875;&#x9762;&#x4E2D;&#xFF1A;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">. . .</span><br><span class="line"></span><br><span class="line">&lt;div th:insert=<span class="string">&quot;footer :: copy&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div th:replace=<span class="string">&quot;footer :: copy&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div th:include=<span class="string">&quot;footer :: copy&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div th:ins../rep../inc=<span class="string">&quot;footer :: #copysection&quot;</span>&gt;&lt;/div&gt;  &lt;!-- &#x6B64;&#x5904;&#x8981;&#x4F7F;&#x7528;#&#x8FDB;&#x884C;&#x9009;&#x62E9; --&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt; </span><br></pre></td></tr></table></figure>

<p>&#x4F7F;&#x7528;&#x516C;&#x5171;&#x6A21;&#x677F;&#x7684;&#x9875;&#x9762;&#x7684;&#x6548;&#x679C;&#xFF1A;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">. . .</span><br><span class="line"></span><br><span class="line">&lt;!-- th:insert=<span class="string">&quot;footer :: copy&quot;</span> --&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">   &lt;footer&gt; </span><br><span class="line">      footer&#x4E2D;&#x7684;&#x516C;&#x5171;&#x5185;&#x5BB9;</span><br><span class="line">   &lt;/footer&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- th:replace=<span class="string">&quot;footer :: copy&quot;</span> --&gt;</span><br><span class="line">&lt;footer&gt; </span><br><span class="line">  footer&#x4E2D;&#x7684;&#x516C;&#x5171;&#x5185;&#x5BB9;</span><br><span class="line">&lt;/footer&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- th:include=<span class="string">&quot;footer :: copy&quot;</span> --&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">  footer&#x4E2D;&#x7684;&#x516C;&#x5171;&#x5185;&#x5BB9;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt; </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>  <strong>&#x1F50D;</strong>  <strong>th:insert</strong> <strong>&#x76F8;&#x5F53;&#x4E8E;&#x5C06;&#x516C;&#x5171;&#x6A21;&#x677F;&#x8FDE;&#x5E26;&#x516C;&#x5171;&#x6807;&#x7B7E;&#x63D2;&#x5165;&#x65B0;&#x6807;&#x7B7E;&#x4E2D;&#xFF0C;&#x6B64;&#x8FC7;&#x7A0B;&#x4FDD;&#x7559;&#x65B0;&#x6807;&#x7B7E;</strong>  </p>
<p>  <strong>&#x1F50D;</strong>  <strong>th:replace</strong> <strong>&#x76F8;&#x5F53;&#x4E8E;&#x7528;&#x516C;&#x5171;&#x6A21;&#x677F;&#x8FDE;&#x5E26;&#x6807;&#x7B7E;&#x66FF;&#x6362;&#x65B0;&#x6807;&#x7B7E;&#xFF0C;&#x4E0D;&#x4FDD;&#x7559;&#x65B0;&#x6807;&#x7B7E;</strong>  </p>
<p>  <strong>&#x1F50D;</strong>  <strong>th:include</strong> <strong>&#x76F8;&#x5F53;&#x4E8E;&#x5C06;&#x516C;&#x5171;&#x6A21;&#x677F;&#x6807;&#x7B7E;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x63D2;&#x5165;&#x65B0;&#x6807;&#x7B7E;&#xFF0C;&#x4E0D;&#x4FDD;&#x7559;&#x65E7;&#x6807;&#x7B7E;</strong></p>
]]></content>
      <categories>
        <category>thymeleaf</category>
      </categories>
      <tags>
        <tag>开发技巧</tag>
        <tag>thymeleaf</tag>
        <tag>前端</tag>
      </tags>
  </entry>
  <entry>
    <title>送东阳马生序</title>
    <url>/2023/01/25/first-blog/</url>
    <content><![CDATA[<h3 id="&#x9001;&#x4E1C;&#x9633;&#x9A6C;&#x751F;&#x5E8F;"><a href="#&#x9001;&#x4E1C;&#x9633;&#x9A6C;&#x751F;&#x5E8F;" class="headerlink" title="&#x9001;&#x4E1C;&#x9633;&#x9A6C;&#x751F;&#x5E8F;"></a><p style="text-align: center">&#x9001;&#x4E1C;&#x9633;&#x9A6C;&#x751F;&#x5E8F;</p></h3><h5 id="&#x5B8B;&#x6FC2;-&#x3014;&#x660E;&#x4EE3;&#x3015;"><a href="#&#x5B8B;&#x6FC2;-&#x3014;&#x660E;&#x4EE3;&#x3015;" class="headerlink" title="&#x5B8B;&#x6FC2; &#x3014;&#x660E;&#x4EE3;&#x3015;"></a><p style="text-align: center">&#x5B8B;&#x6FC2; &#x3014;&#x660E;&#x4EE3;&#x3015;</p></h5><h4 id="&#x4F59;&#x5E7C;&#x65F6;&#x5373;&#x55DC;&#x5B66;&#x3002;&#x5BB6;&#x8D2B;&#xFF0C;&#x65E0;&#x4ECE;&#x81F4;&#x4E66;&#x4EE5;&#x89C2;&#xFF0C;&#x6BCF;&#x5047;&#x501F;&#x4E8E;&#x85CF;&#x4E66;&#x4E4B;&#x5BB6;&#xFF0C;&#x624B;&#x81EA;&#x7B14;&#x5F55;&#xFF0C;&#x8BA1;&#x65E5;&#x4EE5;&#x8FD8;&#x3002;&#x5929;&#x5927;&#x5BD2;&#xFF0C;&#x781A;&#x51B0;&#x575A;&#xFF0C;&#x624B;&#x6307;&#x4E0D;&#x53EF;&#x5C48;&#x4F38;&#xFF0C;&#x5F17;&#x4E4B;&#x6020;&#x3002;&#x5F55;&#x6BD5;&#xFF0C;&#x8D70;&#x9001;&#x4E4B;&#xFF0C;&#x4E0D;&#x6562;&#x7A0D;&#x903E;&#x7EA6;&#x3002;&#x4EE5;&#x662F;&#x4EBA;&#x591A;&#x4EE5;&#x4E66;&#x5047;&#x4F59;&#xFF0C;&#x4F59;&#x56E0;&#x5F97;&#x904D;&#x89C2;&#x7FA4;&#x4E66;&#x3002;&#x65E2;&#x52A0;&#x51A0;&#xFF0C;&#x76CA;&#x6155;&#x5723;&#x8D24;&#x4E4B;&#x9053;-&#x3002;&#x53C8;&#x60A3;&#x65E0;&#x7855;&#x5E08;&#x540D;&#x4EBA;&#x4E0E;&#x6E38;&#xFF0C;&#x5C1D;&#x8D8B;&#x767E;&#x91CC;&#x5916;&#xFF0C;&#x4ECE;&#x4E61;&#x4E4B;&#x5148;&#x8FBE;&#x6267;&#x7ECF;&#x53E9;&#x95EE;&#x3002;&#x5148;&#x8FBE;&#x5FB7;&#x9686;&#x671B;&#x5C0A;&#xFF0C;&#x95E8;&#x4EBA;&#x5F1F;&#x5B50;&#x586B;&#x5176;&#x5BA4;&#xFF0C;&#x672A;&#x5C1D;&#x7A0D;&#x964D;&#x8F9E;&#x8272;&#x3002;&#x4F59;&#x7ACB;&#x4F8D;&#x5DE6;&#x53F3;&#xFF0C;&#x63F4;&#x7591;&#x8D28;&#x7406;&#xFF0C;&#x4FEF;&#x8EAB;&#x503E;&#x8033;&#x4EE5;&#x8BF7;&#xFF1B;&#x6216;&#x9047;&#x5176;&#x53F1;&#x5484;&#xFF0C;&#x8272;&#x6108;&#x606D;&#xFF0C;&#x793C;&#x6108;&#x81F3;&#xFF0C;&#x4E0D;&#x6562;&#x51FA;&#x4E00;&#x8A00;&#x4EE5;&#x590D;&#xFF1B;&#x4FDF;&#x5176;&#x6B23;&#x60A6;&#xFF0C;&#x5219;&#x53C8;&#x8BF7;&#x7109;&#x3002;&#x6545;&#x4F59;&#x867D;&#x611A;&#xFF0C;&#x5352;&#x83B7;&#x6709;&#x6240;&#x95FB;&#x3002;"><a href="#&#x4F59;&#x5E7C;&#x65F6;&#x5373;&#x55DC;&#x5B66;&#x3002;&#x5BB6;&#x8D2B;&#xFF0C;&#x65E0;&#x4ECE;&#x81F4;&#x4E66;&#x4EE5;&#x89C2;&#xFF0C;&#x6BCF;&#x5047;&#x501F;&#x4E8E;&#x85CF;&#x4E66;&#x4E4B;&#x5BB6;&#xFF0C;&#x624B;&#x81EA;&#x7B14;&#x5F55;&#xFF0C;&#x8BA1;&#x65E5;&#x4EE5;&#x8FD8;&#x3002;&#x5929;&#x5927;&#x5BD2;&#xFF0C;&#x781A;&#x51B0;&#x575A;&#xFF0C;&#x624B;&#x6307;&#x4E0D;&#x53EF;&#x5C48;&#x4F38;&#xFF0C;&#x5F17;&#x4E4B;&#x6020;&#x3002;&#x5F55;&#x6BD5;&#xFF0C;&#x8D70;&#x9001;&#x4E4B;&#xFF0C;&#x4E0D;&#x6562;&#x7A0D;&#x903E;&#x7EA6;&#x3002;&#x4EE5;&#x662F;&#x4EBA;&#x591A;&#x4EE5;&#x4E66;&#x5047;&#x4F59;&#xFF0C;&#x4F59;&#x56E0;&#x5F97;&#x904D;&#x89C2;&#x7FA4;&#x4E66;&#x3002;&#x65E2;&#x52A0;&#x51A0;&#xFF0C;&#x76CA;&#x6155;&#x5723;&#x8D24;&#x4E4B;&#x9053;-&#x3002;&#x53C8;&#x60A3;&#x65E0;&#x7855;&#x5E08;&#x540D;&#x4EBA;&#x4E0E;&#x6E38;&#xFF0C;&#x5C1D;&#x8D8B;&#x767E;&#x91CC;&#x5916;&#xFF0C;&#x4ECE;&#x4E61;&#x4E4B;&#x5148;&#x8FBE;&#x6267;&#x7ECF;&#x53E9;&#x95EE;&#x3002;&#x5148;&#x8FBE;&#x5FB7;&#x9686;&#x671B;&#x5C0A;&#xFF0C;&#x95E8;&#x4EBA;&#x5F1F;&#x5B50;&#x586B;&#x5176;&#x5BA4;&#xFF0C;&#x672A;&#x5C1D;&#x7A0D;&#x964D;&#x8F9E;&#x8272;&#x3002;&#x4F59;&#x7ACB;&#x4F8D;&#x5DE6;&#x53F3;&#xFF0C;&#x63F4;&#x7591;&#x8D28;&#x7406;&#xFF0C;&#x4FEF;&#x8EAB;&#x503E;&#x8033;&#x4EE5;&#x8BF7;&#xFF1B;&#x6216;&#x9047;&#x5176;&#x53F1;&#x5484;&#xFF0C;&#x8272;&#x6108;&#x606D;&#xFF0C;&#x793C;&#x6108;&#x81F3;&#xFF0C;&#x4E0D;&#x6562;&#x51FA;&#x4E00;&#x8A00;&#x4EE5;&#x590D;&#xFF1B;&#x4FDF;&#x5176;&#x6B23;&#x60A6;&#xFF0C;&#x5219;&#x53C8;&#x8BF7;&#x7109;&#x3002;&#x6545;&#x4F59;&#x867D;&#x611A;&#xFF0C;&#x5352;&#x83B7;&#x6709;&#x6240;&#x95FB;&#x3002;" class="headerlink" title="&#x4F59;&#x5E7C;&#x65F6;&#x5373;&#x55DC;&#x5B66;&#x3002;&#x5BB6;&#x8D2B;&#xFF0C;&#x65E0;&#x4ECE;&#x81F4;&#x4E66;&#x4EE5;&#x89C2;&#xFF0C;&#x6BCF;&#x5047;&#x501F;&#x4E8E;&#x85CF;&#x4E66;&#x4E4B;&#x5BB6;&#xFF0C;&#x624B;&#x81EA;&#x7B14;&#x5F55;&#xFF0C;&#x8BA1;&#x65E5;&#x4EE5;&#x8FD8;&#x3002;&#x5929;&#x5927;&#x5BD2;&#xFF0C;&#x781A;&#x51B0;&#x575A;&#xFF0C;&#x624B;&#x6307;&#x4E0D;&#x53EF;&#x5C48;&#x4F38;&#xFF0C;&#x5F17;&#x4E4B;&#x6020;&#x3002;&#x5F55;&#x6BD5;&#xFF0C;&#x8D70;&#x9001;&#x4E4B;&#xFF0C;&#x4E0D;&#x6562;&#x7A0D;&#x903E;&#x7EA6;&#x3002;&#x4EE5;&#x662F;&#x4EBA;&#x591A;&#x4EE5;&#x4E66;&#x5047;&#x4F59;&#xFF0C;&#x4F59;&#x56E0;&#x5F97;&#x904D;&#x89C2;&#x7FA4;&#x4E66;&#x3002;&#x65E2;&#x52A0;&#x51A0;&#xFF0C;&#x76CA;&#x6155;&#x5723;&#x8D24;&#x4E4B;&#x9053; &#x3002;&#x53C8;&#x60A3;&#x65E0;&#x7855;&#x5E08;&#x540D;&#x4EBA;&#x4E0E;&#x6E38;&#xFF0C;&#x5C1D;&#x8D8B;&#x767E;&#x91CC;&#x5916;&#xFF0C;&#x4ECE;&#x4E61;&#x4E4B;&#x5148;&#x8FBE;&#x6267;&#x7ECF;&#x53E9;&#x95EE;&#x3002;&#x5148;&#x8FBE;&#x5FB7;&#x9686;&#x671B;&#x5C0A;&#xFF0C;&#x95E8;&#x4EBA;&#x5F1F;&#x5B50;&#x586B;&#x5176;&#x5BA4;&#xFF0C;&#x672A;&#x5C1D;&#x7A0D;&#x964D;&#x8F9E;&#x8272;&#x3002;&#x4F59;&#x7ACB;&#x4F8D;&#x5DE6;&#x53F3;&#xFF0C;&#x63F4;&#x7591;&#x8D28;&#x7406;&#xFF0C;&#x4FEF;&#x8EAB;&#x503E;&#x8033;&#x4EE5;&#x8BF7;&#xFF1B;&#x6216;&#x9047;&#x5176;&#x53F1;&#x5484;&#xFF0C;&#x8272;&#x6108;&#x606D;&#xFF0C;&#x793C;&#x6108;&#x81F3;&#xFF0C;&#x4E0D;&#x6562;&#x51FA;&#x4E00;&#x8A00;&#x4EE5;&#x590D;&#xFF1B;&#x4FDF;&#x5176;&#x6B23;&#x60A6;&#xFF0C;&#x5219;&#x53C8;&#x8BF7;&#x7109;&#x3002;&#x6545;&#x4F59;&#x867D;&#x611A;&#xFF0C;&#x5352;&#x83B7;&#x6709;&#x6240;&#x95FB;&#x3002;"></a>&#x4F59;&#x5E7C;&#x65F6;&#x5373;&#x55DC;&#x5B66;&#x3002;&#x5BB6;&#x8D2B;&#xFF0C;&#x65E0;&#x4ECE;&#x81F4;&#x4E66;&#x4EE5;&#x89C2;&#xFF0C;&#x6BCF;&#x5047;&#x501F;&#x4E8E;&#x85CF;&#x4E66;&#x4E4B;&#x5BB6;&#xFF0C;&#x624B;&#x81EA;&#x7B14;&#x5F55;&#xFF0C;&#x8BA1;&#x65E5;&#x4EE5;&#x8FD8;&#x3002;&#x5929;&#x5927;&#x5BD2;&#xFF0C;&#x781A;&#x51B0;&#x575A;&#xFF0C;&#x624B;&#x6307;&#x4E0D;&#x53EF;&#x5C48;&#x4F38;&#xFF0C;&#x5F17;&#x4E4B;&#x6020;&#x3002;&#x5F55;&#x6BD5;&#xFF0C;&#x8D70;&#x9001;&#x4E4B;&#xFF0C;&#x4E0D;&#x6562;&#x7A0D;&#x903E;&#x7EA6;&#x3002;&#x4EE5;&#x662F;&#x4EBA;&#x591A;&#x4EE5;&#x4E66;&#x5047;&#x4F59;&#xFF0C;&#x4F59;&#x56E0;&#x5F97;&#x904D;&#x89C2;&#x7FA4;&#x4E66;&#x3002;&#x65E2;&#x52A0;&#x51A0;&#xFF0C;&#x76CA;&#x6155;&#x5723;&#x8D24;&#x4E4B;&#x9053; &#x3002;&#x53C8;&#x60A3;&#x65E0;&#x7855;&#x5E08;&#x540D;&#x4EBA;&#x4E0E;&#x6E38;&#xFF0C;&#x5C1D;&#x8D8B;&#x767E;&#x91CC;&#x5916;&#xFF0C;&#x4ECE;&#x4E61;&#x4E4B;&#x5148;&#x8FBE;&#x6267;&#x7ECF;&#x53E9;&#x95EE;&#x3002;&#x5148;&#x8FBE;&#x5FB7;&#x9686;&#x671B;&#x5C0A;&#xFF0C;&#x95E8;&#x4EBA;&#x5F1F;&#x5B50;&#x586B;&#x5176;&#x5BA4;&#xFF0C;&#x672A;&#x5C1D;&#x7A0D;&#x964D;&#x8F9E;&#x8272;&#x3002;&#x4F59;&#x7ACB;&#x4F8D;&#x5DE6;&#x53F3;&#xFF0C;&#x63F4;&#x7591;&#x8D28;&#x7406;&#xFF0C;&#x4FEF;&#x8EAB;&#x503E;&#x8033;&#x4EE5;&#x8BF7;&#xFF1B;&#x6216;&#x9047;&#x5176;&#x53F1;&#x5484;&#xFF0C;&#x8272;&#x6108;&#x606D;&#xFF0C;&#x793C;&#x6108;&#x81F3;&#xFF0C;&#x4E0D;&#x6562;&#x51FA;&#x4E00;&#x8A00;&#x4EE5;&#x590D;&#xFF1B;&#x4FDF;&#x5176;&#x6B23;&#x60A6;&#xFF0C;&#x5219;&#x53C8;&#x8BF7;&#x7109;&#x3002;&#x6545;&#x4F59;&#x867D;&#x611A;&#xFF0C;&#x5352;&#x83B7;&#x6709;&#x6240;&#x95FB;&#x3002;</h4><h4 id="&#x5F53;&#x4F59;&#x4E4B;&#x4ECE;&#x5E08;&#x4E5F;&#xFF0C;&#x8D1F;&#x7BA7;&#x66F3;&#x5C63;&#x884C;&#x6DF1;&#x5C71;&#x5DE8;&#x8C37;&#x4E2D;&#x3002;&#x7A77;&#x51AC;&#x70C8;&#x98CE;&#xFF0C;&#x5927;&#x96EA;&#x6DF1;&#x6570;&#x5C3A;&#xFF0C;&#x8DB3;&#x80A4;&#x76B2;&#x88C2;&#x800C;&#x4E0D;&#x77E5;&#x3002;&#x81F3;&#x820D;&#xFF0C;&#x56DB;&#x652F;&#x50F5;&#x52B2;&#x4E0D;&#x80FD;&#x52A8;&#xFF0C;&#x5AB5;&#x4EBA;&#x6301;&#x6C64;&#x6C83;&#x704C;&#xFF0C;&#x4EE5;&#x887E;&#x62E5;&#x8986;&#xFF0C;&#x4E45;&#x800C;&#x4E43;&#x548C;&#x3002;&#x5BD3;&#x9006;&#x65C5;&#xFF0C;&#x4E3B;&#x4EBA;&#x65E5;&#x518D;&#x98DF;&#xFF0C;&#x65E0;&#x9C9C;&#x80A5;&#x6ECB;&#x5473;&#x4E4B;&#x4EAB;&#x3002;&#x540C;&#x820D;&#x751F;&#x7686;&#x88AB;&#x7EEE;&#x7EE3;&#xFF0C;&#x6234;&#x6731;&#x7F28;&#x5B9D;&#x9970;&#x4E4B;&#x5E3D;&#xFF0C;&#x8170;&#x767D;&#x7389;&#x4E4B;&#x73AF;&#xFF0C;&#x5DE6;&#x4F69;&#x5200;&#xFF0C;&#x53F3;&#x5907;&#x5BB9;&#x81ED;&#xFF0C;&#x70E8;&#x7136;&#x82E5;&#x795E;&#x4EBA;&#xFF1B;&#x4F59;&#x5219;&#x7F0A;&#x888D;&#x655D;&#x8863;&#x5904;&#x5176;&#x95F4;&#xFF0C;&#x7565;&#x65E0;&#x6155;&#x8273;&#x610F;&#xFF0C;&#x4EE5;&#x4E2D;&#x6709;&#x8DB3;&#x4E50;&#x8005;&#xFF0C;&#x4E0D;&#x77E5;&#x53E3;&#x4F53;&#x4E4B;&#x5949;&#x4E0D;&#x82E5;&#x4EBA;&#x4E5F;&#x3002;&#x76D6;&#x4F59;&#x4E4B;&#x52E4;&#x4E14;&#x8270;&#x82E5;&#x6B64;&#x3002;-&#x4ECA;&#x867D;&#x8004;&#x8001;&#xFF0C;&#x672A;&#x6709;&#x6240;&#x6210;&#xFF0C;&#x72B9;&#x5E78;&#x9884;&#x541B;&#x5B50;&#x4E4B;&#x5217;&#xFF0C;&#x800C;&#x627F;&#x5929;&#x5B50;&#x4E4B;&#x5BA0;&#x5149;&#xFF0C;&#x7F00;&#x516C;&#x537F;&#x4E4B;&#x540E;&#xFF0C;&#x65E5;&#x4F8D;&#x5750;&#x5907;&#x987E;&#x95EE;&#xFF0C;&#x56DB;&#x6D77;&#x4EA6;&#x8C2C;&#x79F0;&#x5176;&#x6C0F;&#x540D;&#xFF0C;&#x51B5;&#x624D;&#x4E4B;&#x8FC7;&#x4E8E;&#x4F59;&#x8005;&#x4E4E;&#xFF1F;"><a href="#&#x5F53;&#x4F59;&#x4E4B;&#x4ECE;&#x5E08;&#x4E5F;&#xFF0C;&#x8D1F;&#x7BA7;&#x66F3;&#x5C63;&#x884C;&#x6DF1;&#x5C71;&#x5DE8;&#x8C37;&#x4E2D;&#x3002;&#x7A77;&#x51AC;&#x70C8;&#x98CE;&#xFF0C;&#x5927;&#x96EA;&#x6DF1;&#x6570;&#x5C3A;&#xFF0C;&#x8DB3;&#x80A4;&#x76B2;&#x88C2;&#x800C;&#x4E0D;&#x77E5;&#x3002;&#x81F3;&#x820D;&#xFF0C;&#x56DB;&#x652F;&#x50F5;&#x52B2;&#x4E0D;&#x80FD;&#x52A8;&#xFF0C;&#x5AB5;&#x4EBA;&#x6301;&#x6C64;&#x6C83;&#x704C;&#xFF0C;&#x4EE5;&#x887E;&#x62E5;&#x8986;&#xFF0C;&#x4E45;&#x800C;&#x4E43;&#x548C;&#x3002;&#x5BD3;&#x9006;&#x65C5;&#xFF0C;&#x4E3B;&#x4EBA;&#x65E5;&#x518D;&#x98DF;&#xFF0C;&#x65E0;&#x9C9C;&#x80A5;&#x6ECB;&#x5473;&#x4E4B;&#x4EAB;&#x3002;&#x540C;&#x820D;&#x751F;&#x7686;&#x88AB;&#x7EEE;&#x7EE3;&#xFF0C;&#x6234;&#x6731;&#x7F28;&#x5B9D;&#x9970;&#x4E4B;&#x5E3D;&#xFF0C;&#x8170;&#x767D;&#x7389;&#x4E4B;&#x73AF;&#xFF0C;&#x5DE6;&#x4F69;&#x5200;&#xFF0C;&#x53F3;&#x5907;&#x5BB9;&#x81ED;&#xFF0C;&#x70E8;&#x7136;&#x82E5;&#x795E;&#x4EBA;&#xFF1B;&#x4F59;&#x5219;&#x7F0A;&#x888D;&#x655D;&#x8863;&#x5904;&#x5176;&#x95F4;&#xFF0C;&#x7565;&#x65E0;&#x6155;&#x8273;&#x610F;&#xFF0C;&#x4EE5;&#x4E2D;&#x6709;&#x8DB3;&#x4E50;&#x8005;&#xFF0C;&#x4E0D;&#x77E5;&#x53E3;&#x4F53;&#x4E4B;&#x5949;&#x4E0D;&#x82E5;&#x4EBA;&#x4E5F;&#x3002;&#x76D6;&#x4F59;&#x4E4B;&#x52E4;&#x4E14;&#x8270;&#x82E5;&#x6B64;&#x3002;-&#x4ECA;&#x867D;&#x8004;&#x8001;&#xFF0C;&#x672A;&#x6709;&#x6240;&#x6210;&#xFF0C;&#x72B9;&#x5E78;&#x9884;&#x541B;&#x5B50;&#x4E4B;&#x5217;&#xFF0C;&#x800C;&#x627F;&#x5929;&#x5B50;&#x4E4B;&#x5BA0;&#x5149;&#xFF0C;&#x7F00;&#x516C;&#x537F;&#x4E4B;&#x540E;&#xFF0C;&#x65E5;&#x4F8D;&#x5750;&#x5907;&#x987E;&#x95EE;&#xFF0C;&#x56DB;&#x6D77;&#x4EA6;&#x8C2C;&#x79F0;&#x5176;&#x6C0F;&#x540D;&#xFF0C;&#x51B5;&#x624D;&#x4E4B;&#x8FC7;&#x4E8E;&#x4F59;&#x8005;&#x4E4E;&#xFF1F;" class="headerlink" title="&#x5F53;&#x4F59;&#x4E4B;&#x4ECE;&#x5E08;&#x4E5F;&#xFF0C;&#x8D1F;&#x7BA7;&#x66F3;&#x5C63;&#x884C;&#x6DF1;&#x5C71;&#x5DE8;&#x8C37;&#x4E2D;&#x3002;&#x7A77;&#x51AC;&#x70C8;&#x98CE;&#xFF0C;&#x5927;&#x96EA;&#x6DF1;&#x6570;&#x5C3A;&#xFF0C;&#x8DB3;&#x80A4;&#x76B2;&#x88C2;&#x800C;&#x4E0D;&#x77E5;&#x3002;&#x81F3;&#x820D;&#xFF0C;&#x56DB;&#x652F;&#x50F5;&#x52B2;&#x4E0D;&#x80FD;&#x52A8;&#xFF0C;&#x5AB5;&#x4EBA;&#x6301;&#x6C64;&#x6C83;&#x704C;&#xFF0C;&#x4EE5;&#x887E;&#x62E5;&#x8986;&#xFF0C;&#x4E45;&#x800C;&#x4E43;&#x548C;&#x3002;&#x5BD3;&#x9006;&#x65C5;&#xFF0C;&#x4E3B;&#x4EBA;&#x65E5;&#x518D;&#x98DF;&#xFF0C;&#x65E0;&#x9C9C;&#x80A5;&#x6ECB;&#x5473;&#x4E4B;&#x4EAB;&#x3002;&#x540C;&#x820D;&#x751F;&#x7686;&#x88AB;&#x7EEE;&#x7EE3;&#xFF0C;&#x6234;&#x6731;&#x7F28;&#x5B9D;&#x9970;&#x4E4B;&#x5E3D;&#xFF0C;&#x8170;&#x767D;&#x7389;&#x4E4B;&#x73AF;&#xFF0C;&#x5DE6;&#x4F69;&#x5200;&#xFF0C;&#x53F3;&#x5907;&#x5BB9;&#x81ED;&#xFF0C;&#x70E8;&#x7136;&#x82E5;&#x795E;&#x4EBA;&#xFF1B;&#x4F59;&#x5219;&#x7F0A;&#x888D;&#x655D;&#x8863;&#x5904;&#x5176;&#x95F4;&#xFF0C;&#x7565;&#x65E0;&#x6155;&#x8273;&#x610F;&#xFF0C;&#x4EE5;&#x4E2D;&#x6709;&#x8DB3;&#x4E50;&#x8005;&#xFF0C;&#x4E0D;&#x77E5;&#x53E3;&#x4F53;&#x4E4B;&#x5949;&#x4E0D;&#x82E5;&#x4EBA;&#x4E5F;&#x3002;&#x76D6;&#x4F59;&#x4E4B;&#x52E4;&#x4E14;&#x8270;&#x82E5;&#x6B64;&#x3002; &#x4ECA;&#x867D;&#x8004;&#x8001;&#xFF0C;&#x672A;&#x6709;&#x6240;&#x6210;&#xFF0C;&#x72B9;&#x5E78;&#x9884;&#x541B;&#x5B50;&#x4E4B;&#x5217;&#xFF0C;&#x800C;&#x627F;&#x5929;&#x5B50;&#x4E4B;&#x5BA0;&#x5149;&#xFF0C;&#x7F00;&#x516C;&#x537F;&#x4E4B;&#x540E;&#xFF0C;&#x65E5;&#x4F8D;&#x5750;&#x5907;&#x987E;&#x95EE;&#xFF0C;&#x56DB;&#x6D77;&#x4EA6;&#x8C2C;&#x79F0;&#x5176;&#x6C0F;&#x540D;&#xFF0C;&#x51B5;&#x624D;&#x4E4B;&#x8FC7;&#x4E8E;&#x4F59;&#x8005;&#x4E4E;&#xFF1F;"></a>&#x5F53;&#x4F59;&#x4E4B;&#x4ECE;&#x5E08;&#x4E5F;&#xFF0C;&#x8D1F;&#x7BA7;&#x66F3;&#x5C63;&#x884C;&#x6DF1;&#x5C71;&#x5DE8;&#x8C37;&#x4E2D;&#x3002;&#x7A77;&#x51AC;&#x70C8;&#x98CE;&#xFF0C;&#x5927;&#x96EA;&#x6DF1;&#x6570;&#x5C3A;&#xFF0C;&#x8DB3;&#x80A4;&#x76B2;&#x88C2;&#x800C;&#x4E0D;&#x77E5;&#x3002;&#x81F3;&#x820D;&#xFF0C;&#x56DB;&#x652F;&#x50F5;&#x52B2;&#x4E0D;&#x80FD;&#x52A8;&#xFF0C;&#x5AB5;&#x4EBA;&#x6301;&#x6C64;&#x6C83;&#x704C;&#xFF0C;&#x4EE5;&#x887E;&#x62E5;&#x8986;&#xFF0C;&#x4E45;&#x800C;&#x4E43;&#x548C;&#x3002;&#x5BD3;&#x9006;&#x65C5;&#xFF0C;&#x4E3B;&#x4EBA;&#x65E5;&#x518D;&#x98DF;&#xFF0C;&#x65E0;&#x9C9C;&#x80A5;&#x6ECB;&#x5473;&#x4E4B;&#x4EAB;&#x3002;&#x540C;&#x820D;&#x751F;&#x7686;&#x88AB;&#x7EEE;&#x7EE3;&#xFF0C;&#x6234;&#x6731;&#x7F28;&#x5B9D;&#x9970;&#x4E4B;&#x5E3D;&#xFF0C;&#x8170;&#x767D;&#x7389;&#x4E4B;&#x73AF;&#xFF0C;&#x5DE6;&#x4F69;&#x5200;&#xFF0C;&#x53F3;&#x5907;&#x5BB9;&#x81ED;&#xFF0C;&#x70E8;&#x7136;&#x82E5;&#x795E;&#x4EBA;&#xFF1B;&#x4F59;&#x5219;&#x7F0A;&#x888D;&#x655D;&#x8863;&#x5904;&#x5176;&#x95F4;&#xFF0C;&#x7565;&#x65E0;&#x6155;&#x8273;&#x610F;&#xFF0C;&#x4EE5;&#x4E2D;&#x6709;&#x8DB3;&#x4E50;&#x8005;&#xFF0C;&#x4E0D;&#x77E5;&#x53E3;&#x4F53;&#x4E4B;&#x5949;&#x4E0D;&#x82E5;&#x4EBA;&#x4E5F;&#x3002;&#x76D6;&#x4F59;&#x4E4B;&#x52E4;&#x4E14;&#x8270;&#x82E5;&#x6B64;&#x3002; &#x4ECA;&#x867D;&#x8004;&#x8001;&#xFF0C;&#x672A;&#x6709;&#x6240;&#x6210;&#xFF0C;&#x72B9;&#x5E78;&#x9884;&#x541B;&#x5B50;&#x4E4B;&#x5217;&#xFF0C;&#x800C;&#x627F;&#x5929;&#x5B50;&#x4E4B;&#x5BA0;&#x5149;&#xFF0C;&#x7F00;&#x516C;&#x537F;&#x4E4B;&#x540E;&#xFF0C;&#x65E5;&#x4F8D;&#x5750;&#x5907;&#x987E;&#x95EE;&#xFF0C;&#x56DB;&#x6D77;&#x4EA6;&#x8C2C;&#x79F0;&#x5176;&#x6C0F;&#x540D;&#xFF0C;&#x51B5;&#x624D;&#x4E4B;&#x8FC7;&#x4E8E;&#x4F59;&#x8005;&#x4E4E;&#xFF1F;</h4><h4 id="&#x4ECA;&#x8BF8;&#x751F;&#x5B66;&#x4E8E;&#x592A;&#x5B66;&#xFF0C;&#x53BF;&#x5B98;&#x65E5;&#x6709;&#x5EEA;&#x7A0D;&#x4E4B;&#x4F9B;&#xFF0C;&#x7236;&#x6BCD;&#x5C81;&#x6709;&#x88D8;&#x845B;&#x4E4B;&#x9057;&#xFF0C;&#x65E0;&#x51BB;&#x9981;&#x4E4B;&#x60A3;&#x77E3;&#xFF1B;&#x5750;&#x5927;&#x53A6;&#x4E4B;&#x4E0B;&#x800C;&#x8BF5;&#x8BD7;&#x4E66;&#xFF0C;&#x65E0;&#x5954;&#x8D70;&#x4E4B;&#x52B3;&#x77E3;&#xFF1B;&#x6709;&#x53F8;&#x4E1A;&#x3001;&#x535A;&#x58EB;&#x4E3A;&#x4E4B;&#x5E08;&#xFF0C;&#x672A;&#x6709;&#x95EE;&#x800C;&#x4E0D;&#x544A;&#x3001;&#x6C42;&#x800C;&#x4E0D;&#x5F97;&#x8005;&#x4E5F;&#xFF1B;&#x51E1;&#x6240;&#x5B9C;&#x6709;&#x4E4B;&#x4E66;&#xFF0C;&#x7686;&#x96C6;&#x4E8E;&#x6B64;&#xFF0C;&#x4E0D;&#x5FC5;&#x82E5;&#x4F59;&#x4E4B;&#x624B;&#x5F55;&#xFF0C;&#x5047;&#x8BF8;&#x4EBA;&#x800C;&#x540E;&#x89C1;&#x4E5F;&#x3002;&#x5176;&#x4E1A;&#x6709;&#x4E0D;&#x7CBE;&#x3001;&#x5FB7;&#x6709;&#x4E0D;&#x6210;&#x8005;&#xFF0C;&#x975E;&#x5929;&#x8D28;&#x4E4B;&#x5351;&#xFF0C;&#x5219;&#x5FC3;&#x4E0D;&#x82E5;&#x4F59;&#x4E4B;&#x4E13;&#x8033;&#xFF0C;&#x5C82;&#x4ED6;&#x4EBA;&#x4E4B;&#x8FC7;&#x54C9;&#xFF01;"><a href="#&#x4ECA;&#x8BF8;&#x751F;&#x5B66;&#x4E8E;&#x592A;&#x5B66;&#xFF0C;&#x53BF;&#x5B98;&#x65E5;&#x6709;&#x5EEA;&#x7A0D;&#x4E4B;&#x4F9B;&#xFF0C;&#x7236;&#x6BCD;&#x5C81;&#x6709;&#x88D8;&#x845B;&#x4E4B;&#x9057;&#xFF0C;&#x65E0;&#x51BB;&#x9981;&#x4E4B;&#x60A3;&#x77E3;&#xFF1B;&#x5750;&#x5927;&#x53A6;&#x4E4B;&#x4E0B;&#x800C;&#x8BF5;&#x8BD7;&#x4E66;&#xFF0C;&#x65E0;&#x5954;&#x8D70;&#x4E4B;&#x52B3;&#x77E3;&#xFF1B;&#x6709;&#x53F8;&#x4E1A;&#x3001;&#x535A;&#x58EB;&#x4E3A;&#x4E4B;&#x5E08;&#xFF0C;&#x672A;&#x6709;&#x95EE;&#x800C;&#x4E0D;&#x544A;&#x3001;&#x6C42;&#x800C;&#x4E0D;&#x5F97;&#x8005;&#x4E5F;&#xFF1B;&#x51E1;&#x6240;&#x5B9C;&#x6709;&#x4E4B;&#x4E66;&#xFF0C;&#x7686;&#x96C6;&#x4E8E;&#x6B64;&#xFF0C;&#x4E0D;&#x5FC5;&#x82E5;&#x4F59;&#x4E4B;&#x624B;&#x5F55;&#xFF0C;&#x5047;&#x8BF8;&#x4EBA;&#x800C;&#x540E;&#x89C1;&#x4E5F;&#x3002;&#x5176;&#x4E1A;&#x6709;&#x4E0D;&#x7CBE;&#x3001;&#x5FB7;&#x6709;&#x4E0D;&#x6210;&#x8005;&#xFF0C;&#x975E;&#x5929;&#x8D28;&#x4E4B;&#x5351;&#xFF0C;&#x5219;&#x5FC3;&#x4E0D;&#x82E5;&#x4F59;&#x4E4B;&#x4E13;&#x8033;&#xFF0C;&#x5C82;&#x4ED6;&#x4EBA;&#x4E4B;&#x8FC7;&#x54C9;&#xFF01;" class="headerlink" title="&#x4ECA;&#x8BF8;&#x751F;&#x5B66;&#x4E8E;&#x592A;&#x5B66;&#xFF0C;&#x53BF;&#x5B98;&#x65E5;&#x6709;&#x5EEA;&#x7A0D;&#x4E4B;&#x4F9B;&#xFF0C;&#x7236;&#x6BCD;&#x5C81;&#x6709;&#x88D8;&#x845B;&#x4E4B;&#x9057;&#xFF0C;&#x65E0;&#x51BB;&#x9981;&#x4E4B;&#x60A3;&#x77E3;&#xFF1B;&#x5750;&#x5927;&#x53A6;&#x4E4B;&#x4E0B;&#x800C;&#x8BF5;&#x8BD7;&#x4E66;&#xFF0C;&#x65E0;&#x5954;&#x8D70;&#x4E4B;&#x52B3;&#x77E3;&#xFF1B;&#x6709;&#x53F8;&#x4E1A;&#x3001;&#x535A;&#x58EB;&#x4E3A;&#x4E4B;&#x5E08;&#xFF0C;&#x672A;&#x6709;&#x95EE;&#x800C;&#x4E0D;&#x544A;&#x3001;&#x6C42;&#x800C;&#x4E0D;&#x5F97;&#x8005;&#x4E5F;&#xFF1B;&#x51E1;&#x6240;&#x5B9C;&#x6709;&#x4E4B;&#x4E66;&#xFF0C;&#x7686;&#x96C6;&#x4E8E;&#x6B64;&#xFF0C;&#x4E0D;&#x5FC5;&#x82E5;&#x4F59;&#x4E4B;&#x624B;&#x5F55;&#xFF0C;&#x5047;&#x8BF8;&#x4EBA;&#x800C;&#x540E;&#x89C1;&#x4E5F;&#x3002;&#x5176;&#x4E1A;&#x6709;&#x4E0D;&#x7CBE;&#x3001;&#x5FB7;&#x6709;&#x4E0D;&#x6210;&#x8005;&#xFF0C;&#x975E;&#x5929;&#x8D28;&#x4E4B;&#x5351;&#xFF0C;&#x5219;&#x5FC3;&#x4E0D;&#x82E5;&#x4F59;&#x4E4B;&#x4E13;&#x8033;&#xFF0C;&#x5C82;&#x4ED6;&#x4EBA;&#x4E4B;&#x8FC7;&#x54C9;&#xFF01;"></a>&#x4ECA;&#x8BF8;&#x751F;&#x5B66;&#x4E8E;&#x592A;&#x5B66;&#xFF0C;&#x53BF;&#x5B98;&#x65E5;&#x6709;&#x5EEA;&#x7A0D;&#x4E4B;&#x4F9B;&#xFF0C;&#x7236;&#x6BCD;&#x5C81;&#x6709;&#x88D8;&#x845B;&#x4E4B;&#x9057;&#xFF0C;&#x65E0;&#x51BB;&#x9981;&#x4E4B;&#x60A3;&#x77E3;&#xFF1B;&#x5750;&#x5927;&#x53A6;&#x4E4B;&#x4E0B;&#x800C;&#x8BF5;&#x8BD7;&#x4E66;&#xFF0C;&#x65E0;&#x5954;&#x8D70;&#x4E4B;&#x52B3;&#x77E3;&#xFF1B;&#x6709;&#x53F8;&#x4E1A;&#x3001;&#x535A;&#x58EB;&#x4E3A;&#x4E4B;&#x5E08;&#xFF0C;&#x672A;&#x6709;&#x95EE;&#x800C;&#x4E0D;&#x544A;&#x3001;&#x6C42;&#x800C;&#x4E0D;&#x5F97;&#x8005;&#x4E5F;&#xFF1B;&#x51E1;&#x6240;&#x5B9C;&#x6709;&#x4E4B;&#x4E66;&#xFF0C;&#x7686;&#x96C6;&#x4E8E;&#x6B64;&#xFF0C;&#x4E0D;&#x5FC5;&#x82E5;&#x4F59;&#x4E4B;&#x624B;&#x5F55;&#xFF0C;&#x5047;&#x8BF8;&#x4EBA;&#x800C;&#x540E;&#x89C1;&#x4E5F;&#x3002;&#x5176;&#x4E1A;&#x6709;&#x4E0D;&#x7CBE;&#x3001;&#x5FB7;&#x6709;&#x4E0D;&#x6210;&#x8005;&#xFF0C;&#x975E;&#x5929;&#x8D28;&#x4E4B;&#x5351;&#xFF0C;&#x5219;&#x5FC3;&#x4E0D;&#x82E5;&#x4F59;&#x4E4B;&#x4E13;&#x8033;&#xFF0C;&#x5C82;&#x4ED6;&#x4EBA;&#x4E4B;&#x8FC7;&#x54C9;&#xFF01;</h4><h4 id="&#x4E1C;&#x9633;&#x9A6C;&#x751F;&#x541B;&#x5219;&#xFF0C;&#x5728;&#x592A;&#x5B66;&#x5DF2;&#x4E8C;&#x5E74;&#xFF0C;&#x6D41;&#x8F88;&#x751A;&#x79F0;&#x5176;&#x8D24;&#x3002;&#x4F59;&#x671D;&#x4EAC;&#x5E08;&#xFF0C;&#x751F;&#x4EE5;&#x4E61;&#x4EBA;&#x5B50;&#x8C12;&#x4F59;&#xFF0C;&#x64B0;&#x957F;&#x4E66;&#x4EE5;&#x4E3A;&#x8D3D;&#xFF0C;&#x8F9E;&#x751A;&#x7545;&#x8FBE;&#x3002;&#x4E0E;&#x4E4B;&#x8BBA;&#x8FA8;&#xFF0C;&#x8A00;&#x548C;&#x800C;&#x8272;&#x5937;&#x3002;&#x81EA;&#x8C13;&#x5C11;&#x65F6;&#x7528;&#x5FC3;&#x4E8E;&#x5B66;&#x751A;&#x52B3;&#xFF0C;&#x662F;&#x53EF;&#x8C13;&#x5584;&#x5B66;&#x8005;&#x77E3;&#x3002;&#x5176;&#x5C06;&#x5F52;&#x89C1;&#x5176;&#x4EB2;&#x4E5F;&#xFF0C;&#x4F59;&#x6545;&#x9053;&#x4E3A;&#x5B66;&#x4E4B;&#x96BE;&#x4EE5;&#x544A;&#x4E4B;&#x3002;&#x8C13;&#x4F59;&#x52C9;&#x4E61;&#x4EBA;&#x4EE5;&#x5B66;&#x8005;&#xFF0C;&#x4F59;&#x4E4B;&#x5FD7;&#x4E5F;&#xFF1B;&#x8BCB;&#x6211;&#x5938;&#x9645;&#x9047;&#x4E4B;&#x76DB;&#x800C;&#x9A84;&#x4E61;&#x4EBA;&#x8005;&#xFF0C;&#x5C82;&#x77E5;&#x4E88;&#x8005;&#x54C9;&#x3002;"><a href="#&#x4E1C;&#x9633;&#x9A6C;&#x751F;&#x541B;&#x5219;&#xFF0C;&#x5728;&#x592A;&#x5B66;&#x5DF2;&#x4E8C;&#x5E74;&#xFF0C;&#x6D41;&#x8F88;&#x751A;&#x79F0;&#x5176;&#x8D24;&#x3002;&#x4F59;&#x671D;&#x4EAC;&#x5E08;&#xFF0C;&#x751F;&#x4EE5;&#x4E61;&#x4EBA;&#x5B50;&#x8C12;&#x4F59;&#xFF0C;&#x64B0;&#x957F;&#x4E66;&#x4EE5;&#x4E3A;&#x8D3D;&#xFF0C;&#x8F9E;&#x751A;&#x7545;&#x8FBE;&#x3002;&#x4E0E;&#x4E4B;&#x8BBA;&#x8FA8;&#xFF0C;&#x8A00;&#x548C;&#x800C;&#x8272;&#x5937;&#x3002;&#x81EA;&#x8C13;&#x5C11;&#x65F6;&#x7528;&#x5FC3;&#x4E8E;&#x5B66;&#x751A;&#x52B3;&#xFF0C;&#x662F;&#x53EF;&#x8C13;&#x5584;&#x5B66;&#x8005;&#x77E3;&#x3002;&#x5176;&#x5C06;&#x5F52;&#x89C1;&#x5176;&#x4EB2;&#x4E5F;&#xFF0C;&#x4F59;&#x6545;&#x9053;&#x4E3A;&#x5B66;&#x4E4B;&#x96BE;&#x4EE5;&#x544A;&#x4E4B;&#x3002;&#x8C13;&#x4F59;&#x52C9;&#x4E61;&#x4EBA;&#x4EE5;&#x5B66;&#x8005;&#xFF0C;&#x4F59;&#x4E4B;&#x5FD7;&#x4E5F;&#xFF1B;&#x8BCB;&#x6211;&#x5938;&#x9645;&#x9047;&#x4E4B;&#x76DB;&#x800C;&#x9A84;&#x4E61;&#x4EBA;&#x8005;&#xFF0C;&#x5C82;&#x77E5;&#x4E88;&#x8005;&#x54C9;&#x3002;" class="headerlink" title="&#x4E1C;&#x9633;&#x9A6C;&#x751F;&#x541B;&#x5219;&#xFF0C;&#x5728;&#x592A;&#x5B66;&#x5DF2;&#x4E8C;&#x5E74;&#xFF0C;&#x6D41;&#x8F88;&#x751A;&#x79F0;&#x5176;&#x8D24;&#x3002;&#x4F59;&#x671D;&#x4EAC;&#x5E08;&#xFF0C;&#x751F;&#x4EE5;&#x4E61;&#x4EBA;&#x5B50;&#x8C12;&#x4F59;&#xFF0C;&#x64B0;&#x957F;&#x4E66;&#x4EE5;&#x4E3A;&#x8D3D;&#xFF0C;&#x8F9E;&#x751A;&#x7545;&#x8FBE;&#x3002;&#x4E0E;&#x4E4B;&#x8BBA;&#x8FA8;&#xFF0C;&#x8A00;&#x548C;&#x800C;&#x8272;&#x5937;&#x3002;&#x81EA;&#x8C13;&#x5C11;&#x65F6;&#x7528;&#x5FC3;&#x4E8E;&#x5B66;&#x751A;&#x52B3;&#xFF0C;&#x662F;&#x53EF;&#x8C13;&#x5584;&#x5B66;&#x8005;&#x77E3;&#x3002;&#x5176;&#x5C06;&#x5F52;&#x89C1;&#x5176;&#x4EB2;&#x4E5F;&#xFF0C;&#x4F59;&#x6545;&#x9053;&#x4E3A;&#x5B66;&#x4E4B;&#x96BE;&#x4EE5;&#x544A;&#x4E4B;&#x3002;&#x8C13;&#x4F59;&#x52C9;&#x4E61;&#x4EBA;&#x4EE5;&#x5B66;&#x8005;&#xFF0C;&#x4F59;&#x4E4B;&#x5FD7;&#x4E5F;&#xFF1B;&#x8BCB;&#x6211;&#x5938;&#x9645;&#x9047;&#x4E4B;&#x76DB;&#x800C;&#x9A84;&#x4E61;&#x4EBA;&#x8005;&#xFF0C;&#x5C82;&#x77E5;&#x4E88;&#x8005;&#x54C9;&#x3002;"></a>&#x4E1C;&#x9633;&#x9A6C;&#x751F;&#x541B;&#x5219;&#xFF0C;&#x5728;&#x592A;&#x5B66;&#x5DF2;&#x4E8C;&#x5E74;&#xFF0C;&#x6D41;&#x8F88;&#x751A;&#x79F0;&#x5176;&#x8D24;&#x3002;&#x4F59;&#x671D;&#x4EAC;&#x5E08;&#xFF0C;&#x751F;&#x4EE5;&#x4E61;&#x4EBA;&#x5B50;&#x8C12;&#x4F59;&#xFF0C;&#x64B0;&#x957F;&#x4E66;&#x4EE5;&#x4E3A;&#x8D3D;&#xFF0C;&#x8F9E;&#x751A;&#x7545;&#x8FBE;&#x3002;&#x4E0E;&#x4E4B;&#x8BBA;&#x8FA8;&#xFF0C;&#x8A00;&#x548C;&#x800C;&#x8272;&#x5937;&#x3002;&#x81EA;&#x8C13;&#x5C11;&#x65F6;&#x7528;&#x5FC3;&#x4E8E;&#x5B66;&#x751A;&#x52B3;&#xFF0C;&#x662F;&#x53EF;&#x8C13;&#x5584;&#x5B66;&#x8005;&#x77E3;&#x3002;&#x5176;&#x5C06;&#x5F52;&#x89C1;&#x5176;&#x4EB2;&#x4E5F;&#xFF0C;&#x4F59;&#x6545;&#x9053;&#x4E3A;&#x5B66;&#x4E4B;&#x96BE;&#x4EE5;&#x544A;&#x4E4B;&#x3002;&#x8C13;&#x4F59;&#x52C9;&#x4E61;&#x4EBA;&#x4EE5;&#x5B66;&#x8005;&#xFF0C;&#x4F59;&#x4E4B;&#x5FD7;&#x4E5F;&#xFF1B;&#x8BCB;&#x6211;&#x5938;&#x9645;&#x9047;&#x4E4B;&#x76DB;&#x800C;&#x9A84;&#x4E61;&#x4EBA;&#x8005;&#xFF0C;&#x5C82;&#x77E5;&#x4E88;&#x8005;&#x54C9;&#x3002;</h4>]]></content>
      <categories>
        <category>诗句</category>
      </categories>
      <tags>
        <tag>poem</tag>
      </tags>
  </entry>
  <entry>
    <title>骑行太裕-长武</title>
    <url>/2022/07/20/ride-taiyu-to-changwu/</url>
    <content><![CDATA[<h2 id="&#x5728;&#x592A;&#x88D5;&#x8C73;&#x5DDE;&#x9A7F;&#x722C;&#x5761;"><a href="#&#x5728;&#x592A;&#x88D5;&#x8C73;&#x5DDE;&#x9A7F;&#x722C;&#x5761;" class="headerlink" title="&#x5728;&#x592A;&#x88D5;&#x8C73;&#x5DDE;&#x9A7F;&#x722C;&#x5761;"></a><center>&#x5728;&#x592A;&#x88D5;&#x8C73;&#x5DDE;&#x9A7F;&#x722C;&#x5761;</center></h2><img src="/2022/07/20/ride-taiyu-to-changwu/20220717_190041.jpg" style="zoom:16%; ">

<h4 id="&#x9A91;&#x884C;&#x8DEF;&#x8FC7;&#x592A;&#x88D5;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x5761;&#x5EA6;&#x6709;&#x5FEB;30-&#xFF0C;&#x786C;&#x9876;&#x7740;&#x722C;&#x5899;&#x4E00;&#x6837;&#x7684;&#x7834;&#xFF0C;&#x8E29;&#x5230;&#x6700;&#x5C0F;&#x76D8;&#x914D;&#x6700;&#x5927;&#x98DE;&#x8F6E;&#x4E0A;&#x6765;&#xFF0C;&#x771F;&#x662F;&#x8981;&#x4E86;&#x547D;&#x4E86;"><a href="#&#x9A91;&#x884C;&#x8DEF;&#x8FC7;&#x592A;&#x88D5;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x5761;&#x5EA6;&#x6709;&#x5FEB;30-&#xFF0C;&#x786C;&#x9876;&#x7740;&#x722C;&#x5899;&#x4E00;&#x6837;&#x7684;&#x7834;&#xFF0C;&#x8E29;&#x5230;&#x6700;&#x5C0F;&#x76D8;&#x914D;&#x6700;&#x5927;&#x98DE;&#x8F6E;&#x4E0A;&#x6765;&#xFF0C;&#x771F;&#x662F;&#x8981;&#x4E86;&#x547D;&#x4E86;" class="headerlink" title="&#x9A91;&#x884C;&#x8DEF;&#x8FC7;&#x592A;&#x88D5;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x5761;&#x5EA6;&#x6709;&#x5FEB;30%&#xFF0C;&#x786C;&#x9876;&#x7740;&#x722C;&#x5899;&#x4E00;&#x6837;&#x7684;&#x7834;&#xFF0C;&#x8E29;&#x5230;&#x6700;&#x5C0F;&#x76D8;&#x914D;&#x6700;&#x5927;&#x98DE;&#x8F6E;&#x4E0A;&#x6765;&#xFF0C;&#x771F;&#x662F;&#x8981;&#x4E86;&#x547D;&#x4E86;"></a><center>&#x9A91;&#x884C;&#x8DEF;&#x8FC7;&#x592A;&#x88D5;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x5761;&#x5EA6;&#x6709;&#x5FEB;30%&#xFF0C;&#x786C;&#x9876;&#x7740;&#x722C;&#x5899;&#x4E00;&#x6837;&#x7684;&#x7834;&#xFF0C;&#x8E29;&#x5230;&#x6700;&#x5C0F;&#x76D8;&#x914D;&#x6700;&#x5927;&#x98DE;&#x8F6E;&#x4E0A;&#x6765;&#xFF0C;&#x771F;&#x662F;&#x8981;&#x4E86;&#x547D;&#x4E86;</center></h4><h4 id="&#x8FD8;&#x597D;&#x722C;&#x4E0A;&#x6765;&#x65F6;&#x98CE;&#x666F;&#x8FD9;&#x4E48;&#x597D;"><a href="#&#x8FD8;&#x597D;&#x722C;&#x4E0A;&#x6765;&#x65F6;&#x98CE;&#x666F;&#x8FD9;&#x4E48;&#x597D;" class="headerlink" title="&#x8FD8;&#x597D;&#x722C;&#x4E0A;&#x6765;&#x65F6;&#x98CE;&#x666F;&#x8FD9;&#x4E48;&#x597D;"></a><center>&#x8FD8;&#x597D;&#x722C;&#x4E0A;&#x6765;&#x65F6;&#x98CE;&#x666F;&#x8FD9;&#x4E48;&#x597D;</center></h4><img src="/2022/07/20/ride-taiyu-to-changwu/20220717_194726.jpg" style="zoom:16%;">

<img src="/2022/07/20/ride-taiyu-to-changwu/52e61bbfdj139ff14e80ca7415513574.jpg" style="zoom:40%;">

<img src="/2022/07/20/ride-taiyu-to-changwu/20220717_192451.jpg" style="zoom:15%;">

<h2 id="&#x9A91;&#x884C;&#x5728;&#x957F;&#x6B66;&#x9014;&#x4E2D;&#x6DF1;&#x5C71;&#x4E2D;&#x666F;&#x8272;"><a href="#&#x9A91;&#x884C;&#x5728;&#x957F;&#x6B66;&#x9014;&#x4E2D;&#x6DF1;&#x5C71;&#x4E2D;&#x666F;&#x8272;" class="headerlink" title="&#x9A91;&#x884C;&#x5728;&#x957F;&#x6B66;&#x9014;&#x4E2D;&#x6DF1;&#x5C71;&#x4E2D;&#x666F;&#x8272;"></a><center>&#x9A91;&#x884C;&#x5728;&#x957F;&#x6B66;&#x9014;&#x4E2D;&#x6DF1;&#x5C71;&#x4E2D;&#x666F;&#x8272;</center></h2><img src="/2022/07/20/ride-taiyu-to-changwu/20220720_194047.jpg" style="zoom:18%;">

<h2 id="&#x5230;&#x8FBE;&#x76EE;&#x7684;&#x5730;&#xFF0C;&#x5403;&#x4E0A;&#x4E00;&#x7897;&#x957F;&#x6B66;&#x7279;&#x8272;&#xFF0C;&#x5C0F;&#x9165;&#x8089;&#xFF0C;&#x4E0D;&#x662F;&#x6211;&#x60F3;&#x8C61;&#x4E2D;&#x90A3;&#x79CD;&#x8106;&#x8106;&#x7684;&#x5C0F;&#x9165;&#x8089;"><a href="#&#x5230;&#x8FBE;&#x76EE;&#x7684;&#x5730;&#xFF0C;&#x5403;&#x4E0A;&#x4E00;&#x7897;&#x957F;&#x6B66;&#x7279;&#x8272;&#xFF0C;&#x5C0F;&#x9165;&#x8089;&#xFF0C;&#x4E0D;&#x662F;&#x6211;&#x60F3;&#x8C61;&#x4E2D;&#x90A3;&#x79CD;&#x8106;&#x8106;&#x7684;&#x5C0F;&#x9165;&#x8089;" class="headerlink" title="&#x5230;&#x8FBE;&#x76EE;&#x7684;&#x5730;&#xFF0C;&#x5403;&#x4E0A;&#x4E00;&#x7897;&#x957F;&#x6B66;&#x7279;&#x8272;&#xFF0C;&#x5C0F;&#x9165;&#x8089;&#xFF0C;&#x4E0D;&#x662F;&#x6211;&#x60F3;&#x8C61;&#x4E2D;&#x90A3;&#x79CD;&#x8106;&#x8106;&#x7684;&#x5C0F;&#x9165;&#x8089;"></a><center>&#x5230;&#x8FBE;&#x76EE;&#x7684;&#x5730;&#xFF0C;&#x5403;&#x4E0A;&#x4E00;&#x7897;&#x957F;&#x6B66;&#x7279;&#x8272;&#xFF0C;&#x5C0F;&#x9165;&#x8089;&#xFF0C;&#x4E0D;&#x662F;&#x6211;&#x60F3;&#x8C61;&#x4E2D;&#x90A3;&#x79CD;&#x8106;&#x8106;&#x7684;&#x5C0F;&#x9165;&#x8089;</center></h2><img src="/2022/07/20/ride-taiyu-to-changwu/20220707_170402.jpg" style="zoom:15%;">

<img src="/2022/07/20/ride-taiyu-to-changwu/8a9787327m75f330f78e9a1b23cb43c4.jpg" style="zoom:60%;">

<h2 id="&#x5F52;&#x9014;"><a href="#&#x5F52;&#x9014;" class="headerlink" title="&#x5F52;&#x9014;"></a><center>&#x5F52;&#x9014;</center></h2><img src="/2022/07/20/ride-taiyu-to-changwu/20220720_195224.jpg" style="zoom:17%;">

<h4 id="&#x56DE;&#x6765;&#x7684;&#x8DEF;&#x4E0A;&#x90FD;&#x662F;&#x5927;&#x5761;&#xFF0C;&#x5E73;&#x5747;&#x901F;&#x5EA6;&#x80FD;&#x8FBE;&#x5230;40km&#xFF0C;&#x7A7A;&#x6C14;&#x51C9;&#x723D;"><a href="#&#x56DE;&#x6765;&#x7684;&#x8DEF;&#x4E0A;&#x90FD;&#x662F;&#x5927;&#x5761;&#xFF0C;&#x5E73;&#x5747;&#x901F;&#x5EA6;&#x80FD;&#x8FBE;&#x5230;40km&#xFF0C;&#x7A7A;&#x6C14;&#x51C9;&#x723D;" class="headerlink" title="&#x56DE;&#x6765;&#x7684;&#x8DEF;&#x4E0A;&#x90FD;&#x662F;&#x5927;&#x5761;&#xFF0C;&#x5E73;&#x5747;&#x901F;&#x5EA6;&#x80FD;&#x8FBE;&#x5230;40km&#xFF0C;&#x7A7A;&#x6C14;&#x51C9;&#x723D;"></a><center>&#x56DE;&#x6765;&#x7684;&#x8DEF;&#x4E0A;&#x90FD;&#x662F;&#x5927;&#x5761;&#xFF0C;&#x5E73;&#x5747;&#x901F;&#x5EA6;&#x80FD;&#x8FBE;&#x5230;40km&#xFF0C;&#x7A7A;&#x6C14;&#x51C9;&#x723D;</center></h4>]]></content>
      <categories>
        <category>life</category>
      </categories>
      <tags>
        <tag>ride</tag>
      </tags>
  </entry>
</search>
